<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>App History API</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <link href="https://www.w3.org/StyleSheets/TR/2016/cg-draft" rel="stylesheet">
  <meta content="Bikeshed version 59d067506, updated Fri Jul 23 15:43:29 2021 -0700" name="generator">
  <link href="https://wicg.github.io/app-history/" rel="canonical">
<style>
.selected-text-file-an-issue {
  position: fixed;
  bottom: 0;
  right: 0;
  background: rgba(255, 255, 255, 0.8);
  font-size: smaller;
  padding: 4px 10px;
  z-index: 4;
}

dfn var {
  font-style: italic;
}

table {
  margin: 1em 0;
}

/* WHATWG-style <hr>s, instead of WICG-style. Specific selector is necessary to override WICG styles. */
:not(.head) > :not(.head) + hr {
  display: block;
  background: none;
  border: none;
  padding: 0;
  margin: 3em 0;
  height: auto;
}
:not(.head) > :not(.head) + hr::before {
  content: none;
}

/* domintro from https://resources.whatwg.org/standard.css */
.domintro {
  position: relative;
  color: green;
  background: #DDFFDD;
  margin: 2.5em 0 2em 0;
  padding: 1.5em 1em 0.5em 2em;
}

.domintro dt, .domintro dt * {
  color: black;
  font-size: inherit;
}
.domintro dd {
  margin: 0.5em 0 1em 2em; padding: 0;
}
.domintro dd p {
  margin: 0.5em 0;
}
.domintro::before {
  content: 'For web developers (non-normative)';
  background: green;
  color: white;
  padding: 0.15em 0.25em;
  font-style: normal;
  position: absolute;
  top: -0.8em;
  left: -0.8em;
}
</style>
<style>/* style-autolinks */

.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}</style>
<style>/* style-colors */

/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}</style>
<style>/* style-counters */

body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}</style>
<style>/* style-dfn-panel */

:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    height: auto;
    width: -webkit-fit-content;
    width: fit-content;
    max-width: 300px;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0; }
.dfn-panel li { list-style: inside; }
.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: .5em;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
}

.dfn-paneled { cursor: pointer; }
</style>
<style>/* style-md-lists */

/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}</style>
<style>/* style-selflinks */

:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* style-syntax-highlighting */

            pre.idl.highlight {
                background: var(--borderedblock-bg, var(--def-bg));
            }
            
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */
</style>
<style>/* style-var-click-highlighting */

    var { cursor: pointer; }
    var.selected0 { background-color: #F4D200; box-shadow: 0 0 0 2px #F4D200; }
    var.selected1 { background-color: #FF87A2; box-shadow: 0 0 0 2px #FF87A2; }
    var.selected2 { background-color: #96E885; box-shadow: 0 0 0 2px #96E885; }
    var.selected3 { background-color: #3EEED2; box-shadow: 0 0 0 2px #3EEED2; }
    var.selected4 { background-color: #EACFB6; box-shadow: 0 0 0 2px #EACFB6; }
    var.selected5 { background-color: #82DDFF; box-shadow: 0 0 0 2px #82DDFF; }
    var.selected6 { background-color: #FFBCF2; box-shadow: 0 0 0 2px #FFBCF2; }
    </style>
<style>/* style-darkmode */

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}

@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
    }
}
@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">App History API</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="profile-and-date"><span class="content">Draft Community Group Report, <time class="dt-updated" datetime="2021-07-28">28 July 2021</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://wicg.github.io/app-history/">https://wicg.github.io/app-history/</a>
     <dt class="editor">Editor:
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-url url" href="https://domenic.me/">Domenic Denicola</a> (<a class="p-org org" href="https://www.google.com/">Google</a>) <a class="u-email email" href="mailto:d@domenic.me">d@domenic.me</a>
     <dt>Participate:
     <dd><a href="https://github.com/WICG/app-history">GitHub WICG/app-history</a> (<a href="https://github.com/WICG/app-history/issues/new">new issue</a>, <a href="https://github.com/WICG/app-history/issues?state=open">open issues</a>)
     <dt>Commits:
     <dd><a href="https://github.com/WICG/app-history/commits/master/spec.bs">GitHub spec.bs commits</a>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2021 the Contributors to the App History API Specification, published by the <a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>.
A human-readable <a href="http://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>The app history API provides a web application-focused way of managing same-origin same-frame history entries and navigations.</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This specification was published by the <a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a>.
  It is not a W3C Standard nor is it on the W3C Standards Track.

  Please note that under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a> there is a limited opt-out and other conditions apply.

  Learn more about <a href="http://www.w3.org/community/">W3C Community and Business Groups</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#global"><span class="secno">1</span> <span class="content">The <code class="idl"><span>AppHistory</span></code> class</span></a>
     <ol class="toc">
      <li><a href="#entries-api"><span class="secno">1.1</span> <span class="content">Introspecting the app history entry list</span></a>
      <li><a href="#ongoing-state"><span class="secno">1.2</span> <span class="content">Ongoing navigation tracking</span></a>
      <li><a href="#global-navigate"><span class="secno">1.3</span> <span class="content">Navigating</span></a>
      <li><a href="#global-traversing"><span class="secno">1.4</span> <span class="content">Traversing</span></a>
      <li><a href="#global-events"><span class="secno">1.5</span> <span class="content">Event handlers</span></a>
     </ol>
    <li>
     <a href="#navigate-event"><span class="secno">2</span> <span class="content">The <code class="idl"><span>navigate</span></code> event</span></a>
     <ol class="toc">
      <li><a href="#navigate-event-class"><span class="secno">2.1</span> <span class="content">The <code class="idl"><span>AppHistoryNavigateEvent</span></code> class</span></a>
      <li><a href="#navigate-event-destination"><span class="secno">2.2</span> <span class="content">The <code class="idl"><span>AppHistoryDestination</span></code> class</span></a>
      <li><a href="#navigate-event-firing"><span class="secno">2.3</span> <span class="content">Firing the event</span></a>
     </ol>
    <li><a href="#apphistoryentry-class"><span class="secno">3</span> <span class="content">App history entries</span></a>
    <li>
     <a href="#navigate-patches"><span class="secno">4</span> <span class="content">Patches to fire the <code class="idl"><span>navigate</span></code> event</span></a>
     <ol class="toc">
      <li><a href="#form-patches"><span class="secno">4.1</span> <span class="content">Form submission patches</span></a>
      <li><a href="#user-initiated-patches"><span class="secno">4.2</span> <span class="content">Browser UI/user-initiated patches</span></a>
      <li><a href="#navigate-algorithm-patches"><span class="secno">4.3</span> <span class="content">Navigation algorithm updates</span></a>
      <li><a href="#navigate-event-traversal-patches"><span class="secno">4.4</span> <span class="content">History traversal updates</span></a>
     </ol>
    <li>
     <a href="#session-history-patches"><span class="secno">5</span> <span class="content">Patches to session history</span></a>
     <ol class="toc">
      <li><a href="#session-history-new-she-fields"><span class="secno">5.1</span> <span class="content">New <span>session history entry</span> items</span></a>
      <li><a href="#session-history-patches-key"><span class="secno">5.2</span> <span class="content">Carrying over the app history key</span></a>
      <li><a href="#session-history-patches-state"><span class="secno">5.3</span> <span class="content">Carrying over the app history state</span></a>
      <li><a href="#session-history-patches-origin"><span class="secno">5.4</span> <span class="content">Tracking the <span>origin</span> member</span></a>
      <li><a href="#session-history-patches-update"><span class="secno">5.5</span> <span class="content">Updating the <code class="idl"><span>AppHistory</span></code> object</span></a>
     </ol>
    <li>
     <a href="#other-patches"><span class="secno">6</span> <span class="content">Other patches</span></a>
     <ol class="toc">
      <li><a href="#cancel-navigation"><span class="secno">6.1</span> <span class="content">Canceling navigation</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
   </ol>
  </nav>
  <main>
<script async src="https://resources.whatwg.org/file-issue.js"></script>
   <h2 class="heading settled" data-level="1" id="global"><span class="secno">1. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#apphistory" id="ref-for-apphistory">AppHistory</a></code> class</span><a class="self-link" href="#global"></a></h2>
<pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/window-object.html#window" id="ref-for-window"><c- g>Window</c-></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#apphistory" id="ref-for-apphistory①"><c- n>AppHistory</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="AppHistory" href="#dom-window-apphistory" id="ref-for-dom-window-apphistory"><c- g>appHistory</c-></a>;
};
</pre>
   <p>Each <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/window-object.html#window" id="ref-for-window①">Window</a></code> object has an associated <dfn class="dfn-paneled" data-dfn-for="Window" data-dfn-type="dfn" data-noexport id="window-app-history">app history</dfn>, which is a new <code class="idl"><a data-link-type="idl" href="#apphistory" id="ref-for-apphistory②">AppHistory</a></code> instance created alongside the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/window-object.html#window" id="ref-for-window②">Window</a></code>.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="Window" data-dfn-type="attribute" data-export id="dom-window-apphistory"><code>appHistory</code></dfn> getter steps are to return <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this">this</a>'s <a data-link-type="dfn" href="#window-app-history" id="ref-for-window-app-history">app history</a>.</p>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="apphistory"><code><c- g>AppHistory</c-></code></dfn> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget"><c- n>EventTarget</c-></a> {
  <a data-link-type="dfn" href="https://heycam.github.io/webidl/#idl-sequence" id="ref-for-idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#apphistoryentry" id="ref-for-apphistoryentry"><c- n>AppHistoryEntry</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-apphistory-entries" id="ref-for-dom-apphistory-entries"><c- g>entries</c-></a>();
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#apphistoryentry" id="ref-for-apphistoryentry①"><c- n>AppHistoryEntry</c-></a>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="AppHistoryEntry?" href="#dom-apphistory-current" id="ref-for-dom-apphistory-current"><c- g>current</c-></a>;

  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-apphistory-cangoback" id="ref-for-dom-apphistory-cangoback"><c- g>canGoBack</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean" id="ref-for-idl-boolean①"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-apphistory-cangoforward" id="ref-for-dom-apphistory-cangoforward"><c- g>canGoForward</c-></a>;

  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined" id="ref-for-idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-apphistory-navigate" id="ref-for-dom-apphistory-navigate"><c- g>navigate</c-></a>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString"><c- b>USVString</c-></a> <dfn class="idl-code" data-dfn-for="AppHistory/navigate(url, options), AppHistory/navigate(url)" data-dfn-type="argument" data-export id="dom-apphistory-navigate-url-options-url"><code><c- g>url</c-></code><a class="self-link" href="#dom-apphistory-navigate-url-options-url"></a></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-apphistorynavigateoptions" id="ref-for-dictdef-apphistorynavigateoptions"><c- n>AppHistoryNavigateOptions</c-></a> <dfn class="idl-code" data-dfn-for="AppHistory/navigate(url, options), AppHistory/navigate(url)" data-dfn-type="argument" data-export id="dom-apphistory-navigate-url-options-options"><code><c- g>options</c-></code><a class="self-link" href="#dom-apphistory-navigate-url-options-options"></a></dfn> = {});
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise①"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined" id="ref-for-idl-undefined①"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-apphistory-reload" id="ref-for-dom-apphistory-reload"><c- g>reload</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-apphistoryreloadoptions" id="ref-for-dictdef-apphistoryreloadoptions"><c- n>AppHistoryReloadOptions</c-></a> <dfn class="idl-code" data-dfn-for="AppHistory/reload(options), AppHistory/reload()" data-dfn-type="argument" data-export id="dom-apphistory-reload-options-options"><code><c- g>options</c-></code><a class="self-link" href="#dom-apphistory-reload-options-options"></a></dfn> = {});

  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise②"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined" id="ref-for-idl-undefined②"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-apphistory-goto" id="ref-for-dom-apphistory-goto"><c- g>goTo</c-></a>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString"><c- b>DOMString</c-></a> <dfn class="idl-code" data-dfn-for="AppHistory/goTo(key, options), AppHistory/goTo(key)" data-dfn-type="argument" data-export id="dom-apphistory-goto-key-options-key"><code><c- g>key</c-></code><a class="self-link" href="#dom-apphistory-goto-key-options-key"></a></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-apphistorynavigationoptions" id="ref-for-dictdef-apphistorynavigationoptions"><c- n>AppHistoryNavigationOptions</c-></a> <dfn class="idl-code" data-dfn-for="AppHistory/goTo(key, options), AppHistory/goTo(key)" data-dfn-type="argument" data-export id="dom-apphistory-goto-key-options-options"><code><c- g>options</c-></code><a class="self-link" href="#dom-apphistory-goto-key-options-options"></a></dfn> = {});
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise③"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined" id="ref-for-idl-undefined③"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-apphistory-back" id="ref-for-dom-apphistory-back"><c- g>back</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-apphistorynavigationoptions" id="ref-for-dictdef-apphistorynavigationoptions①"><c- n>AppHistoryNavigationOptions</c-></a> <dfn class="idl-code" data-dfn-for="AppHistory/back(options), AppHistory/back()" data-dfn-type="argument" data-export id="dom-apphistory-back-options-options"><code><c- g>options</c-></code><a class="self-link" href="#dom-apphistory-back-options-options"></a></dfn> = {});
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise④"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined" id="ref-for-idl-undefined④"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-apphistory-forward" id="ref-for-dom-apphistory-forward"><c- g>forward</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-apphistorynavigationoptions" id="ref-for-dictdef-apphistorynavigationoptions②"><c- n>AppHistoryNavigationOptions</c-></a> <dfn class="idl-code" data-dfn-for="AppHistory/forward(options), AppHistory/forward()" data-dfn-type="argument" data-export id="dom-apphistory-forward-options-options"><code><c- g>options</c-></code><a class="self-link" href="#dom-apphistory-forward-options-options"></a></dfn> = {});

  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-apphistory-onnavigate" id="ref-for-dom-apphistory-onnavigate"><c- g>onnavigate</c-></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler①"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-apphistory-onnavigatesuccess" id="ref-for-dom-apphistory-onnavigatesuccess"><c- g>onnavigatesuccess</c-></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler②"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-apphistory-onnavigateerror" id="ref-for-dom-apphistory-onnavigateerror"><c- g>onnavigateerror</c-></a>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-apphistorynavigationoptions"><code><c- g>AppHistoryNavigationOptions</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-any" id="ref-for-idl-any"><c- b>any</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryNavigationOptions" data-dfn-type="dict-member" data-export data-type="any " id="dom-apphistorynavigationoptions-navigateinfo"><code><c- g>navigateInfo</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-apphistorynavigateoptions"><code><c- g>AppHistoryNavigateOptions</c-></code></dfn> : <a data-link-type="idl-name" href="#dictdef-apphistorynavigationoptions" id="ref-for-dictdef-apphistorynavigationoptions③"><c- n>AppHistoryNavigationOptions</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-any" id="ref-for-idl-any①"><c- b>any</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryNavigateOptions" data-dfn-type="dict-member" data-export data-type="any " id="dom-apphistorynavigateoptions-state"><code><c- g>state</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean" id="ref-for-idl-boolean②"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-default="false" data-dfn-for="AppHistoryNavigateOptions" data-dfn-type="dict-member" data-export data-type="boolean " id="dom-apphistorynavigateoptions-replace"><code><c- g>replace</c-></code></dfn> = <c- b>false</c->;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-apphistoryreloadoptions"><code><c- g>AppHistoryReloadOptions</c-></code></dfn> : <a data-link-type="idl-name" href="#dictdef-apphistorynavigationoptions" id="ref-for-dictdef-apphistorynavigationoptions④"><c- n>AppHistoryNavigationOptions</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-any" id="ref-for-idl-any②"><c- b>any</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryReloadOptions" data-dfn-type="dict-member" data-export data-type="any " id="dom-apphistoryreloadoptions-state"><code><c- g>state</c-></code></dfn>;
};
</pre>
   <h3 class="heading settled" data-level="1.1" id="entries-api"><span class="secno">1.1. </span><span class="content">Introspecting the app history entry list</span><a class="self-link" href="#entries-api"></a></h3>
   <dl class="domintro non-normative">
    <dt><code><var>entries</var> = <code class="idl"><a data-link-type="idl" href="#dom-window-apphistory" id="ref-for-dom-window-apphistory①">appHistory</a></code>.<code class="idl"><a data-link-type="idl" href="#dom-apphistory-entries" id="ref-for-dom-apphistory-entries①">entries</a></code>()</code> 
    <dd>
     <p>Returns an array of <code class="idl"><a data-link-type="idl" href="#apphistoryentry" id="ref-for-apphistoryentry②">AppHistoryEntry</a></code> instances representing the current app history list, i.e. all session history entries for this <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/window-object.html#window" id="ref-for-window③">Window</a></code> that are <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#same-origin" id="ref-for-same-origin">same origin</a> and contiguous to the current session history entry. </p>
    <dt><code><code class="idl"><a data-link-type="idl" href="#dom-window-apphistory" id="ref-for-dom-window-apphistory②">appHistory</a></code>.<code class="idl"><a data-link-type="idl" href="#dom-apphistory-current" id="ref-for-dom-apphistory-current①">current</a></code></code> 
    <dd>
     <p>The current <code class="idl"><a data-link-type="idl" href="#apphistoryentry" id="ref-for-apphistoryentry③">AppHistoryEntry</a></code>. </p>
    <dt><code><code class="idl"><a data-link-type="idl" href="#dom-window-apphistory" id="ref-for-dom-window-apphistory③">appHistory</a></code>.<code class="idl"><a data-link-type="idl" href="#dom-apphistory-cangoback" id="ref-for-dom-apphistory-cangoback①">canGoBack</a></code></code> 
    <dd>
     <p>Returns true if the current <code class="idl"><a data-link-type="idl" href="#apphistoryentry" id="ref-for-apphistoryentry④">AppHistoryEntry</a></code> is not the first one in the app history entries list. </p>
    <dt><code><code class="idl"><a data-link-type="idl" href="#dom-window-apphistory" id="ref-for-dom-window-apphistory④">appHistory</a></code>.<code class="idl"><a data-link-type="idl" href="#dom-apphistory-cangoforward" id="ref-for-dom-apphistory-cangoforward①">canGoForward</a></code></code> 
    <dd>
     <p>Returns true if the current <code class="idl"><a data-link-type="idl" href="#apphistoryentry" id="ref-for-apphistoryentry⑤">AppHistoryEntry</a></code> is not the last one in the app history entries list. </p>
   </dl>
   <p>Each <code class="idl"><a data-link-type="idl" href="#apphistory" id="ref-for-apphistory③">AppHistory</a></code> object has an associated <dfn class="dfn-paneled" data-dfn-for="AppHistory" data-dfn-type="dfn" data-noexport id="apphistory-entry-list">entry list</dfn>, a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list">list</a> of <code class="idl"><a data-link-type="idl" href="#apphistoryentry" id="ref-for-apphistoryentry⑥">AppHistoryEntry</a></code> objects, initially empty.</p>
   <p>Each <code class="idl"><a data-link-type="idl" href="#apphistory" id="ref-for-apphistory④">AppHistory</a></code> object has an associated <dfn class="dfn-paneled" data-dfn-for="AppHistory" data-dfn-type="dfn" data-noexport id="apphistory-current-index">current index</dfn>, an integer, initially −1.</p>
   <div class="algorithm" data-algorithm="entries()" data-algorithm-for="AppHistory">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistory" data-dfn-type="method" data-export id="dom-apphistory-entries"><code>entries()</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this①">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#concept-document-window" id="ref-for-concept-document-window">associated Document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active">fully active</a>, then return the empty list.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this②">this</a>'s <a data-link-type="dfn" href="#apphistory-entry-list" id="ref-for-apphistory-entry-list">entries list</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="current" data-algorithm-for="AppHistory">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistory" data-dfn-type="attribute" data-export id="dom-apphistory-current"><code>current</code></dfn> getter steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this③">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#concept-document-window" id="ref-for-concept-document-window①">associated Document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active①">fully active</a>, then return null.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this④">this</a>'s <a data-link-type="dfn" href="#apphistory-current-index" id="ref-for-apphistory-current-index">current index</a> is −1, then return null.</p>
      <p class="note" role="note">This occurs if accessing the API while on the initial <code>about:blank</code> <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document">Document</a></code>, where the <a data-link-type="dfn" href="#apphistory-update-the-entries" id="ref-for-apphistory-update-the-entries">update the entries</a> algorithm will not yet have been run to completion. </p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this⑤">this</a>'s <a data-link-type="dfn" href="#apphistory-entry-list" id="ref-for-apphistory-entry-list①">entry list</a>[<a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this⑥">this</a>'s <a data-link-type="dfn" href="#apphistory-current-index" id="ref-for-apphistory-current-index①">current index</a>].</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="canGoBack" data-algorithm-for="AppHistory">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistory" data-dfn-type="attribute" data-export id="dom-apphistory-cangoback"><code>canGoBack</code></dfn> getter steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this⑦">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global②">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#concept-document-window" id="ref-for-concept-document-window②">associated Document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active②">fully active</a>, then return false.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this⑧">this</a>'s <a data-link-type="dfn" href="#apphistory-current-index" id="ref-for-apphistory-current-index②">current index</a> is −1, then return false.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this⑨">this</a>'s <a data-link-type="dfn" href="#apphistory-current-index" id="ref-for-apphistory-current-index③">current index</a> is 0, then return false.</p>
     <li data-md>
      <p>Return true.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="canGoForward" data-algorithm-for="AppHistory">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistory" data-dfn-type="attribute" data-export id="dom-apphistory-cangoforward"><code>canGoForward</code></dfn> getter steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this①⓪">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global③">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#concept-document-window" id="ref-for-concept-document-window③">associated Document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active③">fully active</a>, then return false.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this①①">this</a>'s <a data-link-type="dfn" href="#apphistory-current-index" id="ref-for-apphistory-current-index④">current index</a> is −1, then return false.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this①②">this</a>'s <a data-link-type="dfn" href="#apphistory-current-index" id="ref-for-apphistory-current-index⑤">current index</a> is equal to <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this①③">this</a>'s <a data-link-type="dfn" href="#apphistory-entry-list" id="ref-for-apphistory-entry-list②">entry list</a>'s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-size" id="ref-for-list-size">size</a> − 1, then return false.</p>
     <li data-md>
      <p>Return true.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="update the entries" data-algorithm-for="AppHistory">
     To <dfn class="dfn-paneled" data-dfn-for="AppHistory" data-dfn-type="dfn" data-noexport id="apphistory-update-the-entries">update the entries</dfn> for an <code class="idl"><a data-link-type="idl" href="#apphistory" id="ref-for-apphistory⑤">AppHistory</a></code> instance <var>appHistory</var>: 
    <ol>
     <li data-md>
      <p>Let <var>browsingContext</var> be <var>appHistory</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global④">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#window-bc" id="ref-for-window-bc">browsing context</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert">Assert</a>: <var>browsingContext</var> is not null.</p>
     <li data-md>
      <p>Let <var>sessionHistory</var> be <var>browsingContext</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#session-history" id="ref-for-session-history">session history</a>.</p>
     <li data-md>
      <p>If <var>browsingContext</var> is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/dom.html#still-on-its-initial-about:blank-document" id="ref-for-still-on-its-initial-about:blank-document">still on its initial <code>about:blank</code> <code>Document</code></a>, then:</p>
      <ol>
       <li data-md>
        <p class="assertion">Assert: <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-entry-list" id="ref-for-apphistory-entry-list③">entry list</a> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-is-empty" id="ref-for-list-is-empty">is empty</a>.</p>
       <li data-md>
        <p>Return.</p>
      </ol>
      <p class="note" role="note">This can occur if running the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#url-and-history-update-steps" id="ref-for-url-and-history-update-steps">URL and history update steps</a>, e.g. via <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/multipage/dynamic-markup-insertion.html#dom-document-open" id="ref-for-dom-document-open">document.open()</a></code>, on the initial <code>about:blank</code> <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①">Document</a></code>. The app history API chooses not to expose the initial <code>about:blank</code> <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document②">Document</a></code>, so we bail early. </p>
     <li data-md>
      <p>Let <var>appHistorySHEs</var> be a new empty list.</p>
     <li data-md>
      <p>Let <var>currentSHE</var> be <var>sessionHistory</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#current-entry" id="ref-for-current-entry">current entry</a>.</p>
     <li data-md>
      <p>Let <var>backwardIndex</var> be the index of <var>currentSHE</var> within <var>sessionHistory</var>, minus 1.</p>
     <li data-md>
      <p>While <var>backwardIndex</var> > 0:</p>
      <ol>
       <li data-md>
        <p>Let <var>she</var> be <var>sessionHistory</var>[<var>backwardIndex</var>].</p>
       <li data-md>
        <p>If <var>she</var>’s <a data-link-type="dfn" href="#session-history-entry-origin" id="ref-for-session-history-entry-origin">origin</a> is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#same-origin" id="ref-for-same-origin①">same origin</a> with <var>currentSHE</var>’s <a data-link-type="dfn" href="#session-history-entry-origin" id="ref-for-session-history-entry-origin①">origin</a>, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-prepend" id="ref-for-list-prepend">prepend</a> <var>she</var> to <var>appHistorySHEs</var>.</p>
       <li data-md>
        <p>Otherwise, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-break" id="ref-for-iteration-break">break</a>.</p>
       <li data-md>
        <p>Set <var>backwardIndex</var> to <var>backwardIndex</var> − 1.</p>
      </ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append">Append</a> <var>currentSHE</var> to <var>appHistorySHEs</var>.</p>
     <li data-md>
      <p>Let <var>forwardIndex</var> be the index of <var>currentSHE</var> within <var>sessionHistory</var>, plus 1.</p>
     <li data-md>
      <p>While <var>forwardIndex</var> &lt; <var>sessionHistory</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-size" id="ref-for-list-size①">size</a>:</p>
      <ol>
       <li data-md>
        <p>Let <var>she</var> be <var>sessionHistory</var>[<var>forwardIndex</var>].</p>
       <li data-md>
        <p>If <var>she</var>’s <a data-link-type="dfn" href="#session-history-entry-origin" id="ref-for-session-history-entry-origin②">origin</a> is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#same-origin" id="ref-for-same-origin②">same origin</a> with <var>currentSHE</var>’s <a data-link-type="dfn" href="#session-history-entry-origin" id="ref-for-session-history-entry-origin③">origin</a>, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append①">append</a> <var>she</var> to <var>appHistorySHEs</var>.</p>
       <li data-md>
        <p>Otherwise, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-break" id="ref-for-iteration-break①">break</a>.</p>
       <li data-md>
        <p>Set <var>forwardIndex</var> to <var>forwardIndex</var> + 1.</p>
      </ol>
     <li data-md>
      <p>Let <var>newCurrentIndex</var> be the index of <var>currentSHE</var> within <var>appHistorySHEs</var>.</p>
     <li data-md>
      <p>Let <var>newEntryList</var> be an empty list.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate">For each</a> <var>oldAHE</var> of <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-entry-list" id="ref-for-apphistory-entry-list④">entry list</a>:</p>
      <ol>
       <li data-md>
        <p>Set <var>oldAHE</var>’s <a data-link-type="dfn" href="#apphistoryentry-index" id="ref-for-apphistoryentry-index">index</a> to −1.</p>
      </ol>
     <li data-md>
      <p>Let <var>index</var> be 0.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate①">For each</a> <var>she</var> of <var>appHistorySHEs</var>:</p>
      <ol>
       <li data-md>
        <p>If <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-entry-list" id="ref-for-apphistory-entry-list⑤">entry list</a> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain">contains</a> an <code class="idl"><a data-link-type="idl" href="#apphistoryentry" id="ref-for-apphistoryentry⑦">AppHistoryEntry</a></code> <var>existingAHE</var> whose <a data-link-type="dfn" href="#apphistoryentry-session-history-entry" id="ref-for-apphistoryentry-session-history-entry">session history entry</a> is <var>she</var>, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append②">append</a> <var>existingAHE</var> to <var>newEntryList</var>.</p>
       <li data-md>
        <p>Otherwise:</p>
        <ol>
         <li data-md>
          <p>Let <var>newAHE</var> be a <a data-link-type="dfn" href="https://heycam.github.io/webidl/#new" id="ref-for-new">new</a> <code class="idl"><a data-link-type="idl" href="#apphistoryentry" id="ref-for-apphistoryentry⑧">AppHistoryEntry</a></code> created in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm">relevant realm</a> of <var>appHistory</var>.</p>
         <li data-md>
          <p>Set <var>newAHE</var>’s <a data-link-type="dfn" href="#apphistoryentry-session-history-entry" id="ref-for-apphistoryentry-session-history-entry①">session history entry</a> to <var>she</var>.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append③">Append</a> <var>newAHE</var> to <var>newEntryList</var>.</p>
        </ol>
       <li data-md>
        <p>Set <var>newEntryList</var>[<var>index</var>]'s <a data-link-type="dfn" href="#apphistoryentry-index" id="ref-for-apphistoryentry-index①">index</a> to <var>index</var>.</p>
       <li data-md>
        <p>Set <var>index</var> to <var>index</var> + 1.</p>
      </ol>
     <li data-md>
      <p>Set <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-entry-list" id="ref-for-apphistory-entry-list⑥">entry list</a> to <var>newEntryList</var>.</p>
     <li data-md>
      <p>Set <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-current-index" id="ref-for-apphistory-current-index⑥">current index</a> to <var>newCurrentIndex</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="get the app history index">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="get-the-app-history-index">get the app history index</dfn> of a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#session-history-entry" id="ref-for-session-history-entry">session history entry</a> <var>she</var> within an <code class="idl"><a data-link-type="idl" href="#apphistory" id="ref-for-apphistory⑥">AppHistory</a></code> <var>appHistory</var>: 
    <ol>
     <li data-md>
      <p>Let <var>index</var> be 0.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate②">For each</a> <var>ahe</var> of <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-entry-list" id="ref-for-apphistory-entry-list⑦">entry list</a>:</p>
      <ol>
       <li data-md>
        <p>If <var>ahe</var>’s <a data-link-type="dfn" href="#apphistoryentry-session-history-entry" id="ref-for-apphistoryentry-session-history-entry②">session history entry</a> is equal to <var>she</var>, then return <var>index</var>.</p>
       <li data-md>
        <p>Increment <var>index</var> by 1.</p>
      </ol>
     <li data-md>
      <p class="assertion">Assert: this step is never reached.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="1.2" id="ongoing-state"><span class="secno">1.2. </span><span class="content">Ongoing navigation tracking</span><a class="self-link" href="#ongoing-state"></a></h3>
   <p>During any given navigation, the <code class="idl"><a data-link-type="idl" href="#apphistory" id="ref-for-apphistory⑦">AppHistory</a></code> object needs to keep track of the following:</p>
   <table class="data">
    <caption>For non-"<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-traverse" id="ref-for-dom-apphistorynavigationtype-traverse">traverse</a></code>" navigations </caption>
    <thead>
     <tr>
      <th>State 
      <th>Duration 
      <th>Explanation 
    <tbody>
     <tr>
      <td>The <code class="idl"><a data-link-type="idl" href="#apphistorynavigateevent" id="ref-for-apphistorynavigateevent">AppHistoryNavigateEvent</a></code> 
      <td>For the duration of event firing 
      <td>So that if the navigation is canceled while the event is firing, we can <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#canceled-flag" id="ref-for-canceled-flag">cancel</a> the event. 
     <tr>
      <td>Any <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateoptions-state" id="ref-for-dom-apphistorynavigateoptions-state">state</a></code> 
      <td>For the duration of event firing 
      <td>So that we can update the current entry’s state after the event successfully finishes firing without being canceled. 
     <tr>
      <td>The event’s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-signal" id="ref-for-dom-apphistorynavigateevent-signal">signal</a></code> 
      <td>Until all promises passed to <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-respondwith" id="ref-for-dom-apphistorynavigateevent-respondwith">respondWith()</a></code> have settled 
      <td>So that if the navigation is canceled, we can <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-signal-abort" id="ref-for-abortsignal-signal-abort">signal abort</a>. 
     <tr>
      <td>Any <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise⑤">Promise</a></code> that was returned 
      <td>Until all promises passed to <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-respondwith" id="ref-for-dom-apphistorynavigateevent-respondwith①">respondWith()</a></code> have settled 
      <td>So that we can <a data-link-type="dfn" href="https://heycam.github.io/webidl/#resolve" id="ref-for-resolve">resolve</a> or <a data-link-type="dfn" href="https://heycam.github.io/webidl/#reject" id="ref-for-reject">reject</a> it appropriately. 
   </table>
   <table class="data">
    <caption>For "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-traverse" id="ref-for-dom-apphistorynavigationtype-traverse①">traverse</a></code>" navigations </caption>
    <thead>
     <tr>
      <th>State 
      <th>Duration 
      <th>Explanation 
    <tbody>
     <tr>
      <td>The <code class="idl"><a data-link-type="idl" href="#apphistorynavigateevent" id="ref-for-apphistorynavigateevent①">AppHistoryNavigateEvent</a></code> 
      <td>For the duration of event firing 
      <td>So that if the navigation is canceled while the event is firing, we can <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#canceled-flag" id="ref-for-canceled-flag①">cancel</a> the event. 
     <tr>
      <td>Any <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationoptions-navigateinfo" id="ref-for-dom-apphistorynavigationoptions-navigateinfo">navigateInfo</a></code> 
      <td>Until the task is queued to fire the <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigate" id="ref-for-eventdef-apphistory-navigate">navigate</a></code> event 
      <td>So that we can use it to fire the <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigate" id="ref-for-eventdef-apphistory-navigate①">navigate</a></code> event after the the trip through the <a data-link-type="dfn" href="https://whatpr.org/html/6315/history.html#tn-session-history-traversal-queue" id="ref-for-tn-session-history-traversal-queue">session history traversal queue</a> 
     <tr>
      <td>The event’s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-signal" id="ref-for-dom-apphistorynavigateevent-signal①">signal</a></code> 
      <td>Until all promises passed to <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-respondwith" id="ref-for-dom-apphistorynavigateevent-respondwith②">respondWith()</a></code> have settled 
      <td>So that if the navigation is canceled, we can <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-signal-abort" id="ref-for-abortsignal-signal-abort①">signal abort</a>. 
     <tr>
      <td>Any <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise⑥">Promise</a></code> that was returned 
      <td>Until all promises passed to <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-respondwith" id="ref-for-dom-apphistorynavigateevent-respondwith③">respondWith()</a></code> have settled 
      <td>So that we can <a data-link-type="dfn" href="https://heycam.github.io/webidl/#resolve" id="ref-for-resolve①">resolve</a> or <a data-link-type="dfn" href="https://heycam.github.io/webidl/#reject" id="ref-for-reject①">reject</a> it appropriately. 
   </table>
   <p>Furthermore, we need to account for the fact that there might be multiple traversals queued up, e.g. via</p>
<pre class="highlight"><c- a>const</c-> key1 <c- o>=</c-> appHistory<c- p>.</c->entries<c- p>()[</c->appHistory<c- p>.</c->current<c- p>.</c->index <c- o>-</c-> <c- mf>1</c-><c- p>].</c->key<c- p>;</c->
<c- a>const</c-> key2 <c- o>=</c-> appHistory<c- p>.</c->entries<c- p>()[</c->appHistory<c- p>.</c->current<c- p>.</c->index <c- o>+</c-> <c- mf>1</c-><c- p>].</c->key<c- p>;</c->

appHistory<c- p>.</c->goTo<c- p>(</c->key1<c- p>);</c-> <c- c1>// intentionally no await</c->
appHistory<c- p>.</c->goTo<c- p>(</c->key2<c- p>);</c->
</pre>
   <p>And, while non-traversal navigations cannot be queued in the same way since a new non-traversal navigation cancels an old one, we need to keep some state around so that we can properly cancel the old one. That is, given</p>
<pre class="highlight"><c- a>const</c-> p1 <c- o>=</c-> appHistory<c- p>.</c->navigate<c- p>(</c->url1<c- p>);</c->
<c- a>const</c-> p2 <c- o>=</c-> appHistory<c- p>.</c->navigate<c- p>(</c->url2<c- p>);</c->
</pre>
   <p>we need to ensure that when navigating to <code>url2</code>, we still have the <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise⑦">Promise</a></code> <code>p1</code> around so that we can reject it. We can’t just get rid of any ongoing navigation promises the moment the second call to <code class="idl"><a data-link-type="idl" href="#dom-apphistory-navigate" id="ref-for-dom-apphistory-navigate①">navigate()</a></code> happens.</p>
   <p>We end up accomplishing all this using the following setup:</p>
   <p>Each <code class="idl"><a data-link-type="idl" href="#apphistory" id="ref-for-apphistory⑧">AppHistory</a></code> object has an associated <dfn class="dfn-paneled" data-dfn-for="AppHistory" data-dfn-type="dfn" data-noexport id="apphistory-ongoing-navigate-event">ongoing navigate event</dfn>, an <code class="idl"><a data-link-type="idl" href="#apphistorynavigateevent" id="ref-for-apphistorynavigateevent②">AppHistoryNavigateEvent</a></code> or null, initially null.</p>
   <p>Each <code class="idl"><a data-link-type="idl" href="#apphistory" id="ref-for-apphistory⑨">AppHistory</a></code> object has an associated <dfn class="dfn-paneled" data-dfn-for="AppHistory" data-dfn-type="dfn" data-noexport id="apphistory-to-be-set-serialized-state">to-be-set serialized state</dfn>, a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#serialized-state" id="ref-for-serialized-state">serialized state</a> or null, initially null.</p>
   <p>Each <code class="idl"><a data-link-type="idl" href="#apphistory" id="ref-for-apphistory①⓪">AppHistory</a></code> object has an associated <dfn class="dfn-paneled" data-dfn-for="AppHistory" data-dfn-type="dfn" data-noexport id="apphistory-upcoming-non-traverse-navigation">upcoming non-traverse navigation</dfn>, which is an <a data-link-type="dfn" href="#app-history-api-navigation" id="ref-for-app-history-api-navigation">app history API navigation</a> or null, initially null.</p>
   <p>Each <code class="idl"><a data-link-type="idl" href="#apphistory" id="ref-for-apphistory①①">AppHistory</a></code> object has an associated <dfn class="dfn-paneled" data-dfn-for="AppHistory" data-dfn-type="dfn" data-noexport id="apphistory-ongoing-non-traverse-navigation">ongoing non-traverse navigation</dfn>, which is an <a data-link-type="dfn" href="#app-history-api-navigation" id="ref-for-app-history-api-navigation①">app history API navigation</a> or null, initially null.</p>
   <p>Each <code class="idl"><a data-link-type="idl" href="#apphistory" id="ref-for-apphistory①②">AppHistory</a></code> object has an associated <dfn class="dfn-paneled" data-dfn-for="AppHistory" data-dfn-type="dfn" data-noexport id="apphistory-ongoing-traverse-navigations">ongoing traverse navigations</dfn>, which is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map">map</a> from strings to <a data-link-type="dfn" href="#app-history-api-navigation" id="ref-for-app-history-api-navigation②">app history API navigations</a>, initially empty.</p>
   <p>Each <code class="idl"><a data-link-type="idl" href="#apphistory" id="ref-for-apphistory①③">AppHistory</a></code> object has an associated <dfn class="dfn-paneled" data-dfn-for="AppHistory" data-dfn-type="dfn" data-noexport id="apphistory-post-navigate-event-ongoing-navigation-signal">post-navigate event ongoing navigation signal</dfn>, which is an <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal">AbortSignal</a></code> or null, initially null.</p>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="app-history-api-navigation">app history API navigation</dfn> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct" id="ref-for-struct">struct</a> with the following <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct-item" id="ref-for-struct-item">items</a>:</p>
   <ul>
    <li data-md>
     <p>An <dfn class="dfn-paneled" data-dfn-for="app history API navigation" data-dfn-type="dfn" data-noexport id="app-history-api-navigation-info">info</dfn>, a JavaScript value</p>
    <li data-md>
     <p>A <dfn class="dfn-paneled" data-dfn-for="app history API navigation" data-dfn-type="dfn" data-noexport id="app-history-api-navigation-returned-promise">returned promise</dfn>, a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise⑧">Promise</a></code></p>
    <li data-md>
     <p>A <dfn class="dfn-paneled" data-dfn-for="app history API navigation" data-dfn-type="dfn" data-noexport id="app-history-api-navigation-cleanup-step">cleanup step</dfn>, an algorithm step</p>
   </ul>
   <p class="note" role="note">We need to store the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal①">AbortSignal</a></code> separately from the <a data-link-type="dfn" href="#app-history-api-navigation" id="ref-for-app-history-api-navigation③">app history API navigation</a> struct, since it needs to be tracked even for navigations that are not via the app history APIs. So, we store it some of the time in the <a data-link-type="dfn" href="#apphistory-ongoing-navigate-event" id="ref-for-apphistory-ongoing-navigate-event">ongoing navigate event</a>'s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-signal" id="ref-for-dom-apphistorynavigateevent-signal②">signal</a></code> property, and the rest of the time in the <a data-link-type="dfn" href="#apphistory-post-navigate-event-ongoing-navigation-signal" id="ref-for-apphistory-post-navigate-event-ongoing-navigation-signal">post-navigate event ongoing navigation signal</a>. </p>
   <div class="algorithm" data-algorithm="set the upcoming non-traverse navigation" data-algorithm-for="AppHistory">
     To <dfn class="dfn-paneled" data-dfn-for="AppHistory" data-dfn-type="dfn" data-noexport id="apphistory-set-the-upcoming-non-traverse-navigation">set the upcoming non-traverse navigation</dfn> given an <code class="idl"><a data-link-type="idl" href="#apphistory" id="ref-for-apphistory①④">AppHistory</a></code> <var>appHistory</var> and a JavaScript value <var>info</var>: 
    <ol>
     <li data-md>
      <p>Let <var>promise</var> be <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-new-promise" id="ref-for-a-new-promise">a new promise</a> created in <var>appHistory</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm①">relevant Realm</a>.</p>
     <li data-md>
      <p>Let <var>cleanupStep</var> be an algorithm step which sets <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-ongoing-non-traverse-navigation" id="ref-for-apphistory-ongoing-non-traverse-navigation">ongoing non-traverse navigation</a> to null.</p>
     <li data-md>
      <p>Let <var>ongoingNavigation</var> be an <a data-link-type="dfn" href="#app-history-api-navigation" id="ref-for-app-history-api-navigation④">app history API navigation</a> whose <a data-link-type="dfn" href="#app-history-api-navigation-info" id="ref-for-app-history-api-navigation-info">info</a> is <var>info</var>, <a data-link-type="dfn" href="#app-history-api-navigation-returned-promise" id="ref-for-app-history-api-navigation-returned-promise">returned promise</a> is <var>promise</var>, and <a data-link-type="dfn" href="#app-history-api-navigation-cleanup-step" id="ref-for-app-history-api-navigation-cleanup-step">cleanup step</a> is <var>cleanupStep</var>.</p>
     <li data-md>
      <p class="assertion">Assert: <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-upcoming-non-traverse-navigation" id="ref-for-apphistory-upcoming-non-traverse-navigation">upcoming non-traverse navigation</a> is null.</p>
     <li data-md>
      <p>Set <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-upcoming-non-traverse-navigation" id="ref-for-apphistory-upcoming-non-traverse-navigation①">upcoming non-traverse navigation</a> to <var>ongoingNavigation</var>.</p>
     <li data-md>
      <p>Return <var>ongoingNavigation</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="promote the upcoming non-traverse navigation to ongoing" data-algorithm-for="AppHistory">
     To <dfn class="dfn-paneled" data-dfn-for="AppHistory" data-dfn-type="dfn" data-noexport id="apphistory-promote-the-upcoming-non-traverse-navigation-to-ongoing">promote the upcoming non-traverse navigation to ongoing</dfn> given an <code class="idl"><a data-link-type="idl" href="#apphistory" id="ref-for-apphistory①⑤">AppHistory</a></code> <var>appHistory</var>: 
    <ol>
     <li data-md>
      <p class="assertion">Assert: <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-ongoing-non-traverse-navigation" id="ref-for-apphistory-ongoing-non-traverse-navigation①">ongoing non-traverse navigation</a> is null.</p>
     <li data-md>
      <p>Set <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-ongoing-non-traverse-navigation" id="ref-for-apphistory-ongoing-non-traverse-navigation②">ongoing non-traverse navigation</a> to <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-upcoming-non-traverse-navigation" id="ref-for-apphistory-upcoming-non-traverse-navigation②">upcoming non-traverse navigation</a>.</p>
     <li data-md>
      <p>Set <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-upcoming-non-traverse-navigation" id="ref-for-apphistory-upcoming-non-traverse-navigation③">upcoming non-traverse navigation</a> to null.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="set an ongoing traverse navigation" data-algorithm-for="AppHistory">
     To <dfn class="dfn-paneled" data-dfn-for="AppHistory" data-dfn-type="dfn" data-noexport id="apphistory-set-an-ongoing-traverse-navigation">set an ongoing traverse navigation</dfn> given an <code class="idl"><a data-link-type="idl" href="#apphistory" id="ref-for-apphistory①⑥">AppHistory</a></code> <var>appHistory</var>, a string <var>key</var>, and a JavaScript value <var>info</var>: 
    <ol>
     <li data-md>
      <p>Let <var>promise</var> be <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-new-promise" id="ref-for-a-new-promise①">a new promise</a> created in <var>appHistory</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm②">relevant Realm</a>.</p>
     <li data-md>
      <p>Let <var>cleanupStep</var> be an algorithm step which <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-remove" id="ref-for-map-remove">removes</a> <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-ongoing-traverse-navigations" id="ref-for-apphistory-ongoing-traverse-navigations">ongoing traverse navigations</a>[<var>key</var>].</p>
     <li data-md>
      <p>Let <var>ongoingNavigation</var> be an <a data-link-type="dfn" href="#app-history-api-navigation" id="ref-for-app-history-api-navigation⑤">app history API navigation</a> whose <a data-link-type="dfn" href="#app-history-api-navigation-info" id="ref-for-app-history-api-navigation-info①">info</a> is <var>info</var>, <a data-link-type="dfn" href="#app-history-api-navigation-returned-promise" id="ref-for-app-history-api-navigation-returned-promise①">returned promise</a> is <var>promise</var>, and <a data-link-type="dfn" href="#app-history-api-navigation-cleanup-step" id="ref-for-app-history-api-navigation-cleanup-step①">cleanup step</a> is <var>cleanupStep</var>.</p>
     <li data-md>
      <p>Set <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-ongoing-traverse-navigations" id="ref-for-apphistory-ongoing-traverse-navigations①">ongoing traverse navigations</a>[<var>key</var>]  to <var>ongoingNavigation</var>.</p>
     <li data-md>
      <p>Return <var>ongoingNavigation</var>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="1.3" id="global-navigate"><span class="secno">1.3. </span><span class="content">Navigating</span><a class="self-link" href="#global-navigate"></a></h3>
   <dl class="domintro non-normative">
    <dt><code>await <code class="idl"><a data-link-type="idl" href="#dom-window-apphistory" id="ref-for-dom-window-apphistory⑤">appHistory</a></code>.<code class="idl"><a data-link-type="idl" href="#dom-apphistory-navigate" id="ref-for-dom-apphistory-navigate②">navigate</a></code>(<var>url</var>)</code> 
    <dt><code>await <code class="idl"><a data-link-type="idl" href="#dom-window-apphistory" id="ref-for-dom-window-apphistory⑥">appHistory</a></code>.<code class="idl"><a data-link-type="idl" href="#dom-apphistory-navigate" id="ref-for-dom-apphistory-navigate③">navigate</a></code>(<var>url</var>, <var>options</var>)</code> 
    <dd>
     <p>Navigates the current page to the given <var>url</var>. <var>options</var> can contain the following values: </p>
     <ul>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateoptions-replace" id="ref-for-dom-apphistorynavigateoptions-replace">replace</a></code> can be set to true to replace the current session history entry, instead of pushing a new one.</p>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationoptions-navigateinfo" id="ref-for-dom-apphistorynavigationoptions-navigateinfo①">navigateInfo</a></code> can be set to any value; it will populate the <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-info" id="ref-for-dom-apphistorynavigateevent-info">info</a></code> property of the corresponding <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigate" id="ref-for-eventdef-apphistory-navigate②">navigate</a></code> event.</p>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateoptions-state" id="ref-for-dom-apphistorynavigateoptions-state①">state</a></code> can be set to any <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/structured-data.html#serializable-objects" id="ref-for-serializable-objects">serializable</a> value; it will populate the state retrieved by <code class="idl"><a data-link-type="idl" href="#dom-apphistoryentry-getstate" id="ref-for-dom-apphistoryentry-getstate">appHistory.current.getState()</a></code> once the navigation completes, for same-document navigations. (It will be ignored for navigations that end up cross-document.)</p>
     </ul>
     <p>By default this will perform a full navigation (i.e., a cross-document navigation, unless the given URL differs only in a fragment from the current one). The <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigate" id="ref-for-eventdef-apphistory-navigate③">navigate</a></code> event’s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-respondwith" id="ref-for-dom-apphistorynavigateevent-respondwith④">respondWith()</a></code> method can be used to convert it into a same-document navigation. </p>
     <p>The returned promise will behave as follows: </p>
     <ul>
      <li data-md>
       <p>For same-document navigations created by using the <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigate" id="ref-for-eventdef-apphistory-navigate④">navigate</a></code> event’s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-respondwith" id="ref-for-dom-apphistorynavigateevent-respondwith⑤">respondWith()</a></code> method, it will fulfill or reject according to the promises passed to <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-respondwith" id="ref-for-dom-apphistorynavigateevent-respondwith⑥">respondWith()</a></code>.</p>
      <li data-md>
       <p>For other same-document navigations (e.g., non-intercepted <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate-fragid" id="ref-for-navigate-fragid">fragment navigations</a>), it will fulfill immediately.</p>
      <li data-md>
       <p>For cross-document navigations, it will never settle.</p>
     </ul>
    <dt><code>await <code class="idl"><a data-link-type="idl" href="#dom-window-apphistory" id="ref-for-dom-window-apphistory⑦">appHistory</a></code>.<code class="idl"><a data-link-type="idl" href="#dom-apphistory-reload" id="ref-for-dom-apphistory-reload①">reload</a></code>(<var>options</var>)</code> 
    <dd>
     <p>Reloads the current page. <var>options</var> needs to contain at least one of <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationoptions-navigateinfo" id="ref-for-dom-apphistorynavigationoptions-navigateinfo②">navigateInfo</a></code> or <code class="idl"><a data-link-type="idl" href="#dom-apphistoryreloadoptions-state" id="ref-for-dom-apphistoryreloadoptions-state">state</a></code>, which behave as described above. </p>
     <p>The default behavior of performing a from-network-or-cache reload of the current page can be overriden by using the <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigate" id="ref-for-eventdef-apphistory-navigate⑤">navigate</a></code> event’s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-respondwith" id="ref-for-dom-apphistorynavigateevent-respondwith⑦">respondWith()</a></code> method. Doing so will mean this call only updates state or passes along the appropriate <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationoptions-navigateinfo" id="ref-for-dom-apphistorynavigationoptions-navigateinfo③">navigateInfo</a></code>, plus performing whatever actions the <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigate" id="ref-for-eventdef-apphistory-navigate⑥">navigate</a></code> event handler sees fit to carry out. </p>
     <p>The returned promise will behave as follows: </p>
     <ul>
      <li data-md>
       <p>If the reload is intercepted by using the <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigate" id="ref-for-eventdef-apphistory-navigate⑦">navigate</a></code> event’s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-respondwith" id="ref-for-dom-apphistorynavigateevent-respondwith⑧">respondWith()</a></code> method, it will fulfill or reject according to the promises passed to <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-respondwith" id="ref-for-dom-apphistorynavigateevent-respondwith⑨">respondWith()</a></code>.</p>
      <li data-md>
       <p>Otherwise, it will never settle.</p>
     </ul>
   </dl>
   <div class="algorithm" data-algorithm="navigate(url, options)" data-algorithm-for="AppHistory">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistory" data-dfn-type="method" data-export data-lt="navigate(url, options)|navigate(url)" id="dom-apphistory-navigate"><code>navigate(<var>url</var>, <var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/urls-and-fetching.html#parse-a-url" id="ref-for-parse-a-url">Parse</a> <var>url</var> relative to <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this①④">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object">relevant settings object</a>. If that returns failure, then return <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with">a promise rejected with</a> a "<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#syntaxerror" id="ref-for-syntaxerror">SyntaxError</a></code>" <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException">DOMException</a></code>. Otherwise, let <var>urlRecord</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/urls-and-fetching.html#resulting-url-record" id="ref-for-resulting-url-record">resulting URL record</a>.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this①⑤">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global⑤">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#concept-document-window" id="ref-for-concept-document-window④">associated Document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active④">fully active</a>, then return <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with①">a promise rejected with</a> an "<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidstateerror" id="ref-for-invalidstateerror">InvalidStateError</a></code>" <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException①">DOMException</a></code>.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this①⑥">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global⑥">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#concept-document-window" id="ref-for-concept-document-window⑤">associated Document</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#unload-counter" id="ref-for-unload-counter">unload counter</a> is greater than 0, then return <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with②">a promise rejected with</a> an "<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidstateerror" id="ref-for-invalidstateerror①">InvalidStateError</a></code>" <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException②">DOMException</a></code>.</p>
     <li data-md>
      <p>Let <var>serializedState</var> be null.</p>
     <li data-md>
      <p>If <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateoptions-state" id="ref-for-dom-apphistorynavigateoptions-state②">state</a></code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists">exists</a>, then set <var>serializedState</var> to <a data-link-type="abstract-op" href="https://html.spec.whatwg.org/multipage/structured-data.html#structuredserializeforstorage" id="ref-for-structuredserializeforstorage">StructuredSerializeForStorage</a>(<var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateoptions-state" id="ref-for-dom-apphistorynavigateoptions-state③">state</a></code>"]). If this throws an exception, return <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with③">a promise rejected with</a> that exception.</p>
     <li data-md>
      <p>Let <var>navigateInfo</var> be <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationoptions-navigateinfo" id="ref-for-dom-apphistorynavigationoptions-navigateinfo④">navigateInfo</a></code>"] if it exists; otherwise, undefined.</p>
     <li data-md>
      <p>Let <var>historyHandling</var> be "<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#hh-replace" id="ref-for-hh-replace"><code>replace</code></a>" if <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateoptions-replace" id="ref-for-dom-apphistorynavigateoptions-replace①">replace</a></code>"] is true; otherwise, "<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#hh-default" id="ref-for-hh-default"><code>default</code></a>".</p>
     <li data-md>
      <p>Return the result of <a data-link-type="dfn" href="#perform-a-non-traverse-app-history-navigation" id="ref-for-perform-a-non-traverse-app-history-navigation">performing a non-traverse app history navigation</a> given <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this①⑦">this</a>, <var>urlRecord</var>, <var>serializedState</var>, <var>navigateInfo</var>, and <var>historyHandling</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="reload(options)" data-algorithm-for="AppHistory">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistory" data-dfn-type="method" data-export data-lt="reload(options)|reload()" id="dom-apphistory-reload"><code>reload(<var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this①⑧">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global⑦">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#concept-document-window" id="ref-for-concept-document-window⑥">associated Document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active⑤">fully active</a>, then return <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with④">a promise rejected with</a> an "<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidstateerror" id="ref-for-invalidstateerror②">InvalidStateError</a></code>" <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException③">DOMException</a></code>.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this①⑨">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global⑧">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#concept-document-window" id="ref-for-concept-document-window⑦">associated Document</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#unload-counter" id="ref-for-unload-counter①">unload counter</a> is greater than 0, then return <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑤">a promise rejected with</a> an "<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidstateerror" id="ref-for-invalidstateerror③">InvalidStateError</a></code>" <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException④">DOMException</a></code>.</p>
     <li data-md>
      <p>Let <var>urlRecord</var> be <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this②⓪">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global⑨">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#active-document" id="ref-for-active-document">active document</a>'s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-url" id="ref-for-concept-document-url">URL</a>.</p>
     <li data-md>
      <p>Let <var>serializedState</var> be null.</p>
     <li data-md>
      <p>If <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-apphistoryreloadoptions-state" id="ref-for-dom-apphistoryreloadoptions-state①">state</a></code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①">exists</a>, then set <var>serializedState</var> to <a data-link-type="abstract-op" href="https://html.spec.whatwg.org/multipage/structured-data.html#structuredserializeforstorage" id="ref-for-structuredserializeforstorage①">StructuredSerializeForStorage</a>(<var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-apphistoryreloadoptions-state" id="ref-for-dom-apphistoryreloadoptions-state②">state</a></code>"]). If this throws an exception, return <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑥">a promise rejected with</a> that exception.</p>
     <li data-md>
      <p>Otherwise, if <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this②①">this</a>'s <a data-link-type="dfn" href="#apphistory-current-index" id="ref-for-apphistory-current-index⑦">current index</a> is not −1, then set <var>serializedState</var> to <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this②②">this</a>'s <a data-link-type="dfn" href="#apphistory-entry-list" id="ref-for-apphistory-entry-list⑧">entry list</a>[<a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this②③">this</a>'s <a data-link-type="dfn" href="#apphistory-current-index" id="ref-for-apphistory-current-index⑧">current index</a>]'s <a data-link-type="dfn" href="#session-history-entry-app-history-state" id="ref-for-session-history-entry-app-history-state">app history state</a>.</p>
     <li data-md>
      <p>Let <var>navigateInfo</var> be <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationoptions-navigateinfo" id="ref-for-dom-apphistorynavigationoptions-navigateinfo⑤">navigateInfo</a></code>"] if it exists; otherwise, undefined.</p>
     <li data-md>
      <p>Return the result of <a data-link-type="dfn" href="#perform-a-non-traverse-app-history-navigation" id="ref-for-perform-a-non-traverse-app-history-navigation①">performing a non-traverse app history navigation</a> given <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this②④">this</a>, <var>urlRecord</var>, <var>serializedState</var>, <var>navigateInfo</var>, and "<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#hh-reload" id="ref-for-hh-reload"><code>reload</code></a>".</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="perform a non-traverse app history navigation">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="perform-a-non-traverse-app-history-navigation">perform a non-traverse app history navigation</dfn> given an <code class="idl"><a data-link-type="idl" href="#apphistory" id="ref-for-apphistory①⑦">AppHistory</a></code> object <var>appHistory</var>, a <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url">URL</a> <var>url</var>, a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#serialized-state" id="ref-for-serialized-state①">serialized state</a>-or-null <var>serializedState</var>, a JavaScript value <var>navigateInfo</var>, and a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#history-handling-behavior" id="ref-for-history-handling-behavior">history handling behavior</a> <var>historyHandling</var>: 
    <ol>
     <li data-md>
      <p>Let <var>browsingContext</var> be <var>appHistory</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①⓪">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#window-bc" id="ref-for-window-bc①">browsing context</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert①">Assert</a>: <var>browsingContext</var> is not null.</p>
     <li data-md>
      <p class="assertion">Assert: <var>historyHandling</var> is either "<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#hh-replace" id="ref-for-hh-replace①"><code>replace</code></a>", "<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#hh-reload" id="ref-for-hh-reload①"><code>reload</code></a>", or "<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#hh-default" id="ref-for-hh-default①"><code>default</code></a>".</p>
     <li data-md>
      <p>Let <var>ongoingNavigation</var> be the result of <a data-link-type="dfn" href="#apphistory-set-the-upcoming-non-traverse-navigation" id="ref-for-apphistory-set-the-upcoming-non-traverse-navigation">setting the upcoming non-traverse navigation</a> for <var>appHistory</var> given <var>navigateInfo</var>.</p>
     <li data-md>
      <p>Set <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-to-be-set-serialized-state" id="ref-for-apphistory-to-be-set-serialized-state">to-be-set serialized state</a> to <var>serializedState</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate">Navigate</a> <var>browsingContext</var> to <var>url</var> with <i><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigation-hh" id="ref-for-navigation-hh">historyHandling</a></i> set to <var>historyHandling</var>, <i><a data-link-type="dfn" href="#navigate-apphistorystate" id="ref-for-navigate-apphistorystate">appHistoryState</a></i> set to <var>serializedState</var>, and the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#source-browsing-context" id="ref-for-source-browsing-context">source browsing context</a> set to <var>browsingContext</var>.</p>
     <li data-md>
      <p>If <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-upcoming-non-traverse-navigation" id="ref-for-apphistory-upcoming-non-traverse-navigation④">upcoming non-traverse navigation</a> is <var>ongoingNavigation</var>, then:</p>
      <p class="note" role="note">This means the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate①">navigate</a> algorithm bailed out before ever getting to the <a data-link-type="dfn" href="#inner-navigate-event-firing-algorithm" id="ref-for-inner-navigate-event-firing-algorithm">inner navigate event firing algorithm</a> which would <a data-link-type="dfn" href="#apphistory-promote-the-upcoming-non-traverse-navigation-to-ongoing" id="ref-for-apphistory-promote-the-upcoming-non-traverse-navigation-to-ongoing">promote the upcoming non-traverse navigation to ongoing</a>. </p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#reject" id="ref-for-reject②">Reject</a> <var>ongoingNavigation</var>’s <a data-link-type="dfn" href="#app-history-api-navigation-returned-promise" id="ref-for-app-history-api-navigation-returned-promise②">returned promise</a> with a <a data-link-type="dfn" href="https://heycam.github.io/webidl/#new" id="ref-for-new①">new</a> "<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#aborterror" id="ref-for-aborterror">AbortError</a></code>" <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException⑤">DOMException</a></code>, created in <var>appHistory</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm③">relevant Realm</a>.</p>
       <li data-md>
        <p>Perform <var>ongoingNavigation</var>’s <a data-link-type="dfn" href="#app-history-api-navigation-cleanup-step" id="ref-for-app-history-api-navigation-cleanup-step②">cleanup step</a>.</p>
      </ol>
      <p class="note" role="note">We don’t <a data-link-type="dfn" href="#finalize-with-an-aborted-navigation-error" id="ref-for-finalize-with-an-aborted-navigation-error">finalize with an aborted navigation error</a> since that algorithm only makes sense after the <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigate" id="ref-for-eventdef-apphistory-navigate⑧">navigate</a></code> event has fired. </p>
     <li data-md>
      <p>If <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-to-be-set-serialized-state" id="ref-for-apphistory-to-be-set-serialized-state①">to-be-set serialized state</a> is non-null, then set <var>browsingContext</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#session-history" id="ref-for-session-history①">session history</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#current-entry" id="ref-for-current-entry①">current entry</a>'s <a data-link-type="dfn" href="#session-history-entry-app-history-state" id="ref-for-session-history-entry-app-history-state①">app history state</a> to <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-to-be-set-serialized-state" id="ref-for-apphistory-to-be-set-serialized-state②">to-be-set serialized state</a>.</p>
     <li data-md>
      <p>Set <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-to-be-set-serialized-state" id="ref-for-apphistory-to-be-set-serialized-state③">to-be-set serialized state</a> to null.</p>
     <li data-md>
      <p>Return <var>ongoingNavigation</var>’s <a data-link-type="dfn" href="#app-history-api-navigation-returned-promise" id="ref-for-app-history-api-navigation-returned-promise③">returned promise</a>.</p>
    </ol>
   </div>
   <p class="note" role="note">Unlike <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/history.html#dom-location-assign" id="ref-for-dom-location-assign">location.assign()</a></code> and friends, which are exposed across <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#same-origin-domain" id="ref-for-same-origin-domain">origin-domain</a> boundaries, <code class="idl"><a data-link-type="idl" href="#dom-apphistory-navigate" id="ref-for-dom-apphistory-navigate④">appHistory.navigate()</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-apphistory-reload" id="ref-for-dom-apphistory-reload②">appHistory.reload()</a></code> can only be accessed by code with direct synchronous access to the <code class="idl"><a data-link-type="idl" href="#dom-window-apphistory" id="ref-for-dom-window-apphistory⑧">appHistory</a></code> property. Thus, we avoid the complications around tracking <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#source-browsing-context" id="ref-for-source-browsing-context①">source browsing contexts</a>, and we don’t need to deal with the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#allowed-to-navigate" id="ref-for-allowed-to-navigate">allowed to navigate</a> check and its accompanying <i><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#exceptions-enabled" id="ref-for-exceptions-enabled">exceptionsEnabled</a></i> flag. We just treat all navigations as being initiated by the <code class="idl"><a data-link-type="idl" href="#apphistory" id="ref-for-apphistory①⑧">AppHistory</a></code> object itself. </p>
   <h3 class="heading settled" data-level="1.4" id="global-traversing"><span class="secno">1.4. </span><span class="content">Traversing</span><a class="self-link" href="#global-traversing"></a></h3>
   <dl class="domintro non-normative">
    <dt><code>await <code class="idl"><a data-link-type="idl" href="#dom-window-apphistory" id="ref-for-dom-window-apphistory⑨">appHistory</a></code>.<code class="idl"><a data-link-type="idl" href="#dom-apphistory-goto" id="ref-for-dom-apphistory-goto①">goTo</a></code>(<var>key</var>)</code> 
    <dt><code>await <code class="idl"><a data-link-type="idl" href="#dom-window-apphistory" id="ref-for-dom-window-apphistory①⓪">appHistory</a></code>.<code class="idl"><a data-link-type="idl" href="#dom-apphistory-goto" id="ref-for-dom-apphistory-goto②">goTo</a></code>(<var>key</var>, { <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationoptions-navigateinfo" id="ref-for-dom-apphistorynavigationoptions-navigateinfo⑥">navigateInfo</a></code> })</code> 
    <dd>
     <p>Traverses the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#joint-session-history" id="ref-for-joint-session-history">joint session history</a> to the closest joint session history entry that matches the <code class="idl"><a data-link-type="idl" href="#apphistoryentry" id="ref-for-apphistoryentry⑨">AppHistoryEntry</a></code> with the given key. <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationoptions-navigateinfo" id="ref-for-dom-apphistorynavigationoptions-navigateinfo⑦">navigateInfo</a></code> can be set to any value; it will populate the <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-info" id="ref-for-dom-apphistorynavigateevent-info①">info</a></code> property of the corresponding <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigate" id="ref-for-eventdef-apphistory-navigate⑨">navigate</a></code> event. </p>
     <p>If a traversal to that <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#joint-session-history" id="ref-for-joint-session-history①">joint session history</a> is already in progress, then this will return a promise for that original traversal, and <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationoptions-navigateinfo" id="ref-for-dom-apphistorynavigationoptions-navigateinfo⑧">navigateInfo</a></code> will be ignored. </p>
     <p>The returned promise will behave as follows: </p>
     <ul>
      <li data-md>
       <p>If there is no <code class="idl"><a data-link-type="idl" href="#apphistoryentry" id="ref-for-apphistoryentry①⓪">AppHistoryEntry</a></code> in <code class="idl"><a data-link-type="idl" href="#dom-apphistory-entries" id="ref-for-dom-apphistory-entries②">appHistory.entries</a></code> with the given key, it will reject with an "<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidstateerror" id="ref-for-invalidstateerror④">InvalidStateError</a></code>" <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException⑥">DOMException</a></code>.</p>
      <li data-md>
       <p>For same-document traversals intercepted by the <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigate" id="ref-for-eventdef-apphistory-navigate①⓪">navigate</a></code> event’s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-respondwith" id="ref-for-dom-apphistorynavigateevent-respondwith①⓪">respondWith()</a></code> method, it will fulfill or reject according to the promises passed to <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-respondwith" id="ref-for-dom-apphistorynavigateevent-respondwith①①">respondWith()</a></code>.</p>
      <li data-md>
       <p>For non-intercepted same-document traversals, it will fulfill after the traversal completes.</p>
      <li data-md>
       <p>For cross-document traversals, it will never settle.</p>
     </ul>
    <dt><code>await <code class="idl"><a data-link-type="idl" href="#dom-window-apphistory" id="ref-for-dom-window-apphistory①①">appHistory</a></code>.<code class="idl"><a data-link-type="idl" href="#dom-apphistory-back" id="ref-for-dom-apphistory-back①">back</a></code>()</code> 
    <dt><code>await <code class="idl"><a data-link-type="idl" href="#dom-window-apphistory" id="ref-for-dom-window-apphistory①②">appHistory</a></code>.<code class="idl"><a data-link-type="idl" href="#dom-apphistory-back" id="ref-for-dom-apphistory-back②">back</a></code>({ <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationoptions-navigateinfo" id="ref-for-dom-apphistorynavigationoptions-navigateinfo⑨">navigateInfo</a></code> })</code> 
    <dd>
     <p>Traverse the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#joint-session-history" id="ref-for-joint-session-history②">joint session history</a> to the closest previous joint session history entry which results in this frame navigating, i.e. results in <code class="idl"><a data-link-type="idl" href="#dom-apphistory-current" id="ref-for-dom-apphistory-current②">appHistory.current</a></code> updating. <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationoptions-navigateinfo" id="ref-for-dom-apphistorynavigationoptions-navigateinfo①⓪">navigateInfo</a></code> can be set to any value; it will populate the <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-info" id="ref-for-dom-apphistorynavigateevent-info②">info</a></code> property of the corresponding <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigate" id="ref-for-eventdef-apphistory-navigate①①">navigate</a></code> event. </p>
     <p>If a traversal to that <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#joint-session-history" id="ref-for-joint-session-history③">joint session history</a> is already in progress, then this will return a promise for that original traversal, and <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationoptions-navigateinfo" id="ref-for-dom-apphistorynavigationoptions-navigateinfo①①">navigateInfo</a></code> will be ignored. </p>
     <p>The returned promise will behave as follows: </p>
     <ul>
      <li data-md>
       <p>If <code class="idl"><a data-link-type="idl" href="#dom-apphistory-cangoback" id="ref-for-dom-apphistory-cangoback②">appHistory.canGoBack</a></code> is false, it will reject with an "<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidstateerror" id="ref-for-invalidstateerror⑤">InvalidStateError</a></code>" <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException⑦">DOMException</a></code>.</p>
      <li data-md>
       <p>For same-document traversals intercepted by the <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigate" id="ref-for-eventdef-apphistory-navigate①②">navigate</a></code> event’s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-respondwith" id="ref-for-dom-apphistorynavigateevent-respondwith①②">respondWith()</a></code> method, it will fulfill or reject according to the promises passed to <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-respondwith" id="ref-for-dom-apphistorynavigateevent-respondwith①③">respondWith()</a></code>.</p>
      <li data-md>
       <p>For non-intercepted same-document traversals, it will fulfill after the traversal completes.</p>
      <li data-md>
       <p>For cross-document traversals, it will never settle.</p>
     </ul>
    <dt><code>await <code class="idl"><a data-link-type="idl" href="#dom-window-apphistory" id="ref-for-dom-window-apphistory①③">appHistory</a></code>.<code class="idl"><a data-link-type="idl" href="#dom-apphistory-forward" id="ref-for-dom-apphistory-forward①">forward</a></code>()</code> 
    <dt><code>await <code class="idl"><a data-link-type="idl" href="#dom-window-apphistory" id="ref-for-dom-window-apphistory①④">appHistory</a></code>.<code class="idl"><a data-link-type="idl" href="#dom-apphistory-forward" id="ref-for-dom-apphistory-forward②">forward</a></code>({ <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationoptions-navigateinfo" id="ref-for-dom-apphistorynavigationoptions-navigateinfo①②">navigateInfo</a></code> })</code> 
    <dd>
     <p>Traverse the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#joint-session-history" id="ref-for-joint-session-history④">joint session history</a> to the closest forward joint session history entry which results in this frame navigating, i.e. results in <code class="idl"><a data-link-type="idl" href="#dom-apphistory-current" id="ref-for-dom-apphistory-current③">appHistory.current</a></code> updating. <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationoptions-navigateinfo" id="ref-for-dom-apphistorynavigationoptions-navigateinfo①③">navigateInfo</a></code> can be set to any value; it will populate the <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-info" id="ref-for-dom-apphistorynavigateevent-info③">info</a></code> property of the corresponding <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigate" id="ref-for-eventdef-apphistory-navigate①③">navigate</a></code> event. </p>
     <p>If a traversal to that <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#joint-session-history" id="ref-for-joint-session-history⑤">joint session history</a> is already in progress, then this will return a promise for that original traversal, and <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationoptions-navigateinfo" id="ref-for-dom-apphistorynavigationoptions-navigateinfo①④">navigateInfo</a></code> will be ignored. </p>
     <p>The returned promise will behave as follows: </p>
     <ul>
      <li data-md>
       <p>If <code class="idl"><a data-link-type="idl" href="#dom-apphistory-cangoback" id="ref-for-dom-apphistory-cangoback③">appHistory.canGoForward</a></code> is false, it will reject with an "<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidstateerror" id="ref-for-invalidstateerror⑥">InvalidStateError</a></code>" <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException⑧">DOMException</a></code>.</p>
      <li data-md>
       <p>For same-document traversals intercepted by the <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigate" id="ref-for-eventdef-apphistory-navigate①④">navigate</a></code> event’s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-respondwith" id="ref-for-dom-apphistorynavigateevent-respondwith①④">respondWith()</a></code> method, it will fulfill or reject according to the promises passed to <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-respondwith" id="ref-for-dom-apphistorynavigateevent-respondwith①⑤">respondWith()</a></code>.</p>
      <li data-md>
       <p>For non-intercepted same-document traversals, it will fulfill after the traversal completes.</p>
      <li data-md>
       <p>For cross-document traversals, it will never settle.</p>
     </ul>
   </dl>
   <div class="algorithm" data-algorithm="goTo(key, options)" data-algorithm-for="AppHistory">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistory" data-dfn-type="method" data-export data-lt="goTo(key, options)|goTo(key)" id="dom-apphistory-goto"><code>goTo(<var>key</var>, <var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this②⑤">this</a>'s <a data-link-type="dfn" href="#apphistory-current-index" id="ref-for-apphistory-current-index⑨">current index</a> is −1, then return <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑦">a promise rejected with</a> an "<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidstateerror" id="ref-for-invalidstateerror⑦">InvalidStateError</a></code>" <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException⑨">DOMException</a></code>.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this②⑥">this</a>'s <a data-link-type="dfn" href="#apphistory-entry-list" id="ref-for-apphistory-entry-list⑨">entry list</a> does not contain any <code class="idl"><a data-link-type="idl" href="#apphistoryentry" id="ref-for-apphistoryentry①①">AppHistoryEntry</a></code> whose <a data-link-type="dfn" href="#apphistoryentry-session-history-entry" id="ref-for-apphistoryentry-session-history-entry③">session history entry</a>'s <a data-link-type="dfn" href="#session-history-entry-app-history-key" id="ref-for-session-history-entry-app-history-key">app history key</a> equals <var>key</var>, then return <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑧">a promise rejected with</a> an "<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidstateerror" id="ref-for-invalidstateerror⑧">InvalidStateError</a></code>" <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException①⓪">DOMException</a></code>.</p>
     <li data-md>
      <p>Return the result of <a data-link-type="dfn" href="#perform-an-app-history-traversal" id="ref-for-perform-an-app-history-traversal">performing an app history traversal</a> given <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this②⑦">this</a>, <var>key</var>, and <var>options</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="back(options)" data-algorithm-for="AppHistory">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistory" data-dfn-type="method" data-export data-lt="back(options)|back()" id="dom-apphistory-back"><code>back(<var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this②⑧">this</a>'s <a data-link-type="dfn" href="#apphistory-current-index" id="ref-for-apphistory-current-index①⓪">current index</a> is −1 or 0, then return <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑨">a promise rejected with</a> an "<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidstateerror" id="ref-for-invalidstateerror⑨">InvalidStateError</a></code>" <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException①①">DOMException</a></code>.</p>
     <li data-md>
      <p>Let <var>key</var> be <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this②⑨">this</a>'s <a data-link-type="dfn" href="#apphistory-entry-list" id="ref-for-apphistory-entry-list①⓪">entry list</a>[<a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this③⓪">this</a>'s <a data-link-type="dfn" href="#apphistory-current-index" id="ref-for-apphistory-current-index①①">current index</a> − 1]'s <a data-link-type="dfn" href="#apphistoryentry-session-history-entry" id="ref-for-apphistoryentry-session-history-entry④">session history entry</a>'s <a data-link-type="dfn" href="#session-history-entry-app-history-key" id="ref-for-session-history-entry-app-history-key①">app history key</a>.</p>
     <li data-md>
      <p>Return the result of <a data-link-type="dfn" href="#perform-an-app-history-traversal" id="ref-for-perform-an-app-history-traversal①">performing an app history traversal</a> given <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this③①">this</a>, <var>key</var>, and <var>options</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="forward(options)" data-algorithm-for="AppHistory">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistory" data-dfn-type="method" data-export data-lt="forward(options)|forward()" id="dom-apphistory-forward"><code>forward(<var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this③②">this</a>'s <a data-link-type="dfn" href="#apphistory-current-index" id="ref-for-apphistory-current-index①②">current index</a> is −1 or is equal to <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this③③">this</a>'s <a data-link-type="dfn" href="#apphistory-entry-list" id="ref-for-apphistory-entry-list①①">entry list</a>'s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-size" id="ref-for-list-size②">size</a> − 1, then return <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with①⓪">a promise rejected with</a> an "<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidstateerror" id="ref-for-invalidstateerror①⓪">InvalidStateError</a></code>" <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException①②">DOMException</a></code>.</p>
     <li data-md>
      <p>Let <var>key</var> be <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this③④">this</a>'s <a data-link-type="dfn" href="#apphistory-entry-list" id="ref-for-apphistory-entry-list①②">entry list</a>[<a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this③⑤">this</a>'s <a data-link-type="dfn" href="#apphistory-current-index" id="ref-for-apphistory-current-index①③">current index</a> + 1]'s <a data-link-type="dfn" href="#apphistoryentry-session-history-entry" id="ref-for-apphistoryentry-session-history-entry⑤">session history entry</a>'s <a data-link-type="dfn" href="#session-history-entry-app-history-key" id="ref-for-session-history-entry-app-history-key②">app history key</a>.</p>
     <li data-md>
      <p>Return the result of <a data-link-type="dfn" href="#perform-an-app-history-traversal" id="ref-for-perform-an-app-history-traversal②">performing an app history traversal</a> given <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this③⑥">this</a>, <var>key</var>, and <var>options</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="perform an app history traversal">
    <p class="advisement">The following algorithm is specified in terms of the <a href="https://github.com/whatwg/html/pull/6315">session history rewrite pull request</a> against the HTML Standard, because the existing session history traversal infrastructure is broken enough that it’s hard to build on. It is expected to track that work as it continues.</p>
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="perform-an-app-history-traversal">perform an app history traversal</dfn> given an <code class="idl"><a data-link-type="idl" href="#apphistory" id="ref-for-apphistory①⑨">AppHistory</a></code> object <var>appHistory</var>, a string <var>key</var>, and an <code class="idl"><a data-link-type="idl" href="#dictdef-apphistorynavigationoptions" id="ref-for-dictdef-apphistorynavigationoptions⑤">AppHistoryNavigationOptions</a></code> <var>options</var>:</p>
    <ol>
     <li data-md>
      <p>If <var>appHistory</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①①">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#concept-document-window" id="ref-for-concept-document-window⑧">associated Document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active⑥">fully active</a>, then return <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with①①">a promise rejected with</a> an "<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidstateerror" id="ref-for-invalidstateerror①①">InvalidStateError</a></code>" <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException①③">DOMException</a></code>.</p>
     <li data-md>
      <p>If <var>appHistory</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①②">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#concept-document-window" id="ref-for-concept-document-window⑨">associated Document</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#unload-counter" id="ref-for-unload-counter②">unload counter</a> is greater than 0, then return <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with①②">a promise rejected with</a> an "<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidstateerror" id="ref-for-invalidstateerror①②">InvalidStateError</a></code>" <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException①④">DOMException</a></code>.</p>
     <li data-md>
      <p>If <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-entry-list" id="ref-for-apphistory-entry-list①③">entry list</a>[<var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-current-index" id="ref-for-apphistory-current-index①④">current index</a>]'s <a data-link-type="dfn" href="#apphistoryentry-session-history-entry" id="ref-for-apphistoryentry-session-history-entry⑥">session history entry</a>'s <a data-link-type="dfn" href="#session-history-entry-app-history-key" id="ref-for-session-history-entry-app-history-key③">app history key</a> equals <var>key</var>, then return <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-promise-resolved-with" id="ref-for-a-promise-resolved-with">a promise resolved with</a> undefined.</p>
     <li data-md>
      <p>Let <var>navigable</var> be <var>appHistory</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①③">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#window-bc" id="ref-for-window-bc②">browsing context</a>'s <a data-link-type="dfn" href="https://whatpr.org/html/6315/browsers.html#bc-navigable" id="ref-for-bc-navigable">containing navigable</a>.</p>
     <li data-md>
      <p>Let <var>traversable</var> be <var>navigable</var>’s <a data-link-type="dfn" href="https://whatpr.org/html/6315/history.html#nav-traversable" id="ref-for-nav-traversable">traversable navigable</a>.</p>
     <li data-md>
      <p>Let <var>initiatorBC</var> be <var>appHistory</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①④">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#window-bc" id="ref-for-window-bc③">browsing context</a>.</p>
     <li data-md>
      <p>Let <var>info</var> be <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationoptions-navigateinfo" id="ref-for-dom-apphistorynavigationoptions-navigateinfo①⑤">navigateInfo</a></code>"] if it <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists②">exists</a>, or undefined otherwise.</p>
     <li data-md>
      <p>If <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-ongoing-traverse-navigations" id="ref-for-apphistory-ongoing-traverse-navigations②">ongoing traverse navigations</a>[<var>key</var>] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists③">exists</a>, then return <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-ongoing-traverse-navigations" id="ref-for-apphistory-ongoing-traverse-navigations③">ongoing traverse navigations</a>[<var>key</var>]'s <a data-link-type="dfn" href="#app-history-api-navigation-returned-promise" id="ref-for-app-history-api-navigation-returned-promise④">returned promise</a>.</p>
     <li data-md>
      <p>Let <var>ongoingNavigation</var> be the result of <a data-link-type="dfn" href="#apphistory-set-an-ongoing-traverse-navigation" id="ref-for-apphistory-set-an-ongoing-traverse-navigation">setting an ongoing traverse navigation</a> for <var>appHistory</var> given <var>key</var> and <var>info</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#enqueue-the-following-steps" id="ref-for-enqueue-the-following-steps">Enqueue the following steps</a> on <var>traversable</var>’s <a data-link-type="dfn" href="https://whatpr.org/html/6315/history.html#tn-session-history-traversal-queue" id="ref-for-tn-session-history-traversal-queue①">session history traversal queue</a>:</p>
      <ol>
       <li data-md>
        <p>Let <var>navigableEntries</var> be the result of <a data-link-type="dfn" href="https://whatpr.org/html/6315/history.html#getting-session-history-entries" id="ref-for-getting-session-history-entries">getting the session history entries</a> given <var>navigable</var>.</p>
       <li data-md>
        <p>Let <var>targetEntry</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#session-history-entry" id="ref-for-session-history-entry①">session history entry</a> in <var>navigableEntries</var> whose <a data-link-type="dfn" href="#session-history-entry-app-history-key" id="ref-for-session-history-entry-app-history-key④">app history key</a> equals <var>key</var>. If no such entry exists, then:</p>
        <ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#reject" id="ref-for-reject③">Reject</a> <var>ongoingNavigation</var>’s <a data-link-type="dfn" href="#app-history-api-navigation-returned-promise" id="ref-for-app-history-api-navigation-returned-promise⑤">returned promise</a> with an "<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidstateerror" id="ref-for-invalidstateerror①③">InvalidStateError</a></code>" <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException①⑤">DOMException</a></code>.</p>
         <li data-md>
          <p>Perform <var>ongoingNavigation</var>’s <a data-link-type="dfn" href="#app-history-api-navigation-cleanup-step" id="ref-for-app-history-api-navigation-cleanup-step③">cleanup step</a>.</p>
         <li data-md>
          <p>Abort these steps.</p>
        </ol>
        <p class="note" role="note">This can occur if the <var>appHistory</var> object’s view of session history is outdated, which can happen for brief periods while all the relevant threads and processes are being synchronized in reaction to a history change (such as the user clearing their history). </p>
       <li data-md>
        <p>If <var>targetEntry</var> is <var>navigable</var>’s <a data-link-type="dfn" href="https://whatpr.org/html/6315/history.html#nav-active-history-entry" id="ref-for-nav-active-history-entry">active session history entry</a>, then abort these steps.</p>
        <p class="note" role="note">This can occur if a previously-queued-up traversal already took us to this session history entry. In that case that previous traversal will have dealt with <var>ongoingNavigation</var> already. </p>
       <li data-md>
        <p>Let <var>targetStep</var> be null.</p>
       <li data-md>
        <p>If <var>targetEntry</var>’s <a data-link-type="dfn" href="https://whatpr.org/html/6315/history.html#she-step" id="ref-for-she-step">step</a> is greater than <var>traversable</var>’s <a data-link-type="dfn" href="https://whatpr.org/html/6315/history.html#tn-current-session-history-step" id="ref-for-tn-current-session-history-step">current session history step</a>, then set <var>targetStep</var> to <var>targetEntry</var>’s <a data-link-type="dfn" href="https://whatpr.org/html/6315/history.html#she-step" id="ref-for-she-step①">step</a>.</p>
       <li data-md>
        <p>Otherwise:</p>
        <ol>
         <li data-md>
          <p>Let <var>afterTarget</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#session-history-entry" id="ref-for-session-history-entry②">session history entry</a> after <var>targetEntry</var> in <var>navigableEntries</var>.</p>
         <li data-md>
          <p>Let <var>allSteps</var> be the result of <a data-link-type="dfn" href="https://whatpr.org/html/6315/history.html#getting-all-history-steps" id="ref-for-getting-all-history-steps">getting all history steps</a> that are part of the target session TODO.</p>
         <li data-md>
          <p>Set <var>targetStep</var> to the greatest number in <var>allSteps</var> that is less than <var>afterTarget</var>’s <a data-link-type="dfn" href="https://whatpr.org/html/6315/history.html#she-step" id="ref-for-she-step②">step</a>.</p>
        </ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://whatpr.org/html/6315/history.html#apply-the-history-step" id="ref-for-apply-the-history-step">Apply the history step</a> <var>targetStep</var> to <var>traversable</var>, with true, <var>initiatorBC</var>, and "<code><a data-link-type="dfn" href="#user-navigation-involvement-none" id="ref-for-user-navigation-involvement-none">none</a></code>".</p>
        <ul>
         <li data-md>
          <p>If this aborts due to user-canceled unloading or due to the <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigate" id="ref-for-eventdef-apphistory-navigate①⑤">navigate</a></code> event being canceled, then <a data-link-type="dfn" href="#finalize-with-an-aborted-navigation-error" id="ref-for-finalize-with-an-aborted-navigation-error①">finalize with an aborted navigation error</a> given <var>appHistory</var> and <var>ongoingNavigation</var>.</p>
         <li data-md>
          <p>If this aborts due to the initiator allowed-to-navigate check, then <a data-link-type="dfn" href="#finalize-with-an-aborted-navigation-error" id="ref-for-finalize-with-an-aborted-navigation-error②">finalize with an aborted navigation error</a> given <var>appHistory</var>, <var>ongoingNavigation</var>, and a <a data-link-type="dfn" href="https://heycam.github.io/webidl/#new" id="ref-for-new②">new</a> "<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#securityerror" id="ref-for-securityerror">SecurityError</a></code>" <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException①⑥">DOMException</a></code> created in <var>appHistory</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm④">relevant Realm</a>.</p>
        </ul>
        <p class="advisement">Eventually <a data-link-type="dfn" href="https://whatpr.org/html/6315/history.html#apply-the-history-step" id="ref-for-apply-the-history-step①">apply the history step</a> will have well-specified hooks for communicating these conditions back to its caller.</p>
      </ol>
     <li data-md>
      <p>Return <var>ongoingNavigation</var>’s <a data-link-type="dfn" href="#app-history-api-navigation-returned-promise" id="ref-for-app-history-api-navigation-returned-promise⑥">returned promise</a>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="1.5" id="global-events"><span class="secno">1.5. </span><span class="content">Event handlers</span><a class="self-link" href="#global-events"></a></h3>
   <p>The following are the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers" id="ref-for-event-handlers">event handlers</a> (and their corresponding <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type" id="ref-for-event-handler-event-type">event handler event types</a>) that must be supported, as <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes" id="ref-for-event-handler-idl-attributes">event handler IDL attributes</a>, by objects implementing the <code class="idl"><a data-link-type="idl" href="#apphistory" id="ref-for-apphistory②⓪">AppHistory</a></code> interface:</p>
   <table>
    <thead>
     <tr>
      <th><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers" id="ref-for-event-handlers①">Event handler</a> 
      <th><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type" id="ref-for-event-handler-event-type①">Event handler event type</a> 
    <tbody>
     <tr>
      <td><dfn class="dfn-paneled idl-code" data-dfn-for="AppHistory" data-dfn-type="attribute" data-export id="dom-apphistory-onnavigate"><code>onnavigate</code></dfn> 
      <td><dfn class="dfn-paneled idl-code" data-dfn-for="AppHistory" data-dfn-type="event" data-export id="eventdef-apphistory-navigate"><code>navigate</code></dfn> 
     <tr>
      <td><dfn class="dfn-paneled idl-code" data-dfn-for="AppHistory" data-dfn-type="attribute" data-export id="dom-apphistory-onnavigatesuccess"><code>onnavigatesuccess</code></dfn> 
      <td><dfn class="dfn-paneled idl-code" data-dfn-for="AppHistory" data-dfn-type="event" data-export id="eventdef-apphistory-navigatesuccess"><code>navigatesuccess</code></dfn> 
     <tr>
      <td><dfn class="dfn-paneled idl-code" data-dfn-for="AppHistory" data-dfn-type="attribute" data-export id="dom-apphistory-onnavigateerror"><code>onnavigateerror</code></dfn> 
      <td><dfn class="dfn-paneled idl-code" data-dfn-for="AppHistory" data-dfn-type="event" data-export id="eventdef-apphistory-navigateerror"><code>navigateerror</code></dfn> 
   </table>
   <h2 class="heading settled" data-level="2" id="navigate-event"><span class="secno">2. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigate" id="ref-for-eventdef-apphistory-navigate①⑥">navigate</a></code> event</span><a class="self-link" href="#navigate-event"></a></h2>
   <h3 class="heading settled" data-level="2.1" id="navigate-event-class"><span class="secno">2.1. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#apphistorynavigateevent" id="ref-for-apphistorynavigateevent③">AppHistoryNavigateEvent</a></code> class</span><a class="self-link" href="#navigate-event-class"></a></h3>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed①"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="apphistorynavigateevent"><code><c- g>AppHistoryNavigateEvent</c-></code></dfn> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#event" id="ref-for-event"><c- n>Event</c-></a> {
  <dfn class="idl-code" data-dfn-for="AppHistoryNavigateEvent" data-dfn-type="constructor" data-export data-lt="AppHistoryNavigateEvent(type, eventInit)|constructor(type, eventInit)" id="dom-apphistorynavigateevent-apphistorynavigateevent"><code><c- g>constructor</c-></code><a class="self-link" href="#dom-apphistorynavigateevent-apphistorynavigateevent"></a></dfn>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString①"><c- b>DOMString</c-></a> <dfn class="idl-code" data-dfn-for="AppHistoryNavigateEvent/AppHistoryNavigateEvent(type, eventInit), AppHistoryNavigateEvent/constructor(type, eventInit)" data-dfn-type="argument" data-export id="dom-apphistorynavigateevent-apphistorynavigateevent-type-eventinit-type"><code><c- g>type</c-></code><a class="self-link" href="#dom-apphistorynavigateevent-apphistorynavigateevent-type-eventinit-type"></a></dfn>, <a data-link-type="idl-name" href="#dictdef-apphistorynavigateeventinit" id="ref-for-dictdef-apphistorynavigateeventinit"><c- n>AppHistoryNavigateEventInit</c-></a> <dfn class="idl-code" data-dfn-for="AppHistoryNavigateEvent/AppHistoryNavigateEvent(type, eventInit), AppHistoryNavigateEvent/constructor(type, eventInit)" data-dfn-type="argument" data-export id="dom-apphistorynavigateevent-apphistorynavigateevent-type-eventinit-eventinit"><code><c- g>eventInit</c-></code><a class="self-link" href="#dom-apphistorynavigateevent-apphistorynavigateevent-type-eventinit-eventinit"></a></dfn>);

  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#enumdef-apphistorynavigationtype" id="ref-for-enumdef-apphistorynavigationtype"><c- n>AppHistoryNavigationType</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="AppHistoryNavigationType" href="#dom-apphistorynavigateevent-navigationtype" id="ref-for-dom-apphistorynavigateevent-navigationtype"><c- g>navigationType</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#apphistorydestination" id="ref-for-apphistorydestination"><c- n>AppHistoryDestination</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="AppHistoryDestination" href="#dom-apphistorynavigateevent-destination" id="ref-for-dom-apphistorynavigateevent-destination"><c- g>destination</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean" id="ref-for-idl-boolean③"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-apphistorynavigateevent-canrespond" id="ref-for-dom-apphistorynavigateevent-canrespond"><c- g>canRespond</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean" id="ref-for-idl-boolean④"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-apphistorynavigateevent-userinitiated" id="ref-for-dom-apphistorynavigateevent-userinitiated"><c- g>userInitiated</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean" id="ref-for-idl-boolean⑤"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-apphistorynavigateevent-hashchange" id="ref-for-dom-apphistorynavigateevent-hashchange"><c- g>hashChange</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal②"><c- n>AbortSignal</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="AbortSignal" href="#dom-apphistorynavigateevent-signal" id="ref-for-dom-apphistorynavigateevent-signal③"><c- g>signal</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://xhr.spec.whatwg.org/#formdata" id="ref-for-formdata"><c- n>FormData</c-></a>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="FormData?" href="#dom-apphistorynavigateevent-formdata" id="ref-for-dom-apphistorynavigateevent-formdata"><c- g>formData</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-any" id="ref-for-idl-any③"><c- b>any</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="any" href="#dom-apphistorynavigateevent-info" id="ref-for-dom-apphistorynavigateevent-info④"><c- g>info</c-></a>;

  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined" id="ref-for-idl-undefined⑤"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-apphistorynavigateevent-respondwith" id="ref-for-dom-apphistorynavigateevent-respondwith①⑥"><c- g>respondWith</c-></a>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise⑨"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined" id="ref-for-idl-undefined⑥"><c- b>undefined</c-></a>> <dfn class="idl-code" data-dfn-for="AppHistoryNavigateEvent/respondWith(newNavigationAction)" data-dfn-type="argument" data-export id="dom-apphistorynavigateevent-respondwith-newnavigationaction-newnavigationaction"><code><c- g>newNavigationAction</c-></code><a class="self-link" href="#dom-apphistorynavigateevent-respondwith-newnavigationaction-newnavigationaction"></a></dfn>);
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-apphistorynavigateeventinit"><code><c- g>AppHistoryNavigateEventInit</c-></code></dfn> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#dictdef-eventinit" id="ref-for-dictdef-eventinit"><c- n>EventInit</c-></a> {
  <a data-link-type="idl-name" href="#enumdef-apphistorynavigationtype" id="ref-for-enumdef-apphistorynavigationtype①"><c- n>AppHistoryNavigationType</c-></a> <dfn class="idl-code" data-default="&quot;push&quot;" data-dfn-for="AppHistoryNavigateEventInit" data-dfn-type="dict-member" data-export data-type="AppHistoryNavigationType " id="dom-apphistorynavigateeventinit-navigationtype"><code><c- g>navigationType</c-></code><a class="self-link" href="#dom-apphistorynavigateeventinit-navigationtype"></a></dfn> = "push";
  <c- b>required</c-> <a data-link-type="idl-name" href="#apphistorydestination" id="ref-for-apphistorydestination①"><c- n>AppHistoryDestination</c-></a> <dfn class="idl-code" data-dfn-for="AppHistoryNavigateEventInit" data-dfn-type="dict-member" data-export data-type="AppHistoryDestination " id="dom-apphistorynavigateeventinit-destination"><code><c- g>destination</c-></code><a class="self-link" href="#dom-apphistorynavigateeventinit-destination"></a></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean" id="ref-for-idl-boolean⑥"><c- b>boolean</c-></a> <dfn class="idl-code" data-default="false" data-dfn-for="AppHistoryNavigateEventInit" data-dfn-type="dict-member" data-export data-type="boolean " id="dom-apphistorynavigateeventinit-canrespond"><code><c- g>canRespond</c-></code><a class="self-link" href="#dom-apphistorynavigateeventinit-canrespond"></a></dfn> = <c- b>false</c->;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean" id="ref-for-idl-boolean⑦"><c- b>boolean</c-></a> <dfn class="idl-code" data-default="false" data-dfn-for="AppHistoryNavigateEventInit" data-dfn-type="dict-member" data-export data-type="boolean " id="dom-apphistorynavigateeventinit-userinitiated"><code><c- g>userInitiated</c-></code><a class="self-link" href="#dom-apphistorynavigateeventinit-userinitiated"></a></dfn> = <c- b>false</c->;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean" id="ref-for-idl-boolean⑧"><c- b>boolean</c-></a> <dfn class="idl-code" data-default="false" data-dfn-for="AppHistoryNavigateEventInit" data-dfn-type="dict-member" data-export data-type="boolean " id="dom-apphistorynavigateeventinit-hashchange"><code><c- g>hashChange</c-></code><a class="self-link" href="#dom-apphistorynavigateeventinit-hashchange"></a></dfn> = <c- b>false</c->;
  <c- b>required</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal③"><c- n>AbortSignal</c-></a> <dfn class="idl-code" data-dfn-for="AppHistoryNavigateEventInit" data-dfn-type="dict-member" data-export data-type="AbortSignal " id="dom-apphistorynavigateeventinit-signal"><code><c- g>signal</c-></code><a class="self-link" href="#dom-apphistorynavigateeventinit-signal"></a></dfn>;
  <a data-link-type="idl-name" href="https://xhr.spec.whatwg.org/#formdata" id="ref-for-formdata①"><c- n>FormData</c-></a>? <dfn class="idl-code" data-default="null" data-dfn-for="AppHistoryNavigateEventInit" data-dfn-type="dict-member" data-export data-type="FormData? " id="dom-apphistorynavigateeventinit-formdata"><code><c- g>formData</c-></code><a class="self-link" href="#dom-apphistorynavigateeventinit-formdata"></a></dfn> = <c- b>null</c->;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-any" id="ref-for-idl-any④"><c- b>any</c-></a> <dfn class="idl-code" data-default="null" data-dfn-for="AppHistoryNavigateEventInit" data-dfn-type="dict-member" data-export data-type="any " id="dom-apphistorynavigateeventinit-info"><code><c- g>info</c-></code><a class="self-link" href="#dom-apphistorynavigateeventinit-info"></a></dfn> = <c- b>null</c->;
};

<c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-apphistorynavigationtype"><code><c- g>AppHistoryNavigationType</c-></code></dfn> {
  <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryNavigationType" data-dfn-type="enum-value" data-export id="dom-apphistorynavigationtype-reload"><code><c- s>"reload"</c-></code></dfn>,
  <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryNavigationType" data-dfn-type="enum-value" data-export id="dom-apphistorynavigationtype-push"><code><c- s>"push"</c-></code></dfn>,
  <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryNavigationType" data-dfn-type="enum-value" data-export id="dom-apphistorynavigationtype-replace"><code><c- s>"replace"</c-></code></dfn>,
  <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryNavigationType" data-dfn-type="enum-value" data-export id="dom-apphistorynavigationtype-traverse"><code><c- s>"traverse"</c-></code></dfn>
};
</pre>
   <dl class="domintro non-normative">
    <dt><code><var>event</var>.<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-navigationtype" id="ref-for-dom-apphistorynavigateevent-navigationtype①">navigationType</a></code></code> 
    <dd>
     <p>One of "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-reload" id="ref-for-dom-apphistorynavigationtype-reload">reload</a></code>", "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-push" id="ref-for-dom-apphistorynavigationtype-push">push</a></code>", "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-replace" id="ref-for-dom-apphistorynavigationtype-replace">replace</a></code>", or "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-traverse" id="ref-for-dom-apphistorynavigationtype-traverse②">traverse</a></code>", indicating what type of navigation this is. </p>
    <dt><code><var>event</var>.<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-destination" id="ref-for-dom-apphistorynavigateevent-destination①">destination</a></code></code> 
    <dd>
     <p>An <code class="idl"><a data-link-type="idl" href="#apphistorydestination" id="ref-for-apphistorydestination②">AppHistoryDestination</a></code> representing the destination of the navigation. </p>
    <dt><code><var>event</var>.<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-canrespond" id="ref-for-dom-apphistorynavigateevent-canrespond①">canRespond</a></code></code> 
    <dd>
     <p>True if <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-respondwith" id="ref-for-dom-apphistorynavigateevent-respondwith①⑦">respondWith()</a></code> can be called to convert this navigation into a single-page navigation; false otherwise. </p>
     <p>Generally speaking, this will be true whenever the destination URL is <a data-link-type="dfn" href="#rewritable" id="ref-for-rewritable">rewritable</a> relative to the page’s current URL, except for cross-document back/forward navigations, where it will always be false. </p>
    <dt><code><var>event</var>.<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-userinitiated" id="ref-for-dom-apphistorynavigateevent-userinitiated①">userInitiated</a></code></code> 
    <dd>
     <p>True if this navigation was due to a user clicking on an <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-a-element" id="ref-for-the-a-element">a</a></code> element, submitting a <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/forms.html#the-form-element" id="ref-for-the-form-element">form</a></code> element, or using the browser UI to navigate; false otherwise. </p>
    <dt><code><var>event</var>.<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-hashchange" id="ref-for-dom-apphistorynavigateevent-hashchange①">hashChange</a></code></code> 
    <dd>
     <p>True if this navigation is a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate-fragid" id="ref-for-navigate-fragid①">fragment navigation</a>; false otherwise. </p>
    <dt><code><var>event</var>.<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-signal" id="ref-for-dom-apphistorynavigateevent-signal④">signal</a></code></code> 
    <dd>
     <p>An <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal④">AbortSignal</a></code> which will become aborted if the navigation gets canceled, e.g. by the user pressing their browser’s "Stop" button, or another higher-priority navigation interrupting this one. </p>
     <p>The expected pattern is for developers to pass this along to any async operations, such as <code class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#dom-global-fetch" id="ref-for-dom-global-fetch">fetch()</a></code>, which they perform as part of handling this navigation. </p>
    <dt><code><var>event</var>.<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-formdata" id="ref-for-dom-apphistorynavigateevent-formdata①">formData</a></code></code> 
    <dd>
     <p>The <code class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#formdata" id="ref-for-formdata②">FormData</a></code> representing the submitted form entries for this navigation, if this navigation is a POST <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#concept-form-submit" id="ref-for-concept-form-submit">form submission</a>; null otherwise. </p>
    <dt><code><var>event</var>.<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-info" id="ref-for-dom-apphistorynavigateevent-info⑤">info</a></code></code> 
    <dd>
     <p>An arbitrary JavaScript value passed via other app history APIs that initiated this navigation, or null if the navigation was initiated by the user or via a non-app history API. </p>
    <dt><code><var>event</var>.<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-respondwith" id="ref-for-dom-apphistorynavigateevent-respondwith①⑧">respondWith</a></code>(<var>newNavigationAction</var>)</code> 
    <dd>
     <p>Synchronously converts this navigation into a same-document navigation to the destination URL. </p>
     <p>The given <var>newNavigationAction</var> promise is used to signal the duration, and success or failure, of the navigation. After it settles, the browser signals to the user (e.g. via a loading spinner UI, or assistive technology) that the navigation is finished. Additionally, it fires <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigatesuccess" id="ref-for-eventdef-apphistory-navigatesuccess">navigatesuccess</a></code> or <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigateerror" id="ref-for-eventdef-apphistory-navigateerror">navigateerror</a></code> events as appropriate, which other parts of the web application can respond to. </p>
     <p>This method will throw a "<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#securityerror" id="ref-for-securityerror①">SecurityError</a></code>" <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException①⑦">DOMException</a></code> if <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-canrespond" id="ref-for-dom-apphistorynavigateevent-canrespond②">canRespond</a></code> is false, or if <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-istrusted" id="ref-for-dom-event-istrusted">isTrusted</a></code> is false. It will throw an "<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidstateerror" id="ref-for-invalidstateerror①④">InvalidStateError</a></code>" <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException①⑧">DOMException</a></code> if not called synchronously, during event dispatch. </p>
   </dl>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryNavigateEvent" data-dfn-type="attribute" data-export id="dom-apphistorynavigateevent-navigationtype"><code>navigationType</code></dfn>, <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryNavigateEvent" data-dfn-type="attribute" data-export id="dom-apphistorynavigateevent-destination"><code>destination</code></dfn>, <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryNavigateEvent" data-dfn-type="attribute" data-export id="dom-apphistorynavigateevent-canrespond"><code>canRespond</code></dfn>, <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryNavigateEvent" data-dfn-type="attribute" data-export id="dom-apphistorynavigateevent-userinitiated"><code>userInitiated</code></dfn>, <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryNavigateEvent" data-dfn-type="attribute" data-export id="dom-apphistorynavigateevent-hashchange"><code>hashChange</code></dfn>, <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryNavigateEvent" data-dfn-type="attribute" data-export id="dom-apphistorynavigateevent-signal"><code>signal</code></dfn>, <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryNavigateEvent" data-dfn-type="attribute" data-export id="dom-apphistorynavigateevent-formdata"><code>formData</code></dfn>, and <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryNavigateEvent" data-dfn-type="attribute" data-export id="dom-apphistorynavigateevent-info"><code>info</code></dfn> getter steps are to return the value that the corresponding attribute was initialized to.</p>
   <p>An <code class="idl"><a data-link-type="idl" href="#apphistorynavigateevent" id="ref-for-apphistorynavigateevent④">AppHistoryNavigateEvent</a></code> has the following associated values which are only conditionally used:</p>
   <ul>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="AppHistoryNavigateEvent" data-dfn-type="dfn" data-noexport id="apphistorynavigateevent-classic-history-api-serialized-data">classic history API serialized data</dfn>, a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#serialized-state" id="ref-for-serialized-state②">serialized state</a>-or-null, used when its <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-navigationtype" id="ref-for-dom-apphistorynavigateevent-navigationtype②">navigationType</a></code> is "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-reload" id="ref-for-dom-apphistorynavigationtype-reload①">reload</a></code>", "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-push" id="ref-for-dom-apphistorynavigationtype-push①">push</a></code>" or "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-replace" id="ref-for-dom-apphistorynavigationtype-replace①">replace</a></code>"</p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="AppHistoryNavigateEvent" data-dfn-type="dfn" data-noexport id="apphistorynavigateevent-destination-entry">destination entry</dfn>, a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#session-history-entry" id="ref-for-session-history-entry③">session history entry</a>, used when its <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-navigationtype" id="ref-for-dom-apphistorynavigateevent-navigationtype③">navigationType</a></code> is "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-traverse" id="ref-for-dom-apphistorynavigationtype-traverse③">traverse</a></code>"</p>
   </ul>
   <p>One of these is set appropriately when the event is <a href="#navigate-event-firing">fired</a>.</p>
   <p>An <code class="idl"><a data-link-type="idl" href="#apphistorynavigateevent" id="ref-for-apphistorynavigateevent⑤">AppHistoryNavigateEvent</a></code> also has an associated <dfn class="dfn-paneled" data-dfn-for="AppHistoryNavigateEvent" data-dfn-type="dfn" data-noexport id="apphistorynavigateevent-navigation-action-promises-list">navigation action promises list</dfn>, which is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list①">list</a> of <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise①⓪">Promise</a></code> objects, initially empty.</p>
   <div class="algorithm" data-algorithm="respondWith(newNavigationAction)" data-algorithm-for="AppHistoryNavigateEvent">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryNavigateEvent" data-dfn-type="method" data-export id="dom-apphistorynavigateevent-respondwith"><code>respondWith(<var>newNavigationAction</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this③⑦">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①⑤">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#active-document" id="ref-for-active-document①">active Document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active⑦">fully active</a>, then throw an "<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidstateerror" id="ref-for-invalidstateerror①⑤">InvalidStateError</a></code>" <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException①⑨">DOMException</a></code>.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this③⑧">this</a>'s <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-istrusted" id="ref-for-dom-event-istrusted①">isTrusted</a></code> attribute was initialized to false, then throw a "<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#securityerror" id="ref-for-securityerror②">SecurityError</a></code>" <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException②⓪">DOMException</a></code>.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this③⑨">this</a>'s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-canrespond" id="ref-for-dom-apphistorynavigateevent-canrespond③">canRespond</a></code> attribute was initialized to false, then throw a "<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#securityerror" id="ref-for-securityerror③">SecurityError</a></code>" <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException②①">DOMException</a></code>.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this④⓪">this</a>'s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#dispatch-flag" id="ref-for-dispatch-flag">dispatch flag</a> is unset, then throw an "<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidstateerror" id="ref-for-invalidstateerror①⑥">InvalidStateError</a></code>" <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException②②">DOMException</a></code>.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this④①">this</a>'s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#canceled-flag" id="ref-for-canceled-flag②">canceled flag</a> is set, then throw an "<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidstateerror" id="ref-for-invalidstateerror①⑦">InvalidStateError</a></code>" <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException②③">DOMException</a></code>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append④">Append</a> <var>newNavigationAction</var> to <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this④②">this</a>'s <a data-link-type="dfn" href="#apphistorynavigateevent-navigation-action-promises-list" id="ref-for-apphistorynavigateevent-navigation-action-promises-list">navigation action promises list</a>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="2.2" id="navigate-event-destination"><span class="secno">2.2. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#apphistorydestination" id="ref-for-apphistorydestination③">AppHistoryDestination</a></code> class</span><a class="self-link" href="#navigate-event-destination"></a></h3>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed②"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="apphistorydestination"><code><c- g>AppHistoryDestination</c-></code></dfn> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString①"><c- b>USVString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="USVString" href="#dom-apphistorydestination-url" id="ref-for-dom-apphistorydestination-url"><c- g>url</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString②"><c- b>DOMString</c-></a>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMString?" href="#dom-apphistorydestination-key" id="ref-for-dom-apphistorydestination-key"><c- g>key</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString③"><c- b>DOMString</c-></a>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMString?" href="#dom-apphistorydestination-id" id="ref-for-dom-apphistorydestination-id"><c- g>id</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-long-long" id="ref-for-idl-long-long"><c- b>long</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="long long" href="#dom-apphistorydestination-index" id="ref-for-dom-apphistorydestination-index"><c- g>index</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean" id="ref-for-idl-boolean⑨"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-apphistorydestination-samedocument" id="ref-for-dom-apphistorydestination-samedocument"><c- g>sameDocument</c-></a>;

  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-any" id="ref-for-idl-any⑤"><c- b>any</c-></a> <a class="idl-code" data-link-type="method" href="#dom-apphistorydestination-getstate" id="ref-for-dom-apphistorydestination-getstate"><c- g>getState</c-></a>();
};
</pre>
   <dl class="domintro non-normative">
    <dt><code><var>event</var>.<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-destination" id="ref-for-dom-apphistorynavigateevent-destination②">destination</a></code>.<code class="idl"><a data-link-type="idl" href="#dom-apphistorydestination-url" id="ref-for-dom-apphistorydestination-url①">url</a></code></code> 
    <dd>
     <p>The URL being navigated to. </p>
    <dt><code><var>event</var>.<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-destination" id="ref-for-dom-apphistorynavigateevent-destination③">destination</a></code>.<code class="idl"><a data-link-type="idl" href="#dom-apphistorydestination-key" id="ref-for-dom-apphistorydestination-key①">key</a></code></code> 
    <dd>
     <p>The value of the <code class="idl"><a data-link-type="idl" href="#dom-apphistoryentry-key" id="ref-for-dom-apphistoryentry-key">key</a></code> property of the destination <code class="idl"><a data-link-type="idl" href="#apphistoryentry" id="ref-for-apphistoryentry①②">AppHistoryEntry</a></code>, if this is a "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-traverse" id="ref-for-dom-apphistorynavigationtype-traverse④">traverse</a></code>" navigation, or null otherwise. </p>
    <dt><code><var>event</var>.<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-destination" id="ref-for-dom-apphistorynavigateevent-destination④">destination</a></code>.<code class="idl"><a data-link-type="idl" href="#dom-apphistorydestination-id" id="ref-for-dom-apphistorydestination-id①">id</a></code></code> 
    <dd>
     <p>The value of the <code class="idl"><a data-link-type="idl" href="#dom-apphistoryentry-id" id="ref-for-dom-apphistoryentry-id">id</a></code> property of the destination <code class="idl"><a data-link-type="idl" href="#apphistoryentry" id="ref-for-apphistoryentry①③">AppHistoryEntry</a></code>, if this is a "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-traverse" id="ref-for-dom-apphistorynavigationtype-traverse⑤">traverse</a></code>" navigation, or null otherwise. </p>
    <dt><code><var>event</var>.<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-destination" id="ref-for-dom-apphistorynavigateevent-destination⑤">destination</a></code>.<code class="idl"><a data-link-type="idl" href="#dom-apphistorydestination-index" id="ref-for-dom-apphistorydestination-index①">index</a></code></code> 
    <dd>
     <p>The value of the <code class="idl"><a data-link-type="idl" href="#dom-apphistoryentry-index" id="ref-for-dom-apphistoryentry-index">index</a></code> property of the destination <code class="idl"><a data-link-type="idl" href="#apphistoryentry" id="ref-for-apphistoryentry①④">AppHistoryEntry</a></code>, if this is a "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-traverse" id="ref-for-dom-apphistorynavigationtype-traverse⑥">traverse</a></code>" navigation, or −1 otherwise. </p>
    <dt><code><var>event</var>.<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-destination" id="ref-for-dom-apphistorynavigateevent-destination⑥">destination</a></code>.<code class="idl"><a data-link-type="idl" href="#dom-apphistorydestination-samedocument" id="ref-for-dom-apphistorydestination-samedocument①">sameDocument</a></code></code> 
    <dd>
     <p>Indicates whether or not this navigation is to the same <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document③">Document</a></code> as the current <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/window-object.html#dom-document-2" id="ref-for-dom-document-2">document</a></code> value, or not. This will be true, for example, in cases of fragment navigations or <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/history.html#dom-history-pushstate" id="ref-for-dom-history-pushstate">history.pushState()</a></code> navigations. </p>
     <p>Note that this property indicates the original nature of the navigation. If a cross-document navigation is converted into a same-document navigation using <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-respondwith" id="ref-for-dom-apphistorynavigateevent-respondwith①⑨">event.respondWith()</a></code>, that will not change the value of this property. </p>
    <dt><code><var>state</var> = <var>event</var>.<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-destination" id="ref-for-dom-apphistorynavigateevent-destination⑦">destination</a></code>.<code class="idl"><a data-link-type="idl" href="#dom-apphistorydestination-getstate" id="ref-for-dom-apphistorydestination-getstate①">getState()</a></code></code> 
    <dd>
     <p>For "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-traverse" id="ref-for-dom-apphistorynavigationtype-traverse⑦">traverse</a></code>" navigations, returns the deserialization of the state stored in the destination session history entry. </p>
     <p>For "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-push" id="ref-for-dom-apphistorynavigationtype-push②">push</a></code>" and "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-replace" id="ref-for-dom-apphistorynavigationtype-replace②">replace</a></code>" navigations, returns the deserialization of the state passed to <code class="idl"><a data-link-type="idl" href="#dom-apphistory-navigate" id="ref-for-dom-apphistory-navigate⑤">appHistory.navigate()</a></code>, if the navigation was initiated in that way, or undefined if it wasn’t. </p>
     <p>For "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-reload" id="ref-for-dom-apphistorynavigationtype-reload②">reload</a></code>" navigations, returns the deserialization of the state passed to <code class="idl"><a data-link-type="idl" href="#dom-apphistory-reload" id="ref-for-dom-apphistory-reload③">appHistory.reload()</a></code>, if the reload was initiated in that way, or undefined if it wasn’t. </p>
   </dl>
   <p>An <code class="idl"><a data-link-type="idl" href="#apphistorydestination" id="ref-for-apphistorydestination④">AppHistoryDestination</a></code> has an associated <dfn class="dfn-paneled" data-dfn-for="AppHistoryDestination" data-dfn-type="dfn" data-noexport id="apphistorydestination-url">URL</dfn>, which is a <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url①">URL</a>.</p>
   <p>An <code class="idl"><a data-link-type="idl" href="#apphistorydestination" id="ref-for-apphistorydestination⑤">AppHistoryDestination</a></code> has an associated <dfn class="dfn-paneled" data-dfn-for="AppHistoryDestination" data-dfn-type="dfn" data-noexport id="apphistorydestination-key">key</dfn>, which is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string">string</a>-or-null.</p>
   <p>An <code class="idl"><a data-link-type="idl" href="#apphistorydestination" id="ref-for-apphistorydestination⑥">AppHistoryDestination</a></code> has an associated <dfn class="dfn-paneled" data-dfn-for="AppHistoryDestination" data-dfn-type="dfn" data-noexport id="apphistorydestination-id">id</dfn>, which is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string①">string</a>-or-null.</p>
   <p>An <code class="idl"><a data-link-type="idl" href="#apphistorydestination" id="ref-for-apphistorydestination⑦">AppHistoryDestination</a></code> has an associated <dfn class="dfn-paneled" data-dfn-for="AppHistoryDestination" data-dfn-type="dfn" data-noexport id="apphistorydestination-index">index</dfn>, which is an integer.</p>
   <p>An <code class="idl"><a data-link-type="idl" href="#apphistorydestination" id="ref-for-apphistorydestination⑧">AppHistoryDestination</a></code> has an associated <dfn class="dfn-paneled" data-dfn-for="AppHistoryDestination" data-dfn-type="dfn" data-noexport id="apphistorydestination-state">state</dfn>, which is a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#serialized-state" id="ref-for-serialized-state③">serialized state</a>-or-null.</p>
   <p>An <code class="idl"><a data-link-type="idl" href="#apphistorydestination" id="ref-for-apphistorydestination⑨">AppHistoryDestination</a></code> has an associated <dfn class="dfn-paneled" data-dfn-for="AppHistoryDestination" data-dfn-type="dfn" data-noexport id="apphistorydestination-is-same-document">is same document</dfn>, which is a boolean.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryDestination" data-dfn-type="attribute" data-export id="dom-apphistorydestination-url"><code>url</code></dfn> getter steps are to return <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this④③">this</a>'s <a data-link-type="dfn" href="#apphistorydestination-url" id="ref-for-apphistorydestination-url">URL</a>, <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-serializer" id="ref-for-concept-url-serializer">serialized</a>.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryDestination" data-dfn-type="attribute" data-export id="dom-apphistorydestination-key"><code>key</code></dfn> getter steps are to return <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this④④">this</a>'s <a data-link-type="dfn" href="#apphistorydestination-key" id="ref-for-apphistorydestination-key">key</a>.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryDestination" data-dfn-type="attribute" data-export id="dom-apphistorydestination-id"><code>id</code></dfn> getter steps are to return <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this④⑤">this</a>'s <a data-link-type="dfn" href="#apphistorydestination-id" id="ref-for-apphistorydestination-id">id</a>.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryDestination" data-dfn-type="attribute" data-export id="dom-apphistorydestination-index"><code>index</code></dfn> getter steps are to return <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this④⑥">this</a>'s <a data-link-type="dfn" href="#apphistorydestination-index" id="ref-for-apphistorydestination-index">index</a>.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryDestination" data-dfn-type="attribute" data-export id="dom-apphistorydestination-samedocument"><code>sameDocument</code></dfn> getter steps are to return <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this④⑦">this</a>'s <a data-link-type="dfn" href="#apphistorydestination-is-same-document" id="ref-for-apphistorydestination-is-same-document">is same document</a>.</p>
   <div class="algorithm" data-algorithm="getState()" data-algorithm-for="AppHistoryDestination">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryDestination" data-dfn-type="method" data-export id="dom-apphistorydestination-getstate"><code>getState()</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this④⑧">this</a>'s <a data-link-type="dfn" href="#apphistorydestination-state" id="ref-for-apphistorydestination-state">state</a> is null, then return undefined.</p>
     <li data-md>
      <p>Return <a data-link-type="abstract-op" href="https://html.spec.whatwg.org/multipage/structured-data.html#structureddeserialize" id="ref-for-structureddeserialize">StructuredDeserialize</a>(<a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this④⑨">this</a>'s <a data-link-type="dfn" href="#apphistorydestination-state" id="ref-for-apphistorydestination-state①">state</a>).</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="2.3" id="navigate-event-firing"><span class="secno">2.3. </span><span class="content">Firing the event</span><a class="self-link" href="#navigate-event-firing"></a></h3>
   <div class="algorithm" data-algorithm="fire a traversal navigate event">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="fire-a-traversal-navigate-event">fire a traversal <code>navigate</code> event</dfn> at an <code class="idl"><a data-link-type="idl" href="#apphistory" id="ref-for-apphistory②①">AppHistory</a></code> <var>appHistory</var> given a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#session-history-entry" id="ref-for-session-history-entry④">session history entry</a> <dfn class="dfn-paneled" data-dfn-for="fire a traversal navigate event" data-dfn-type="dfn" data-noexport id="fire-a-traversal-navigate-event-destinationentry"><var>destinationEntry</var></dfn>, and an optional <a data-link-type="dfn" href="#user-navigation-involvement" id="ref-for-user-navigation-involvement">user navigation involvement</a> <dfn class="dfn-paneled" data-dfn-for="fire a traversal navigate event" data-dfn-type="dfn" data-noexport id="fire-a-traversal-navigate-event-userinvolvement"><var>userInvolvement</var></dfn> (default "<code><a data-link-type="dfn" href="#user-navigation-involvement-none" id="ref-for-user-navigation-involvement-none①">none</a></code>"): 
    <ol>
     <li data-md>
      <p>Let <var>event</var> be the result of <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-create" id="ref-for-concept-event-create">creating an event</a> given <code class="idl"><a data-link-type="idl" href="#apphistorynavigateevent" id="ref-for-apphistorynavigateevent⑥">AppHistoryNavigateEvent</a></code>, in <var>appHistory</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm⑤">relevant Realm</a>.</p>
     <li data-md>
      <p>Set <var>event</var>’s <a data-link-type="dfn" href="#apphistorynavigateevent-destination-entry" id="ref-for-apphistorynavigateevent-destination-entry">destination entry</a> to <var>destinationEntry</var>.</p>
     <li data-md>
      <p>Let <var>destination</var> be a <a data-link-type="dfn" href="https://heycam.github.io/webidl/#new" id="ref-for-new③">new</a> <code class="idl"><a data-link-type="idl" href="#apphistorydestination" id="ref-for-apphistorydestination①⓪">AppHistoryDestination</a></code> created in <var>appHistory</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm⑥">relevant Realm</a>.</p>
     <li data-md>
      <p>Set <var>destination</var>’s <a data-link-type="dfn" href="#apphistorydestination-url" id="ref-for-apphistorydestination-url①">URL</a> to <var>destinationEntry</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#she-url" id="ref-for-she-url">URL</a>.</p>
     <li data-md>
      <p>If <var>destinationEntry</var>’s <a data-link-type="dfn" href="#session-history-entry-origin" id="ref-for-session-history-entry-origin④">origin</a> is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#same-origin" id="ref-for-same-origin③">same origin</a> with <var>appHistory</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object①">relevant settings object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin">origin</a>, then:</p>
      <ol>
       <li data-md>
        <p>Set <var>destination</var>’s <a data-link-type="dfn" href="#apphistorydestination-key" id="ref-for-apphistorydestination-key①">key</a> to <var>destinationEntry</var>’s <a data-link-type="dfn" href="#session-history-entry-app-history-key" id="ref-for-session-history-entry-app-history-key⑤">app history key</a>.</p>
       <li data-md>
        <p>Set <var>destination</var>’s <a data-link-type="dfn" href="#apphistorydestination-id" id="ref-for-apphistorydestination-id①">id</a> to <var>destinationEntry</var>’s <a data-link-type="dfn" href="#session-history-entry-app-history-id" id="ref-for-session-history-entry-app-history-id">app history id</a>.</p>
       <li data-md>
        <p>Set <var>destination</var>’s <a data-link-type="dfn" href="#apphistorydestination-index" id="ref-for-apphistorydestination-index①">index</a> to the result of <a data-link-type="dfn" href="#get-the-app-history-index" id="ref-for-get-the-app-history-index">getting the app history index</a> of <var>destinationEntry</var> within <var>appHistory</var>.</p>
       <li data-md>
        <p>Set <var>destination</var>’s <a data-link-type="dfn" href="#apphistorydestination-state" id="ref-for-apphistorydestination-state②">state</a> to <var>destinationEntry</var>’s <a data-link-type="dfn" href="#session-history-entry-app-history-state" id="ref-for-session-history-entry-app-history-state②">app history state</a>.</p>
      </ol>
     <li data-md>
      <p>Otherwise,</p>
      <ol>
       <li data-md>
        <p>Set <var>destination</var>’s <a data-link-type="dfn" href="#apphistorydestination-key" id="ref-for-apphistorydestination-key②">key</a> to null.</p>
       <li data-md>
        <p>Set <var>destination</var>’s <a data-link-type="dfn" href="#apphistorydestination-id" id="ref-for-apphistorydestination-id②">id</a> to null.</p>
       <li data-md>
        <p>Set <var>destination</var>’s <a data-link-type="dfn" href="#apphistorydestination-index" id="ref-for-apphistorydestination-index②">index</a> to −1.</p>
       <li data-md>
        <p>Set <var>destination</var>’s <a data-link-type="dfn" href="#apphistorydestination-state" id="ref-for-apphistorydestination-state③">state</a> to null.</p>
      </ol>
     <li data-md>
      <p>Set <var>destination</var>’s <a data-link-type="dfn" href="#apphistorydestination-is-same-document" id="ref-for-apphistorydestination-is-same-document①">is same document</a> to true if <var>destinationEntry</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#she-document" id="ref-for-she-document">document</a> is equal to <var>appHistory</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①⑥">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#concept-document-window" id="ref-for-concept-document-window①⓪">associated Document</a>; otherwise false.</p>
     <li data-md>
      <p>Return the result of performing the <a data-link-type="dfn" href="#inner-navigate-event-firing-algorithm" id="ref-for-inner-navigate-event-firing-algorithm①">inner navigate event firing algorithm</a> given <var>appHistory</var>, "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-traverse" id="ref-for-dom-apphistorynavigationtype-traverse⑧">traverse</a></code>", <var>event</var>, <var>destination</var>, <var>userInvolvement</var>, and null.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="fire a push or replace navigate event">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="fire-a-push-or-replace-navigate-event">fire a push or replace <code>navigate</code> event</dfn> at an <code class="idl"><a data-link-type="idl" href="#apphistory" id="ref-for-apphistory②②">AppHistory</a></code> <var>appHistory</var> given an <code class="idl"><a data-link-type="idl" href="#enumdef-apphistorynavigationtype" id="ref-for-enumdef-apphistorynavigationtype②">AppHistoryNavigationType</a></code> <dfn class="dfn-paneled" data-dfn-for="fire a push or replace navigate event" data-dfn-type="dfn" data-noexport id="fire-a-push-or-replace-navigate-event-navigationtype"><var>navigationType</var></dfn>, a <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url②">URL</a> <dfn class="dfn-paneled" data-dfn-for="fire a push or replace navigate event" data-dfn-type="dfn" data-noexport id="fire-a-push-or-replace-navigate-event-destinationurl"><var>destinationURL</var></dfn>, a boolean <dfn class="dfn-paneled" data-dfn-for="fire a push or replace navigate event" data-dfn-type="dfn" data-noexport id="fire-a-push-or-replace-navigate-event-issamedocument"><var>isSameDocument</var></dfn>, an optional <a data-link-type="dfn" href="#user-navigation-involvement" id="ref-for-user-navigation-involvement①">user navigation involvement</a> <dfn class="dfn-paneled" data-dfn-for="fire a push or replace navigate event" data-dfn-type="dfn" data-noexport id="fire-a-push-or-replace-navigate-event-userinvolvement"><var>userInvolvement</var></dfn> (default "<code><a data-link-type="dfn" href="#user-navigation-involvement-none" id="ref-for-user-navigation-involvement-none②">none</a></code>"), an optional <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#serialized-state" id="ref-for-serialized-state④">serialized state</a>-or-null <dfn class="dfn-paneled" data-dfn-for="fire a push or replace navigate event" data-dfn-type="dfn" data-noexport id="fire-a-push-or-replace-navigate-event-state"><var>state</var></dfn> (default null), an optional <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list②">list</a> of <code class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#formdata" id="ref-for-formdata③">FormData</a></code> <a data-link-type="dfn" href="https://xhr.spec.whatwg.org/#concept-formdata-entry" id="ref-for-concept-formdata-entry">entries</a> or null <dfn class="dfn-paneled" data-dfn-for="fire a push or replace navigate event" data-dfn-type="dfn" data-noexport id="fire-a-push-or-replace-navigate-event-formdataentrylist"><var>formDataEntryList</var></dfn> (default null), and an optional <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#serialized-state" id="ref-for-serialized-state⑤">serialized state</a>-or-null <dfn class="dfn-paneled" data-dfn-for="fire a push or replace navigate event" data-dfn-type="dfn" data-noexport id="fire-a-push-or-replace-navigate-event-classichistoryapiserializeddata"><var>classicHistoryAPISerializedData</var></dfn> (default null): 
    <ol>
     <li data-md>
      <p>Let <var>event</var> be the result of <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-create" id="ref-for-concept-event-create①">creating an event</a> given <code class="idl"><a data-link-type="idl" href="#apphistorynavigateevent" id="ref-for-apphistorynavigateevent⑦">AppHistoryNavigateEvent</a></code>, in <var>appHistory</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm⑦">relevant Realm</a>.</p>
     <li data-md>
      <p>Set <var>event</var>’s <a data-link-type="dfn" href="#apphistorynavigateevent-classic-history-api-serialized-data" id="ref-for-apphistorynavigateevent-classic-history-api-serialized-data">classic history API serialized data</a> to <var>classicHistoryAPISerializedData</var>.</p>
     <li data-md>
      <p>Let <var>destination</var> be a <a data-link-type="dfn" href="https://heycam.github.io/webidl/#new" id="ref-for-new④">new</a> <code class="idl"><a data-link-type="idl" href="#apphistorydestination" id="ref-for-apphistorydestination①①">AppHistoryDestination</a></code> created in <var>appHistory</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm⑧">relevant Realm</a>.</p>
     <li data-md>
      <p>Set <var>destination</var>’s <a data-link-type="dfn" href="#apphistorydestination-url" id="ref-for-apphistorydestination-url②">URL</a> to <var>destinationURL</var>.</p>
     <li data-md>
      <p>Set <var>destination</var>’s <a data-link-type="dfn" href="#apphistorydestination-key" id="ref-for-apphistorydestination-key③">key</a> to null.</p>
     <li data-md>
      <p>Set <var>destination</var>’s <a data-link-type="dfn" href="#apphistorydestination-id" id="ref-for-apphistorydestination-id③">id</a> to null.</p>
     <li data-md>
      <p>Set <var>destination</var>’s <a data-link-type="dfn" href="#apphistorydestination-index" id="ref-for-apphistorydestination-index③">index</a> to −1.</p>
     <li data-md>
      <p>Set <var>destination</var>’s <a data-link-type="dfn" href="#apphistorydestination-state" id="ref-for-apphistorydestination-state④">state</a> to <var>state</var>.</p>
     <li data-md>
      <p>Set <var>destination</var>’s <a data-link-type="dfn" href="#apphistorydestination-is-same-document" id="ref-for-apphistorydestination-is-same-document②">is same document</a> to <var>isSameDocument</var>.</p>
     <li data-md>
      <p>Return the result of performing the <a data-link-type="dfn" href="#inner-navigate-event-firing-algorithm" id="ref-for-inner-navigate-event-firing-algorithm②">inner navigate event firing algorithm</a> given <var>appHistory</var>, <var>navigationType</var>, <var>event</var>, <var>destination</var>, <var>userInvolvement</var>, and <var>formDataEntryList</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="inner navigate event firing algorithm">
     The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="inner-navigate-event-firing-algorithm">inner <code>navigate</code> event firing algorithm</dfn> is the following steps, given an <code class="idl"><a data-link-type="idl" href="#apphistory" id="ref-for-apphistory②③">AppHistory</a></code> <var>appHistory</var>, an <code class="idl"><a data-link-type="idl" href="#enumdef-apphistorynavigationtype" id="ref-for-enumdef-apphistorynavigationtype③">AppHistoryNavigationType</a></code> <var>navigationType</var>, an <code class="idl"><a data-link-type="idl" href="#apphistorynavigateevent" id="ref-for-apphistorynavigateevent⑧">AppHistoryNavigateEvent</a></code> <var>event</var>, an <code class="idl"><a data-link-type="idl" href="#apphistorydestination" id="ref-for-apphistorydestination①②">AppHistoryDestination</a></code> <var>destination</var>, a <a data-link-type="dfn" href="#user-navigation-involvement" id="ref-for-user-navigation-involvement②">user navigation involvement</a> <var>userInvolvement</var>, and a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list③">list</a> of <code class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#formdata" id="ref-for-formdata④">FormData</a></code> <a data-link-type="dfn" href="https://xhr.spec.whatwg.org/#concept-formdata-entry" id="ref-for-concept-formdata-entry①">entries</a> or null <var>formDataEntryList</var>: 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="#apphistory-promote-the-upcoming-non-traverse-navigation-to-ongoing" id="ref-for-apphistory-promote-the-upcoming-non-traverse-navigation-to-ongoing①">Promote the upcoming non-traverse navigation to ongoing</a> given <var>appHistory</var>.</p>
     <li data-md>
      <p>Let <var>ongoingNavigation</var> be null.</p>
     <li data-md>
      <p>If <var>destination</var>’s <a data-link-type="dfn" href="#apphistorydestination-key" id="ref-for-apphistorydestination-key④">key</a> is null, then set <var>ongoingNavigation</var> to <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-ongoing-non-traverse-navigation" id="ref-for-apphistory-ongoing-non-traverse-navigation③">ongoing non-traverse navigation</a>.</p>
     <li data-md>
      <p>Otherwise, if <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-ongoing-traverse-navigations" id="ref-for-apphistory-ongoing-traverse-navigations④">ongoing traverse navigations</a>[<var>destination</var>’s <a data-link-type="dfn" href="#apphistorydestination-key" id="ref-for-apphistorydestination-key⑤">key</a>] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists④">exists</a>, then set <var>ongoingNavigation</var> to <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-ongoing-traverse-navigations" id="ref-for-apphistory-ongoing-traverse-navigations⑤">ongoing traverse navigations</a>[<var>destination</var>’s <a data-link-type="dfn" href="#apphistorydestination-key" id="ref-for-apphistorydestination-key⑥">key</a>].</p>
     <li data-md>
      <p>Let <var>currentURL</var> be <var>appHistory</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①⑦">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#concept-document-window" id="ref-for-concept-document-window①①">associated document</a>'s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-url" id="ref-for-concept-document-url①">URL</a>.</p>
     <li data-md>
      <p>If <var>destination</var>’s <a data-link-type="dfn" href="#apphistorydestination-url" id="ref-for-apphistorydestination-url③">URL</a> is <a data-link-type="dfn" href="#rewritable" id="ref-for-rewritable①">rewritable</a> relative to <var>currentURL</var>, and either <var>destination</var>’s <a data-link-type="dfn" href="#apphistorydestination-is-same-document" id="ref-for-apphistorydestination-is-same-document③">is same document</a> is true or <var>navigationType</var> is not "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-traverse" id="ref-for-dom-apphistorynavigationtype-traverse⑨">traverse</a></code>", then initialize <var>event</var>’s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-canrespond" id="ref-for-dom-apphistorynavigateevent-canrespond④">canRespond</a></code> to true. Otherwise, initialize it to false.</p>
     <li data-md>
      <p>If either <var>userInvolvement</var> is not "<code><a data-link-type="dfn" href="#user-navigation-involvement-browser-ui" id="ref-for-user-navigation-involvement-browser-ui">browser UI</a></code>" or <var>navigationType</var> is not "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-traverse" id="ref-for-dom-apphistorynavigationtype-traverse①⓪">traverse</a></code>", then initialize <var>event</var>’s <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-cancelable" id="ref-for-dom-event-cancelable">cancelable</a></code> to true. Otherwise, initialize it to false.</p>
     <li data-md>
      <p>If either <var>appHistory</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①⑧">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#window-bc" id="ref-for-window-bc④">browsing context</a> is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/dom.html#still-on-its-initial-about:blank-document" id="ref-for-still-on-its-initial-about:blank-document①">still on its initial <code>about:blank</code> <code>Document</code></a>, or both <var>event</var>’s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-canrespond" id="ref-for-dom-apphistorynavigateevent-canrespond⑤">canRespond</a></code> and <var>event</var>’s <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-cancelable" id="ref-for-dom-event-cancelable①">cancelable</a></code> are false, then:</p>
      <ol>
       <li data-md>
        <p>If <var>ongoingNavigation</var> is not null, then:</p>
        <ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#resolve" id="ref-for-resolve②">Resolve</a> <var>ongoingNavigation</var>’s <a data-link-type="dfn" href="#app-history-api-navigation-returned-promise" id="ref-for-app-history-api-navigation-returned-promise⑦">returned promise</a>.</p>
         <li data-md>
          <p>Perform <var>ongoingNavigation</var>’s <a data-link-type="dfn" href="#app-history-api-navigation-cleanup-step" id="ref-for-app-history-api-navigation-cleanup-step④">cleanup step</a>.</p>
        </ol>
       <li data-md>
        <p>Return true.</p>
      </ol>
     <li data-md>
      <p>Initialize <var>event</var>’s <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-type" id="ref-for-dom-event-type">type</a></code> to "<code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigate" id="ref-for-eventdef-apphistory-navigate①⑦">navigate</a></code>".</p>
     <li data-md>
      <p>Initialize <var>event</var>’s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-navigationtype" id="ref-for-dom-apphistorynavigateevent-navigationtype④">navigationType</a></code> to <var>navigationType</var>.</p>
     <li data-md>
      <p>Initialize <var>event</var>’s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-destination" id="ref-for-dom-apphistorynavigateevent-destination⑧">destination</a></code> to <var>destination</var>.</p>
     <li data-md>
      <p>If <var>ongoingNavigation</var> is not null, then initialize <var>event</var>’s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-info" id="ref-for-dom-apphistorynavigateevent-info⑥">info</a></code> to <var>ongoingNavigation</var>’s <a data-link-type="dfn" href="#app-history-api-navigation-info" id="ref-for-app-history-api-navigation-info②">info</a>. Otherwise, initialize it to undefined.</p>
      <p class="note" role="note">At this point <var>ongoingNavigation</var>’s <a data-link-type="dfn" href="#app-history-api-navigation-info" id="ref-for-app-history-api-navigation-info③">info</a> is no longer needed and can be nulled out instead of keeping it alive for the lifetime of the <a data-link-type="dfn" href="#app-history-api-navigation" id="ref-for-app-history-api-navigation⑥">app history API navigation</a>. </p>
     <li data-md>
      <p>Initialize <var>event</var>’s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-signal" id="ref-for-dom-apphistorynavigateevent-signal⑤">signal</a></code> to a <a data-link-type="dfn" href="https://heycam.github.io/webidl/#new" id="ref-for-new⑤">new</a> <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal⑤">AbortSignal</a></code> created in <var>appHistory</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm⑨">relevant Realm</a>.</p>
     <li data-md>
      <p>If all of the following are true:</p>
      <ul>
       <li data-md>
        <p><var>destination</var>’s <a data-link-type="dfn" href="#apphistorydestination-is-same-document" id="ref-for-apphistorydestination-is-same-document④">is same document</a> is true;</p>
       <li data-md>
        <p><var>destination</var>’s <a data-link-type="dfn" href="#apphistorydestination-url" id="ref-for-apphistorydestination-url④">URL</a> <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-equals" id="ref-for-concept-url-equals">equals</a> <var>currentURL</var> with <i><a data-link-type="dfn" href="https://url.spec.whatwg.org/#url-equals-exclude-fragments" id="ref-for-url-equals-exclude-fragments">exclude fragments</a></i> set to true; and</p>
       <li data-md>
        <p><var>destination</var>’s <a data-link-type="dfn" href="#apphistorydestination-url" id="ref-for-apphistorydestination-url⑤">URL</a>'s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-fragment" id="ref-for-concept-url-fragment">fragment</a> is not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-is" id="ref-for-string-is">identical to</a> <var>currentURL</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-fragment" id="ref-for-concept-url-fragment①">fragment</a></p>
      </ul>
      <p>then initialize <var>event</var>’s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-hashchange" id="ref-for-dom-apphistorynavigateevent-hashchange②">hashChange</a></code> to true. Otherwise, initialize it to false.</p>
     <li data-md>
      <p>If <var>userInvolvement</var> is "<code><a data-link-type="dfn" href="#user-navigation-involvement-none" id="ref-for-user-navigation-involvement-none③">none</a></code>", then initialize <var>event</var>’s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-userinitiated" id="ref-for-dom-apphistorynavigateevent-userinitiated②">userInitiated</a></code> to false. Otherwise, initialize it to true.</p>
     <li data-md>
      <p>If <var>formDataEntryList</var> is not null, then initialize <var>event</var>’s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-formdata" id="ref-for-dom-apphistorynavigateevent-formdata②">formData</a></code> to a <a data-link-type="dfn" href="https://heycam.github.io/webidl/#new" id="ref-for-new⑥">new</a> <code class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#formdata" id="ref-for-formdata⑤">FormData</a></code> created in <var>appHistory</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm①⓪">relevant Realm</a>, associated to <var>formDataEntryList</var>. Otherwise, initialize it to null.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert②">Assert</a>: <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-ongoing-navigate-event" id="ref-for-apphistory-ongoing-navigate-event①">ongoing navigate event</a> is null.</p>
     <li data-md>
      <p>Set <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-ongoing-navigate-event" id="ref-for-apphistory-ongoing-navigate-event②">ongoing navigate event</a> to <var>event</var>.</p>
     <li data-md>
      <p>Let <var>dispatchResult</var> be the result of <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-dispatch" id="ref-for-concept-event-dispatch">dispatching</a> <var>event</var> at <var>appHistory</var>.</p>
     <li data-md>
      <p>Let <var>shouldContinue</var> be <var>dispatchResult</var>.</p>
     <li data-md>
      <p>Set <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-ongoing-navigate-event" id="ref-for-apphistory-ongoing-navigate-event③">ongoing navigate event</a> to null.</p>
     <li data-md>
      <p>Set <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-post-navigate-event-ongoing-navigation-signal" id="ref-for-apphistory-post-navigate-event-ongoing-navigation-signal①">post-navigate event ongoing navigation signal</a> to <var>event</var>’s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-signal" id="ref-for-dom-apphistorynavigateevent-signal⑥">signal</a></code>.</p>
     <li data-md>
      <p>If <var>appHistory</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①⑨">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#active-document" id="ref-for-active-document②">active Document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active⑧">fully active</a>, then:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="#finalize-with-an-aborted-navigation-error" id="ref-for-finalize-with-an-aborted-navigation-error③">Finalize with an aborted navigation error</a> given <var>appHistory</var> and <var>ongoingNavigation</var>.</p>
       <li data-md>
        <p>Return false.</p>
      </ol>
      <p class="note" role="note">This can occur if an event listener disconnected the <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element">iframe</a></code> corresponding to <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this⑤⓪">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global②⓪">relevant global object</a>. </p>
     <li data-md>
      <p>If <var>dispatchResult</var> is true:</p>
      <ol>
       <li data-md>
        <p>If <var>event</var>’s <a data-link-type="dfn" href="#apphistorynavigateevent-navigation-action-promises-list" id="ref-for-apphistorynavigateevent-navigation-action-promises-list①">navigation action promises list</a> is not empty and <var>navigationType</var> is not "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-traverse" id="ref-for-dom-apphistorynavigationtype-traverse①①">traverse</a></code>":</p>
        <ol>
         <li data-md>
          <p>Let <var>isPush</var> be true if <var>navigationType</var> is "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-push" id="ref-for-dom-apphistorynavigationtype-push③">push</a></code>"; otherwise, false.</p>
         <li data-md>
          <p>Run the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#url-and-history-update-steps" id="ref-for-url-and-history-update-steps①">URL and history update steps</a> given <var>event</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global②①">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#concept-document-window" id="ref-for-concept-document-window①②">associated document</a> and <var>event</var>’s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-destination" id="ref-for-dom-apphistorynavigateevent-destination⑨">destination</a></code>'s <a data-link-type="dfn" href="#apphistorydestination-url" id="ref-for-apphistorydestination-url⑥">URL</a>, with <i><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#uhus-serializeddata" id="ref-for-uhus-serializeddata">serializedData</a></i> set to <var>event</var>’s <a data-link-type="dfn" href="#apphistorynavigateevent-classic-history-api-serialized-data" id="ref-for-apphistorynavigateevent-classic-history-api-serialized-data①">classic history API serialized data</a> and <i><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#uhus-ispush" id="ref-for-uhus-ispush">isPush</a></i> set to <var>isPush</var>.</p>
         <li data-md>
          <p>Set <var>shouldContinue</var> to false.</p>
        </ol>
       <li data-md>
        <p>If <var>event</var>’s <a data-link-type="dfn" href="#apphistorynavigateevent-navigation-action-promises-list" id="ref-for-apphistorynavigateevent-navigation-action-promises-list②">navigation action promises list</a> is not empty or <var>destination</var>’s <a data-link-type="dfn" href="#apphistorydestination-is-same-document" id="ref-for-apphistorydestination-is-same-document⑤">is same document</a> is true, then <a data-link-type="dfn" href="https://heycam.github.io/webidl/#wait-for-all" id="ref-for-wait-for-all">wait for all</a> of <var>event</var>’s <a data-link-type="dfn" href="#apphistorynavigateevent-navigation-action-promises-list" id="ref-for-apphistorynavigateevent-navigation-action-promises-list③">navigation action promises list</a>, with the following success steps:</p>
        <ol>
         <li data-md>
          <p>If <var>event</var>’s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-signal" id="ref-for-dom-apphistorynavigateevent-signal⑦">signal</a></code>'s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-aborted-flag" id="ref-for-abortsignal-aborted-flag">aborted flag</a> is set, then abort these steps.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire" id="ref-for-concept-event-fire">Fire an event</a> named <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigatesuccess" id="ref-for-eventdef-apphistory-navigatesuccess①">navigatesuccess</a></code> at <var>appHistory</var>.</p>
         <li data-md>
          <p>If <var>ongoingNavigation</var> is non-null, then:</p>
          <ol>
           <li data-md>
            <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#resolve" id="ref-for-resolve③">Resolve</a> <var>ongoingNavigation</var>’s <a data-link-type="dfn" href="#app-history-api-navigation-returned-promise" id="ref-for-app-history-api-navigation-returned-promise⑧">returned promise</a> with undefined.</p>
           <li data-md>
            <p>Perform <var>ongoingNavigation</var>’s <a data-link-type="dfn" href="#app-history-api-navigation-cleanup-step" id="ref-for-app-history-api-navigation-cleanup-step⑤">cleanup step</a>.</p>
          </ol>
        </ol>
        and the following failure steps given reason <var>rejectionReason</var>: 
        <ol>
         <li data-md>
          <p>If <var>event</var>’s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-signal" id="ref-for-dom-apphistorynavigateevent-signal⑧">signal</a></code>'s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-aborted-flag" id="ref-for-abortsignal-aborted-flag①">aborted flag</a> is set, then abort these steps.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire" id="ref-for-concept-event-fire①">Fire an event</a> named <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigateerror" id="ref-for-eventdef-apphistory-navigateerror①">navigateerror</a></code> at <var>appHistory</var> using <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#errorevent" id="ref-for-errorevent">ErrorEvent</a></code>, with <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-errorevent-error" id="ref-for-dom-errorevent-error">error</a></code> initialized to <var>rejectionReason</var>, and <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-errorevent-message" id="ref-for-dom-errorevent-message">message</a></code>, <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-errorevent-filename" id="ref-for-dom-errorevent-filename">filename</a></code>, <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-errorevent-lineno" id="ref-for-dom-errorevent-lineno">lineno</a></code>, and <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-errorevent-colno" id="ref-for-dom-errorevent-colno">colno</a></code> initialized to appropriate values that can be extracted from <var>rejectionReason</var> in the same underspecified way the user agent typically does for the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#report-the-exception" id="ref-for-report-the-exception">report an exception</a> algorithm.</p>
         <li data-md>
          <p>If <var>ongoingNavigation</var> is non-null, then:</p>
          <ol>
           <li data-md>
            <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#reject" id="ref-for-reject④">Reject</a> <var>ongoingNavigation</var>’s <a data-link-type="dfn" href="#app-history-api-navigation-returned-promise" id="ref-for-app-history-api-navigation-returned-promise⑨">returned promise</a> with <var>rejectionReason</var>.</p>
           <li data-md>
            <p>Perform <var>ongoingNavigation</var>’s <a data-link-type="dfn" href="#app-history-api-navigation-cleanup-step" id="ref-for-app-history-api-navigation-cleanup-step⑥">cleanup step</a>.</p>
          </ol>
        </ol>
        <p class="note" role="note">If <var>event</var>’s <a data-link-type="dfn" href="#apphistorynavigateevent-navigation-action-promises-list" id="ref-for-apphistorynavigateevent-navigation-action-promises-list④">navigation action promises list</a> is non-empty, then <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-respondwith" id="ref-for-dom-apphistorynavigateevent-respondwith②⓪">respondWith()</a></code> was called and so we’re performing a same-document navigation, for which we want to fire <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigatesuccess" id="ref-for-eventdef-apphistory-navigatesuccess②">navigatesuccess</a></code> or <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigateerror" id="ref-for-eventdef-apphistory-navigateerror②">navigateerror</a></code> events, and resolve or reject the promise returned by the corresponding <code class="idl"><a data-link-type="idl" href="#dom-apphistory-navigate" id="ref-for-dom-apphistory-navigate⑥">appHistory.navigate()</a></code> call if one exists. Otherwise, if the navigation is same-document and was not canceled, we still perform these actions after a microtask (by waiting for zero promises), or after the appropriate task in the traversal case. </p>
       <li data-md>
        <p>Otherwise:</p>
        <ol>
         <li data-md>
          <p>Set <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-to-be-set-serialized-state" id="ref-for-apphistory-to-be-set-serialized-state④">to-be-set serialized state</a> to null.</p>
        </ol>
        <p class="note" role="note">This ensures that any call to <code class="idl"><a data-link-type="idl" href="#dom-apphistory-navigate" id="ref-for-dom-apphistory-navigate⑦">appHistory.navigate()</a></code> which triggered this algorithm does not overwrite the <a data-link-type="dfn" href="#session-history-entry-app-history-state" id="ref-for-session-history-entry-app-history-state③">app history state</a> of the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#current-entry" id="ref-for-current-entry②">current entry</a> for cross-document navigations. </p>
      </ol>
     <li data-md>
      <p>Otherwise, <var>navigationType</var> is not "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-traverse" id="ref-for-dom-apphistorynavigationtype-traverse①②">traverse</a></code>", <a data-link-type="dfn" href="#finalize-with-an-aborted-navigation-error" id="ref-for-finalize-with-an-aborted-navigation-error④">finalize with an aborted navigation error</a> given <var>appHistory</var> and <var>ongoingNavigation</var>.</p>
      <p class="note" role="note">If <var>navigationType</var> is "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-traverse" id="ref-for-dom-apphistorynavigationtype-traverse①③">traverse</a></code>", then we will <a data-link-type="dfn" href="#finalize-with-an-aborted-navigation-error" id="ref-for-finalize-with-an-aborted-navigation-error⑤">finalize with an aborted navigation error</a> in <a data-link-type="dfn" href="#perform-an-app-history-traversal" id="ref-for-perform-an-app-history-traversal③">perform an app history traversal</a>. </p>
     <li data-md>
      <p>Return <var>shouldContinue</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="finalize with an aborted navigation error">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="finalize-with-an-aborted-navigation-error">finalize with an aborted navigation error</dfn> given an <code class="idl"><a data-link-type="idl" href="#apphistory" id="ref-for-apphistory②④">AppHistory</a></code> <var>appHistory</var>, an <a data-link-type="dfn" href="#app-history-api-navigation" id="ref-for-app-history-api-navigation⑦">app history API navigation</a> or null <var>ongoingNavigation</var>, and an optional <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException②④">DOMException</a></code> <var>error</var>: 
    <ol>
     <li data-md>
      <p>Let <var>signal</var> be null.</p>
     <li data-md>
      <p>If <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-ongoing-navigate-event" id="ref-for-apphistory-ongoing-navigate-event④">ongoing navigate event</a> is non-null, then:</p>
      <ol>
       <li data-md>
        <p>Set <var>signal</var> to the value of <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-ongoing-navigate-event" id="ref-for-apphistory-ongoing-navigate-event⑤">ongoing navigate event</a>'s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-signal" id="ref-for-dom-apphistorynavigateevent-signal⑨">signal</a></code> property.</p>
       <li data-md>
        <p>Set <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-ongoing-navigate-event" id="ref-for-apphistory-ongoing-navigate-event⑥">ongoing navigate event</a>'s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#canceled-flag" id="ref-for-canceled-flag③">canceled flag</a> to true.</p>
       <li data-md>
        <p>Set <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-ongoing-navigate-event" id="ref-for-apphistory-ongoing-navigate-event⑦">ongoing navigate event</a> to null.</p>
      </ol>
     <li data-md>
      <p>Otherwise:</p>
      <ol>
       <li data-md>
        <p class="assertion">Assert: <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-post-navigate-event-ongoing-navigation-signal" id="ref-for-apphistory-post-navigate-event-ongoing-navigation-signal②">post-navigate event ongoing navigation signal</a> is not null.</p>
       <li data-md>
        <p>Set <var>signal</var> to <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-post-navigate-event-ongoing-navigation-signal" id="ref-for-apphistory-post-navigate-event-ongoing-navigation-signal③">post-navigate event ongoing navigation signal</a>.</p>
      </ol>
     <li data-md>
      <p>Set <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-post-navigate-event-ongoing-navigation-signal" id="ref-for-apphistory-post-navigate-event-ongoing-navigation-signal④">post-navigate event ongoing navigation signal</a> to null.</p>
     <li data-md>
      <p>Set <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-to-be-set-serialized-state" id="ref-for-apphistory-to-be-set-serialized-state⑤">to-be-set serialized state</a> to null.</p>
      <p class="note" role="note">This ensures that any call to <code class="idl"><a data-link-type="idl" href="#dom-apphistory-navigate" id="ref-for-dom-apphistory-navigate⑧">appHistory.navigate()</a></code> which triggered this algorithm does not overwrite the <a data-link-type="dfn" href="#session-history-entry-app-history-state" id="ref-for-session-history-entry-app-history-state④">app history state</a> of the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#current-entry" id="ref-for-current-entry③">current entry</a> for aborted navigations. </p>
     <li data-md>
      <p>Let <var>promise</var> be null.</p>
     <li data-md>
      <p>If <var>ongoingNavigation</var> is non-null, then set <var>promise</var> to <var>ongoingNavigation</var>’s <a data-link-type="dfn" href="#app-history-api-navigation-returned-promise" id="ref-for-app-history-api-navigation-returned-promise①⓪">returned promise</a>.</p>
     <li data-md>
      <p>If <var>ongoingNavigation</var> is non-null, then perform <var>ongoingNavigation</var>’s <a data-link-type="dfn" href="#app-history-api-navigation-cleanup-step" id="ref-for-app-history-api-navigation-cleanup-step⑦">cleanup step</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-signal-abort" id="ref-for-abortsignal-signal-abort②">Signal abort</a> on <var>signal</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-microtask" id="ref-for-queue-a-microtask">Queue a microtask</a> on <var>appHistory</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-agent" id="ref-for-relevant-agent">relevant agent</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-agent-event-loop" id="ref-for-concept-agent-event-loop">event loop</a> to perform the following steps:</p>
      <ol>
       <li data-md>
        <p>If <var>error</var> was not given, then set <var>error</var> to a <a data-link-type="dfn" href="https://heycam.github.io/webidl/#new" id="ref-for-new⑦">new</a> "<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#aborterror" id="ref-for-aborterror①">AbortError</a></code>" <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException②⑤">DOMException</a></code>, created in <var>appHistory</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm①①">relevant Realm</a>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire" id="ref-for-concept-event-fire②">Fire an event</a> named <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigateerror" id="ref-for-eventdef-apphistory-navigateerror③">navigateerror</a></code> at <var>appHistory</var> using <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#errorevent" id="ref-for-errorevent①">ErrorEvent</a></code>, with <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-errorevent-error" id="ref-for-dom-errorevent-error①">error</a></code> initialized to <var>error</var>, <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-errorevent-message" id="ref-for-dom-errorevent-message①">message</a></code> initialized to the value of <var>error</var>’s <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#dom-domexception-message" id="ref-for-dom-domexception-message">message</a></code> property, <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-errorevent-filename" id="ref-for-dom-errorevent-filename①">filename</a></code> initialized to the empty string, and <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-errorevent-lineno" id="ref-for-dom-errorevent-lineno①">lineno</a></code> and <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-errorevent-colno" id="ref-for-dom-errorevent-colno①">colno</a></code> initialized to 0.</p>
       <li data-md>
        <p>If <var>promise</var> is non-null, then <a data-link-type="dfn" href="https://heycam.github.io/webidl/#reject" id="ref-for-reject⑤">reject</a> it with <var>error</var>.</p>
      </ol>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="inform app history about a canceled navigation">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="inform-app-history-about-a-canceled-navigation">inform app history about a canceled navigation</dfn> in a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context" id="ref-for-browsing-context">browsing context</a> <var>bc</var>: 
    <ol>
     <li data-md>
      <p>Let <var>appHistory</var> be <var>bc</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#active-window" id="ref-for-active-window">active window</a>'s <a data-link-type="dfn" href="#window-app-history" id="ref-for-window-app-history①">app history</a>.</p>
     <li data-md>
      <p>Let <var>ongoingNavigation</var> be <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-ongoing-non-traverse-navigation" id="ref-for-apphistory-ongoing-non-traverse-navigation④">ongoing non-traverse navigation</a>.</p>
     <li data-md>
      <p>If <var>ongoingNavigation</var> is null, and the navigation being canceled is an "<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#hh-entry-update" id="ref-for-hh-entry-update"><code>entry update</code></a>" navigation that originally came from traversal to a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#session-history-entry" id="ref-for-session-history-entry⑤">session history entry</a> <var>she</var>, then:</p>
      <p class="advisement">This predicate should be made more precise when we define navigation cancelation in detail.</p>
      <ol>
       <li data-md>
        <p>Let <var>key</var> be <var>she</var>’s <a data-link-type="dfn" href="#session-history-entry-app-history-key" id="ref-for-session-history-entry-app-history-key⑥">app history key</a>.</p>
       <li data-md>
        <p>If <var>appHistory</var>’s <a data-link-type="dfn" href="#apphistory-ongoing-traverse-navigations" id="ref-for-apphistory-ongoing-traverse-navigations⑥">ongoing traverse navigations</a>[<var>key</var>] exists, then set <var>ongoingNavigation</var> to <a data-link-type="dfn" href="#apphistory-ongoing-traverse-navigations" id="ref-for-apphistory-ongoing-traverse-navigations⑦">ongoing traverse navigations</a>[<var>key</var>].</p>
      </ol>
     <li data-md>
      <p><a data-link-type="dfn" href="#finalize-with-an-aborted-navigation-error" id="ref-for-finalize-with-an-aborted-navigation-error⑥">Finalize with an aborted navigation error</a> given <var>appHistory</var> and <var>ongoingNavigation</var>.</p>
    </ol>
   </div>
   <p>A <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url③">URL</a> is <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="rewritable">rewritable</dfn> relative to another <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url④">URL</a> if they differ in only the <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-path" id="ref-for-concept-url-path">path</a>, <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-query" id="ref-for-concept-url-query">query</a>, or <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-fragment" id="ref-for-concept-url-fragment②">fragment</a> components.</p>
   <div class="example" id="example-rewritable-url">
    <a class="self-link" href="#example-rewritable-url"></a> <code>https://example.com/foo?bar#baz</code> is rewritable relative to <code>https://example.com/qux</code>. 
    <p>However, the concept is not the same as the two URLs' <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin">origins</a> being <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#same-origin" id="ref-for-same-origin④">the same</a>: <code>https://user:password@example.com/qux</code> is not rewritable relative to <code>https://example.com/qux</code>.</p>
    <p>Similarly, <code>about:blank</code> or <code>blob:</code> URLs are not rewritable relative to <code>https:</code> URLs, despite there being cases where a <code>https</code>:-<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-url" id="ref-for-concept-document-url②">URL</a> <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document④">Document</a></code> is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#same-origin" id="ref-for-same-origin⑤">same origin</a> with an <code>about:blank</code> or <code>blob:</code>-derived <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑤">Document</a></code>.</p>
   </div>
   <h2 class="heading settled" data-level="3" id="apphistoryentry-class"><span class="secno">3. </span><span class="content">App history entries</span><a class="self-link" href="#apphistoryentry-class"></a></h2>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed③"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="apphistoryentry"><code><c- g>AppHistoryEntry</c-></code></dfn> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget①"><c- n>EventTarget</c-></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString②"><c- b>USVString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="USVString" href="#dom-apphistoryentry-url" id="ref-for-dom-apphistoryentry-url"><c- g>url</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString④"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMString" href="#dom-apphistoryentry-key" id="ref-for-dom-apphistoryentry-key①"><c- g>key</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString⑤"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMString" href="#dom-apphistoryentry-id" id="ref-for-dom-apphistoryentry-id①"><c- g>id</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-long-long" id="ref-for-idl-long-long①"><c- b>long</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="long long" href="#dom-apphistoryentry-index" id="ref-for-dom-apphistoryentry-index①"><c- g>index</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean" id="ref-for-idl-boolean①⓪"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-apphistoryentry-samedocument" id="ref-for-dom-apphistoryentry-samedocument"><c- g>sameDocument</c-></a>;

  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-any" id="ref-for-idl-any⑥"><c- b>any</c-></a> <a class="idl-code" data-link-type="method" href="#dom-apphistoryentry-getstate" id="ref-for-dom-apphistoryentry-getstate①"><c- g>getState</c-></a>();

  // TODO event handlers
};
</pre>
   <dl class="domintro non-normative">
    <dt><code><var>entry</var>.<code class="idl"><a data-link-type="idl" href="#dom-apphistoryentry-url" id="ref-for-dom-apphistoryentry-url①">url</a></code></code> 
    <dd>
     <p>The URL of this app history entry. </p>
    <dt><code><var>entry</var>.<code class="idl"><a data-link-type="idl" href="#dom-apphistoryentry-key" id="ref-for-dom-apphistoryentry-key②">key</a></code></code> 
    <dd>
     <p>A <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent" id="ref-for-user-agent">user agent</a>-generated random UUID string representing this app history entry’s place in the app history list. This value will be reused by other <code class="idl"><a data-link-type="idl" href="#apphistoryentry" id="ref-for-apphistoryentry①⑤">AppHistoryEntry</a></code> instances that replace this one due to replace-style navigations. This value will survive session restores. </p>
     <p>This is useful for navigating back to this location in the app history entry list, using <code class="idl"><a data-link-type="idl" href="#dom-apphistory-goto" id="ref-for-dom-apphistory-goto③">appHistory.goTo(key)</a></code>. </p>
    <dt><code><var>entry</var>.<code class="idl"><a data-link-type="idl" href="#dom-apphistoryentry-id" id="ref-for-dom-apphistoryentry-id②">id</a></code></code> 
    <dd>
     <p>A <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent" id="ref-for-user-agent①">user agent</a>-generated random UUID string representing this specific app history entry. This value will <em>not</em> be reused by other <code class="idl"><a data-link-type="idl" href="#apphistoryentry" id="ref-for-apphistoryentry①⑥">AppHistoryEntry</a></code> instances. This value will survive session restores. </p>
     <p>This is useful for associating data with this app history entry using other storage APIs. </p>
    <dt><code><var>entry</var>.<code class="idl"><a data-link-type="idl" href="#dom-apphistoryentry-index" id="ref-for-dom-apphistoryentry-index②">index</a></code></code> 
    <dd>
     <p>The index of this app history entry within <code class="idl"><a data-link-type="idl" href="#dom-apphistory-entries" id="ref-for-dom-apphistory-entries③">appHistory.entries()</a></code>, or −1 if the entry is not in the app history list. </p>
    <dt><code><var>entry</var>.<code class="idl"><a data-link-type="idl" href="#dom-apphistoryentry-samedocument" id="ref-for-dom-apphistoryentry-samedocument①">sameDocument</a></code></code> 
    <dd>
     <p>Indicates whether or not this app history entry is for the same <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑥">Document</a></code> as the current <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/window-object.html#dom-document-2" id="ref-for-dom-document-2①">document</a></code> value, or not. This will be true, for example, when the entry represents a fragment navigation or single-page app navigations. </p>
    <dt><code><var>state</var> = <var>entry</var>.<code class="idl"><a data-link-type="idl" href="#dom-apphistoryentry-getstate" id="ref-for-dom-apphistoryentry-getstate②">getState</a></code>()</code> 
    <dd>
     <p>Returns the deserialization of the state stored in this entry, which was added to the entry using <code class="idl"><a data-link-type="idl" href="#dom-apphistory-navigate" id="ref-for-dom-apphistory-navigate⑨">appHistory.navigate()</a></code>. This state survives session restores. </p>
     <p>Note that in general, unless the state value is a primitive, <code>entry.getState() !== entry.getState()</code>, since a fresh copy is returned each time. </p>
     <p>This state is unrelated to the classic history API’s <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/history.html#dom-history-state" id="ref-for-dom-history-state">history.state</a></code>. </p>
   </dl>
   <p>Each <code class="idl"><a data-link-type="idl" href="#apphistoryentry" id="ref-for-apphistoryentry①⑦">AppHistoryEntry</a></code> has an associated <dfn class="dfn-paneled" data-dfn-for="AppHistoryEntry" data-dfn-type="dfn" data-noexport id="apphistoryentry-session-history-entry">session history entry</dfn>, which is a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#session-history-entry" id="ref-for-session-history-entry⑥">session history entry</a>.</p>
   <p>Each <code class="idl"><a data-link-type="idl" href="#apphistoryentry" id="ref-for-apphistoryentry①⑧">AppHistoryEntry</a></code> has an associated <dfn class="dfn-paneled" data-dfn-for="AppHistoryEntry" data-dfn-type="dfn" data-noexport id="apphistoryentry-index">index</dfn>, which is an integer.</p>
   <div class="algorithm" data-algorithm="key" data-algorithm-for="AppHistoryEntry">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryEntry" data-dfn-type="attribute" data-export id="dom-apphistoryentry-key"><code>key</code></dfn> getter steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this⑤①">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global②②">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#concept-document-window" id="ref-for-concept-document-window①③">associated Document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active⑨">fully active</a>, then return the empty string.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this⑤②">this</a>'s <a data-link-type="dfn" href="#apphistoryentry-session-history-entry" id="ref-for-apphistoryentry-session-history-entry⑦">session history entry</a>'s <a data-link-type="dfn" href="#session-history-entry-app-history-key" id="ref-for-session-history-entry-app-history-key⑦">app history key</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="id" data-algorithm-for="AppHistoryEntry">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryEntry" data-dfn-type="attribute" data-export id="dom-apphistoryentry-id"><code>id</code></dfn> getter steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this⑤③">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global②③">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#concept-document-window" id="ref-for-concept-document-window①④">associated Document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active①⓪">fully active</a>, then return the empty string.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this⑤④">this</a>'s <a data-link-type="dfn" href="#apphistoryentry-session-history-entry" id="ref-for-apphistoryentry-session-history-entry⑧">session history entry</a>'s <a data-link-type="dfn" href="#session-history-entry-app-history-id" id="ref-for-session-history-entry-app-history-id①">app history id</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="url" data-algorithm-for="AppHistoryEntry">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryEntry" data-dfn-type="attribute" data-export id="dom-apphistoryentry-url"><code>url</code></dfn> getter steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this⑤⑤">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global②④">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#concept-document-window" id="ref-for-concept-document-window①⑤">associated Document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active①①">fully active</a>, then return the empty string.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this⑤⑥">this</a>'s <a data-link-type="dfn" href="#apphistoryentry-session-history-entry" id="ref-for-apphistoryentry-session-history-entry⑨">session history entry</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#she-url" id="ref-for-she-url①">URL</a>, <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-serializer" id="ref-for-concept-url-serializer①">serialized</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="index" data-algorithm-for="AppHistoryEntry">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryEntry" data-dfn-type="attribute" data-export id="dom-apphistoryentry-index"><code>index</code></dfn> getter steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this⑤⑦">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global②⑤">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#concept-document-window" id="ref-for-concept-document-window①⑥">associated Document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active①②">fully active</a>, then return −1.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this⑤⑧">this</a>'s <a data-link-type="dfn" href="#apphistoryentry-index" id="ref-for-apphistoryentry-index②">index</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="sameDocument" data-algorithm-for="AppHistoryEntry">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryEntry" data-dfn-type="attribute" data-export id="dom-apphistoryentry-samedocument"><code>sameDocument</code></dfn> getter steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this⑤⑨">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global②⑥">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#concept-document-window" id="ref-for-concept-document-window①⑦">associated Document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active①③">fully active</a>, then return false.</p>
     <li data-md>
      <p>Return true if <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this⑥⓪">this</a>'s <a data-link-type="dfn" href="#apphistoryentry-session-history-entry" id="ref-for-apphistoryentry-session-history-entry①⓪">session history entry</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#she-document" id="ref-for-she-document①">document</a> equals <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this⑥①">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global②⑦">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#concept-document-window" id="ref-for-concept-document-window①⑧">associated Document</a>, and false otherwise.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="getState()" data-algorithm-for="AppHistoryEntry">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="AppHistoryEntry" data-dfn-type="method" data-export id="dom-apphistoryentry-getstate"><code>getState()</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this⑥②">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global②⑧">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#concept-document-window" id="ref-for-concept-document-window①⑨">associated Document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active①④">fully active</a>, then return undefined.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this⑥③">this</a>'s <a data-link-type="dfn" href="#apphistoryentry-session-history-entry" id="ref-for-apphistoryentry-session-history-entry①①">session history entry</a>'s <a data-link-type="dfn" href="#session-history-entry-app-history-state" id="ref-for-session-history-entry-app-history-state⑤">app history state</a> is null, then return undefined.</p>
     <li data-md>
      <p>Return <a data-link-type="abstract-op" href="https://html.spec.whatwg.org/multipage/structured-data.html#structureddeserialize" id="ref-for-structureddeserialize①">StructuredDeserialize</a>(<a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this⑥④">this</a>'s <a data-link-type="dfn" href="#apphistoryentry-session-history-entry" id="ref-for-apphistoryentry-session-history-entry①②">session history entry</a>'s <a data-link-type="dfn" href="#session-history-entry-app-history-state" id="ref-for-session-history-entry-app-history-state⑥">app history state</a>).</p>
    </ol>
    <p class="note" role="note">Unlike <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/history.html#dom-history-state" id="ref-for-dom-history-state①">history.state</a></code>, this will deserialize upon each access. </p>
    <p class="note" role="note">This can in theory throw an exception, if attempting to deserialize a large <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-ArrayBuffer" id="ref-for-idl-ArrayBuffer">ArrayBuffer</a></code> when not enough memory is available. </p>
   </div>
   <h2 class="heading settled" data-level="4" id="navigate-patches"><span class="secno">4. </span><span class="content">Patches to fire the <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigate" id="ref-for-eventdef-apphistory-navigate①⑧">navigate</a></code> event</span><a class="self-link" href="#navigate-patches"></a></h2>
   <p>The following section details monkeypatches to <a data-link-type="biblio" href="#biblio-html">[HTML]</a> that cause the <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigate" id="ref-for-eventdef-apphistory-navigate①⑨">navigate</a></code> event to be fired appropriately, and for canceling the event to cancel the navigation. The first few sections detail slight tweaks to existing algorithms to pass through useful information into the navigation and history traversal algorithms. Then, <a href="#navigate-algorithm-patches">§ 4.3 Navigation algorithm updates</a> contains the actual firing of the event.</p>
   <h3 class="heading settled" data-level="4.1" id="form-patches"><span class="secno">4.1. </span><span class="content">Form submission patches</span><a class="self-link" href="#form-patches"></a></h3>
   <p>To properly thread the form entry list from its creation through to <code class="idl"><a data-link-type="idl" href="#apphistorynavigateevent" id="ref-for-apphistorynavigateevent⑨">AppHistoryNavigateEvent</a></code>'s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-formdata" id="ref-for-dom-apphistorynavigateevent-formdata③">formData</a></code> property, we need the following modifications:</p>
   <div class="algorithm" data-algorithm="form navigate">
     Modify the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate②">navigate</a> algorithm to take a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list④">list</a> of <a data-link-type="dfn" href="https://xhr.spec.whatwg.org/#concept-formdata-entry" id="ref-for-concept-formdata-entry②">entries</a> or null <dfn class="dfn-paneled" data-dfn-for="navigate" data-dfn-type="dfn" data-noexport id="navigate-entrylist"><var>entryList</var></dfn> (default null), replacing its <var>navigationType</var> parameter. Then insert a step somewhere early in the algorithm to convert this back into the <var>navigationType</var> variable used by the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel">in parallel</a> section that is ultimately passed to <a data-link-type="biblio" href="#biblio-csp">[CSP]</a>: 
    <ol>
     <li data-md>
      <p>Let <var>navigationType</var> be "<code>form-submission</code>" if <var>entryList</var> is non-null; otherwise, "<code>other</code>".</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="plan to navigate">
     Modify the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#plan-to-navigate" id="ref-for-plan-to-navigate">plan to navigate</a> algorithm to take an additional optional argument <var>entryList</var> (default null). Then, modify the step which calls <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate③">navigate</a> to pass it along: 
    <ol>
     <li data-md>
      <p>
       <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate④">Navigate</a> <var>target browsing context</var> to <var>destination</var>, with <i><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigation-hh" id="ref-for-navigation-hh①">historyHandling</a></i> set to <var>historyHandling</var> 
       <del>and <i><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigation-navigationtype" id="ref-for-navigation-navigationtype">navigationType</a></i> set to "<code>form-submission</code>"</del>
       <ins><i><a data-link-type="dfn" href="#navigate-entrylist" id="ref-for-navigate-entrylist">entryList</a></i> set to <var>entryList</var></ins>
       .
      </p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="submit as entity body"> Modify the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#submit-body" id="ref-for-submit-body">submit as entity body</a> algorithm to pass <var>entry list</var> along to <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#plan-to-navigate" id="ref-for-plan-to-navigate①">plan to navigate</a> as a second argument. </div>
   <h3 class="heading settled" data-level="4.2" id="user-initiated-patches"><span class="secno">4.2. </span><span class="content">Browser UI/user-initiated patches</span><a class="self-link" href="#user-initiated-patches"></a></h3>
   <p>To more rigorously specify when a navigation is initiated from browser UI or by the user interacting with <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-a-element" id="ref-for-the-a-element①">a</a></code>, <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/image-maps.html#the-area-element" id="ref-for-the-area-element">area</a></code>, and <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/forms.html#the-form-element" id="ref-for-the-form-element①">form</a></code> elements, both for the purposes of the <code class="idl"><a data-link-type="idl" href="#apphistorynavigateevent" id="ref-for-apphistorynavigateevent①⓪">AppHistoryNavigateEvent</a></code>'s <code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigateevent-userinitiated" id="ref-for-dom-apphistorynavigateevent-userinitiated③">userInitiated</a></code> property and for prohibiting interception of certain types of browser-UI-initiated navigations, we need the following modifications:</p>
   <p>Introduce (right before the definition of the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate⑤">navigate</a> algorithm) the concept of a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="user-navigation-involvement">user navigation involvement</dfn>, which is one of the following:</p>
   <dl>
    <dt data-md>"<dfn class="dfn-paneled" data-dfn-for="user navigation involvement" data-dfn-type="dfn" data-noexport id="user-navigation-involvement-browser-ui"><code>browser UI</code></dfn>"
    <dd data-md>
     <p>The navigation was initiated by the user via browser UI mechanisms</p>
    <dt data-md>"<dfn class="dfn-paneled" data-dfn-for="user navigation involvement" data-dfn-type="dfn" data-noexport id="user-navigation-involvement-activation"><code>activation</code></dfn>"
    <dd data-md>
     <p>The navigation was initiated by the user via the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#eventtarget-activation-behavior" id="ref-for-eventtarget-activation-behavior">activation behavior</a> of an element</p>
    <dt data-md>"<dfn class="dfn-paneled" data-dfn-for="user navigation involvement" data-dfn-type="dfn" data-noexport id="user-navigation-involvement-none"><code>none</code></dfn>"
    <dd data-md>
     <p>The navigation was not initiated by the user</p>
   </dl>
   <p>Define the <dfn class="dfn-paneled" data-dfn-for="Event" data-dfn-type="dfn" data-noexport id="event-user-navigation-involvement">user navigation involvement</dfn> for an <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event①">Event</a></code> <var>event</var> as "<code><a data-link-type="dfn" href="#user-navigation-involvement-activation" id="ref-for-user-navigation-involvement-activation">activation</a></code>" if <var>event</var>’s <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-istrusted" id="ref-for-dom-event-istrusted②">isTrusted</a></code> attribute is initialized to true, and "<code><a data-link-type="dfn" href="#user-navigation-involvement-none" id="ref-for-user-navigation-involvement-none④">none</a></code>" otherwise.</p>
   <p>Modify the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate⑥">navigate</a> algorithm to take an optional named argument <dfn class="dfn-paneled" data-dfn-for="navigate" data-dfn-type="dfn" data-noexport id="navigate-userinvolvement"><var>userInvolvement</var></dfn> (default "<code><a data-link-type="dfn" href="#user-navigation-involvement-none" id="ref-for-user-navigation-involvement-none⑤">none</a></code>"). Then, update the paragraph talking about browser-UI initiated navigation as follows:</p>
   <blockquote>
     A user agent may provide various ways for the user to explicitly cause a browsing context to <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate⑦">navigate</a>, in addition to those defined in this specification.
    <ins> Such cases must set the <i><a data-link-type="dfn" href="#navigate-userinvolvement" id="ref-for-navigate-userinvolvement">userInvolvement</a></i> argument to "<code><a data-link-type="dfn" href="#user-navigation-involvement-browser-ui" id="ref-for-user-navigation-involvement-browser-ui①">browser UI</a></code>".</ins>
   </blockquote>
   <p class="note" role="note">This infrastructure partially solves <a href="https://github.com/whatwg/html/issues/5381">whatwg/html#5381</a>, and it’d be ideal to update the `<a data-link-type="http-header" href="https://w3c.github.io/webappsec-fetch-metadata/#http-headerdef-sec-fetch-site" id="ref-for-http-headerdef-sec-fetch-site"><code>Sec-Fetch-Site</code></a>` spec at the same time.</p>
   <p>Modify the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate-fragid" id="ref-for-navigate-fragid②">navigate to a fragment</a> algorithm to take a new <var>userInvolvement</var> argument. Then, update the call to it from <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate⑧">navigate</a> to set <i><a data-link-type="dfn" href="#navigate-userinvolvement" id="ref-for-navigate-userinvolvement①">userInvolvement</a></i> to this <var>userInvolvement</var> value.</p>
   <p>Modify the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#traverse-the-history-by-a-delta" id="ref-for-traverse-the-history-by-a-delta">traverse the history by a delta</a> argument to take an optional named argument <dfn class="dfn-paneled" data-dfn-for="traverse the history by a delta" data-dfn-type="dfn" data-noexport id="traverse-the-history-by-a-delta-userinvolvement"><var>userInvolvement</var></dfn> (default "<code><a data-link-type="dfn" href="#user-navigation-involvement-none" id="ref-for-user-navigation-involvement-none⑥">none</a></code>"). Then, update the paragraph talking about user-initiated navigation as follows:</p>
   <blockquote>
     When the user navigates through a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context" id="ref-for-browsing-context①">browsing context</a>, e.g. using a browser’s back and forward buttons, the user agent must <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#traverse-the-history-by-a-delta" id="ref-for-traverse-the-history-by-a-delta①">traverse the history by a delta</a> with a delta equivalent to the action specified by the user
    <del> and</del>
    <ins>,</ins>
     the browsing context being operated on
    <ins>, and <i><a data-link-type="dfn" href="#traverse-the-history-by-a-delta-userinvolvement" id="ref-for-traverse-the-history-by-a-delta-userinvolvement">userInvolvement</a></i> set to "<code><a data-link-type="dfn" href="#user-navigation-involvement-browser-ui" id="ref-for-user-navigation-involvement-browser-ui②">browser UI</a></code>"</ins>
    . 
   </blockquote>
   <hr>
   <p>Modify the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/links.html#following-hyperlinks-2" id="ref-for-following-hyperlinks-2">follow the hyperlink</a> algorithm to take a new <var>userInvolvement</var> argument. Then, update the call to it from <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate⑨">navigate</a> to set <i><a data-link-type="dfn" href="#navigate-userinvolvement" id="ref-for-navigate-userinvolvement②">userInvolvement</a></i> to this <var>userInvolvement</var> value.</p>
   <div class="algorithm" data-algorithm="area activation behavior">
     Modify the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#eventtarget-activation-behavior" id="ref-for-eventtarget-activation-behavior①">activation behavior</a> of <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/image-maps.html#the-area-element" id="ref-for-the-area-element①">area</a></code> elements by introducing the <var>event</var> argument and replacing the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/links.html#following-hyperlinks-2" id="ref-for-following-hyperlinks-2①">follow the hyperlink</a> step with the following: 
    <ol>
     <li data-md>
      <p>Otherwise, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/links.html#following-hyperlinks-2" id="ref-for-following-hyperlinks-2②">follow the hyperlink</a> created by <var>element</var> with the <a data-link-type="dfn" href="#event-user-navigation-involvement" id="ref-for-event-user-navigation-involvement">user navigation involvement</a> for <var>event</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="a activation behavior">
     Modify the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#eventtarget-activation-behavior" id="ref-for-eventtarget-activation-behavior②">activation behavior</a> of <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-a-element" id="ref-for-the-a-element②">a</a></code> elements by replacing its <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/links.html#following-hyperlinks-2" id="ref-for-following-hyperlinks-2③">follow the hyperlink</a> step with the following: 
    <ol>
     <li data-md>
      <p>Otherwise, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/links.html#following-hyperlinks-2" id="ref-for-following-hyperlinks-2④">follow the hyperlink</a> created by <var>element</var> with the <a data-link-type="dfn" href="#event-user-navigation-involvement" id="ref-for-event-user-navigation-involvement①">user navigation involvement</a> for <var>event</var>.</p>
    </ol>
   </div>
   <p>Expand the section on "<a href="https://html.spec.whatwg.org/multipage/semantics.html#providing-users-with-a-means-to-follow-hyperlinks-created-using-the-link-element">Providing users with a means to follow hyperlinks created using the <code>link</code> element</a>" by adding the following sentence:</p>
   <blockquote>
    <ins>Such invocations of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/links.html#following-hyperlinks-2" id="ref-for-following-hyperlinks-2⑤">follow the hyperlink</a> algorithm must set the <i><a data-link-type="dfn" href="#navigate-userinvolvement" id="ref-for-navigate-userinvolvement③">userInvolvement</a></i> argument to "<code><a data-link-type="dfn" href="#user-navigation-involvement-browser-ui" id="ref-for-user-navigation-involvement-browser-ui③">browser UI</a></code>".</ins>
   </blockquote>
   <hr>
   <p>Modify the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#plan-to-navigate" id="ref-for-plan-to-navigate②">plan to navigate</a> algorithm to take a <var>userInvolvement</var> argument. Then, update the call to it from <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate①⓪">navigate</a> to set <i><a data-link-type="dfn" href="#navigate-userinvolvement" id="ref-for-navigate-userinvolvement④">userInvolvement</a></i> to this <var>userInvolvement</var> value.</p>
   <p>Modify the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#concept-form-submit" id="ref-for-concept-form-submit①">submit</a> algorithm to take an optional <var>userInvolvement</var> argument (default "<code><a data-link-type="dfn" href="#user-navigation-involvement-none" id="ref-for-user-navigation-involvement-none⑦">none</a></code>").  Have the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#concept-form-submit" id="ref-for-concept-form-submit②">submit</a> algorithm pass along its value to all invocations of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#plan-to-navigate" id="ref-for-plan-to-navigate③">plan to navigate</a>.</p>
   <p>Modify the definition of the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#eventtarget-activation-behavior" id="ref-for-eventtarget-activation-behavior③">activation behavior</a> for <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/input.html#the-input-element" id="ref-for-the-input-element">input</a></code> elements to take an <var>event</var> argument. Then, pass along this argument to the invocation of the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/input.html#input-activation-behavior" id="ref-for-input-activation-behavior">input activation behavior</a>.</p>
   <p>Modify the Submit Button state’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/input.html#input-activation-behavior" id="ref-for-input-activation-behavior①">input activation behavior</a> by having it take an <var>event<var> argument and pass along the <a data-link-type="dfn" href="#event-user-navigation-involvement" id="ref-for-event-user-navigation-involvement②">user navigation involvement</a> for <var>event</var> as the final argument when it calls <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#concept-form-submit" id="ref-for-concept-form-submit③">submit</a>.</var></var></p>
   <p>Modify the Image Button state’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/input.html#input-activation-behavior" id="ref-for-input-activation-behavior②">input activation behavior</a> by having it take an <var>event<var> argument and pass along the <a data-link-type="dfn" href="#event-user-navigation-involvement" id="ref-for-event-user-navigation-involvement③">user navigation involvement</a> for <var>event</var> as the final argument when it calls <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#concept-form-submit" id="ref-for-concept-form-submit④">submit</a>.</var></var></p>
   <p>Modify the <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/form-elements.html#the-button-element" id="ref-for-the-button-element">button</a></code> element’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#eventtarget-activation-behavior" id="ref-for-eventtarget-activation-behavior④">activation behavior</a> by having it take an <var>event</var> argument and, in the Submit Button case, to pass along the <a data-link-type="dfn" href="#event-user-navigation-involvement" id="ref-for-event-user-navigation-involvement④">user navigation involvement</a> for <var>event</var> as the final argument when it calls <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#concept-form-submit" id="ref-for-concept-form-submit⑤">submit</a>.</p>
   <p>Modify the no-<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/forms.html#concept-submit-button" id="ref-for-concept-submit-button">submit button</a> case for <a href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#implicit-submission">implicit form submission</a> to pass along "<code><a data-link-type="dfn" href="#user-navigation-involvement-activation" id="ref-for-user-navigation-involvement-activation①">activation</a></code>" as the final argument when it calls <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#concept-form-submit" id="ref-for-concept-form-submit⑥">submit</a>.</p>
   <p class="note" role="note">The case of implicit submission when a submit button is present is automatically taken care of because it fires a (trusted) click event at the submit button.</p>
   <h3 class="heading settled" data-level="4.3" id="navigate-algorithm-patches"><span class="secno">4.3. </span><span class="content">Navigation algorithm updates</span><a class="self-link" href="#navigate-algorithm-patches"></a></h3>
   <p>With the above infrastructure in place, we can actually fire and handle the <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigate" id="ref-for-eventdef-apphistory-navigate②⓪">navigate</a></code> event in the following locations:</p>
   <div class="algorithm" data-algorithm="shared history push/replace steps">
     Modify the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#shared-history-push/replace-state-steps" id="ref-for-shared-history-push/replace-state-steps">shared history push/replace state steps</a> by inserting the following steps right before the step that runs the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#url-and-history-update-steps" id="ref-for-url-and-history-update-steps②">URL and history update steps</a>. 
    <ol>
     <li data-md>
      <p>Let <var>appHistory</var> be <var>history</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global②⑨">relevant global object</a>'s <a data-link-type="dfn" href="#window-app-history" id="ref-for-window-app-history②">app history</a>.</p>
     <li data-md>
      <p>Let <var>navigationType</var> be "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-push" id="ref-for-dom-apphistorynavigationtype-push④">push</a></code>" if <var>isPush</var> is true, and "<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-replace" id="ref-for-dom-apphistorynavigationtype-replace③">replace</a></code>" otherwise.</p>
     <li data-md>
      <p>Let <var>continue</var> be the result of <a data-link-type="dfn" href="#fire-a-push-or-replace-navigate-event" id="ref-for-fire-a-push-or-replace-navigate-event">firing a push or replace navigate event</a> at <var>appHistory</var> with <i><a data-link-type="dfn" href="#fire-a-push-or-replace-navigate-event-navigationtype" id="ref-for-fire-a-push-or-replace-navigate-event-navigationtype">navigationType</a></i> set to <var>navigationType</var>, <i><a data-link-type="dfn" href="#fire-a-push-or-replace-navigate-event-issamedocument" id="ref-for-fire-a-push-or-replace-navigate-event-issamedocument">isSameDocument</a></i> set to true, <i><a data-link-type="dfn" href="#fire-a-push-or-replace-navigate-event-destinationurl" id="ref-for-fire-a-push-or-replace-navigate-event-destinationurl">destinationURL</a></i> set to <var>newURL</var>, and <i><a data-link-type="dfn" href="#fire-a-push-or-replace-navigate-event-classichistoryapiserializeddata" id="ref-for-fire-a-push-or-replace-navigate-event-classichistoryapiserializeddata">classicHistoryAPISerializedData</a></i> set to <var>serializedData</var>.</p>
     <li data-md>
      <p>If <var>continue</var> is false, return.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="navigate to a fragment">
     Modify the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate-fragid" id="ref-for-navigate-fragid③">navigate to a fragment</a> algorithm by prepending the following steps. Recall that per <a href="#user-initiated-patches">§ 4.2 Browser UI/user-initiated patches</a> we have introduced a <var>userInvolvement</var> argument. 
    <ol>
     <li data-md>
      <p>Let <var>appHistory</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#current-entry" id="ref-for-current-entry④">current entry</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#she-document" id="ref-for-she-document②">document</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global③⓪">relevant global object</a>'s <a data-link-type="dfn" href="#window-app-history" id="ref-for-window-app-history③">app history</a>.</p>
     <li data-md>
      <p>Let <var>navigationType</var> be the result of <a data-link-type="dfn" href="#convert-a-history-handling-behavior-to-a-navigation-type" id="ref-for-convert-a-history-handling-behavior-to-a-navigation-type">converting a history handling behavior to a navigation type</a> given <var>historyHandling</var>.</p>
     <li data-md>
      <p>Let <var>continue</var> be the result of <a data-link-type="dfn" href="#fire-a-push-or-replace-navigate-event" id="ref-for-fire-a-push-or-replace-navigate-event①">firing a push or replace navigate event</a> at <var>appHistory</var> given with <i><a data-link-type="dfn" href="#fire-a-push-or-replace-navigate-event-navigationtype" id="ref-for-fire-a-push-or-replace-navigate-event-navigationtype①">navigationType</a></i> set to <var>navigationType</var>, <i><a data-link-type="dfn" href="#fire-a-push-or-replace-navigate-event-issamedocument" id="ref-for-fire-a-push-or-replace-navigate-event-issamedocument①">isSameDocument</a></i> set to true, <i><a data-link-type="dfn" href="#fire-a-push-or-replace-navigate-event-userinvolvement" id="ref-for-fire-a-push-or-replace-navigate-event-userinvolvement">userInvolvement</a></i> set to <var>userInvolvement</var>, and <i><a data-link-type="dfn" href="#fire-a-push-or-replace-navigate-event-destinationurl" id="ref-for-fire-a-push-or-replace-navigate-event-destinationurl①">destinationURL</a></i> set to <var>url</var>.</p>
     <li data-md>
      <p>If <var>continue</var> is false, return.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="navigate" id="navigate-modifications">
     Modify the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate①①">navigate</a> algorithm to take an optional <dfn class="dfn-paneled" data-dfn-for="navigate" data-dfn-type="dfn" data-noexport id="navigate-apphistorystate"><var>appHistoryState</var></dfn> argument (default null). Then, insert the following steps right before the step which goes <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel①">in parallel</a>. (Recall that per <a href="#user-initiated-patches">§ 4.2 Browser UI/user-initiated patches</a> we have introduced <var>userInvolvement</var> argument, and per <a href="#form-patches">§ 4.1 Form submission patches</a> we have introduced an <var>entryList</var> argument.) 
    <ol>
     <li data-md>
      <p>Let <var>appHistory</var> be <var>browsingContext</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#active-window" id="ref-for-active-window①">active window</a>'s <a data-link-type="dfn" href="#window-app-history" id="ref-for-window-app-history④">app history</a>.</p>
     <li data-md>
      <p>If none of the following are true:</p>
      <ul>
       <li data-md>
        <p><var>historyHandling</var> is "<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#hh-entry-update" id="ref-for-hh-entry-update①"><code>entry update</code></a>"</p>
       <li data-md>
        <p><var>userInvolvement</var> is "<code><a data-link-type="dfn" href="#user-navigation-involvement-browser-ui" id="ref-for-user-navigation-involvement-browser-ui④">browser UI</a></code>"</p>
       <li data-md>
        <p><var>browsingContext</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#active-document" id="ref-for-active-document③">active document</a>'s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-origin" id="ref-for-concept-document-origin">origin</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#same-origin-domain" id="ref-for-same-origin-domain①">same origin-domain</a> with the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#source-browsing-context" id="ref-for-source-browsing-context②">source browsing context</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#active-document" id="ref-for-active-document④">active document</a>'s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-origin" id="ref-for-concept-document-origin①">origin</a></p>
       <li data-md>
        <p><var>browsingContext</var>’s only entry in its <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#session-history" id="ref-for-session-history②">session history</a> is the <code>about:blank</code> <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑦">Document</a></code> that was added when <var>browsingContext</var> was <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#creating-a-new-browsing-context" id="ref-for-creating-a-new-browsing-context">created</a></p>
      </ul>
      <p>then:</p>
      <ol>
       <li data-md>
        <p>Let <var>navigationType</var> be the result of <a data-link-type="dfn" href="#convert-a-history-handling-behavior-to-a-navigation-type" id="ref-for-convert-a-history-handling-behavior-to-a-navigation-type①">converting a history handling behavior to a navigation type</a> given <var>historyHandling</var>.</p>
       <li data-md>
        <p>Let <var>continue</var> be the result of <a data-link-type="dfn" href="#fire-a-push-or-replace-navigate-event" id="ref-for-fire-a-push-or-replace-navigate-event②">firing a push or replace navigate event</a> at <var>appHistory</var> with <i><a data-link-type="dfn" href="#fire-a-push-or-replace-navigate-event-navigationtype" id="ref-for-fire-a-push-or-replace-navigate-event-navigationtype②">navigationType</a></i> set to <var>navigationType</var>, <i><a data-link-type="dfn" href="#fire-a-push-or-replace-navigate-event-issamedocument" id="ref-for-fire-a-push-or-replace-navigate-event-issamedocument②">isSameDocument</a></i> set to false, <i><a data-link-type="dfn" href="#fire-a-push-or-replace-navigate-event-userinvolvement" id="ref-for-fire-a-push-or-replace-navigate-event-userinvolvement①">userInvolvement</a></i> set to <var>userInvolvement</var>, <i><a data-link-type="dfn" href="#fire-a-push-or-replace-navigate-event-formdataentrylist" id="ref-for-fire-a-push-or-replace-navigate-event-formdataentrylist">formDataEntryList</a></i> set to <var>entryList</var>, <i><a data-link-type="dfn" href="#fire-a-push-or-replace-navigate-event-destinationurl" id="ref-for-fire-a-push-or-replace-navigate-event-destinationurl②">destinationURL</a></i> set to <var>url</var>, and <i><a data-link-type="dfn" href="#fire-a-push-or-replace-navigate-event-state" id="ref-for-fire-a-push-or-replace-navigate-event-state">state</a></i> set to <var>appHistoryState</var>.</p>
       <li data-md>
        <p>If <var>continue</var> is false, return.</p>
      </ol>
      <p class="note" role="note">"<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#hh-entry-update" id="ref-for-hh-entry-update②"><code>entry update</code></a>" is excluded since <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigate" id="ref-for-eventdef-apphistory-navigate②①">navigate</a></code> would have fired earlier as part of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#traverse-the-history-by-a-delta" id="ref-for-traverse-the-history-by-a-delta②">traversing the history by a delta</a>. </p>
      <p class="note" role="note">"<code><a data-link-type="dfn" href="#user-navigation-involvement-browser-ui" id="ref-for-user-navigation-involvement-browser-ui⑤">browser UI</a></code>" or <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#same-origin-domain" id="ref-for-same-origin-domain②">cross origin-domain</a> navigations that cause <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate-fragid" id="ref-for-navigate-fragid④">fragment navigations</a> <em>do</em> fire the <code class="idl"><a data-link-type="idl" href="#eventdef-apphistory-navigate" id="ref-for-eventdef-apphistory-navigate②②">navigate</a></code> event; those are handled as part of the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate-fragid" id="ref-for-navigate-fragid⑤">navigate to a fragment</a> algorithm called earlier in <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate①②">navigate</a>, which is not guarded by this condition. </p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="convert a history handling behavior to a navigation type">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="convert-a-history-handling-behavior-to-a-navigation-type">convert a history handling behavior to a navigation type</dfn> given a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#history-handling-behavior" id="ref-for-history-handling-behavior①">history handling behavior</a> <var>historyHandling</var>: 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert③">Assert</a>: <var>historyHandling</var> is not "<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#hh-entry-update" id="ref-for-hh-entry-update③"><code>entry update</code></a>".</p>
     <li data-md>
      <p>Return the result of switching on <var>historyHandling</var>:</p>
      <dl class="switch">
       <dt data-md>"<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#hh-reload" id="ref-for-hh-reload②"><code>reload</code></a>"
       <dd data-md>
        <p>"<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-reload" id="ref-for-dom-apphistorynavigationtype-reload③">reload</a></code>"</p>
       <dt data-md>"<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#hh-replace" id="ref-for-hh-replace②"><code>replace</code></a>"
       <dd data-md>
        <p>"<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-replace" id="ref-for-dom-apphistorynavigationtype-replace④">replace</a></code>"</p>
       <dt data-md>"<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#hh-default" id="ref-for-hh-default②"><code>default</code></a>"
       <dd data-md>
        <p>"<code class="idl"><a data-link-type="idl" href="#dom-apphistorynavigationtype-push" id="ref-for-dom-apphistorynavigationtype-push⑤">push</a></code>"</p>
      </dl>
    </ol>
   </div>
   <h3 class="heading settled" data-level="4.4" id="navigate-event-traversal-patches"><span class="secno">4.4. </span><span class="content">History traversal updates</span><a class="self-link" href="#navigate-event-traversal-patches"></a></h3>
   <div class="algorithm" data-algorithm="traverse the history by a delta">
     The <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#traverse-the-history-by-a-delta" id="ref-for-traverse-the-history-by-a-delta③">traverse the history by a delta</a> algorithm will be totally re-written as part of <a href="https://github.com/whatwg/html/pull/6315">the session history rewrite</a>. Here we reproduce the final version of the algorithm, after both that rewrite and with appropriate app history updates. Recall that per <a href="#user-initiated-patches">§ 4.2 Browser UI/user-initiated patches</a> we have introduced a <var>userInvolvement</var> argument, so the arguments are now <var>delta</var>, <var>source browsing context</var>, and <var>userInvolvement</var>. 
    <ol>
     <li data-md>
      <p>Let <var>traversable</var> be <var>source browsing context</var>’s <a data-link-type="dfn" href="https://whatpr.org/html/6315/browsers.html#bc-navigable" id="ref-for-bc-navigable①">containing navigable</a>'s <a data-link-type="dfn" href="https://whatpr.org/html/6315/history.html#nav-traversable" id="ref-for-nav-traversable①">traversable navigable</a>.</p>
     <li data-md>
      <p>Let <var>initiatorOrigin</var> be <var>source browsing context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#active-document" id="ref-for-active-document⑤">active document</a>'s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-origin" id="ref-for-concept-document-origin②">origin</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#enqueue-the-following-steps" id="ref-for-enqueue-the-following-steps①">Enqueue the following steps</a> to <var>traversable</var>’s <a data-link-type="dfn" href="https://whatpr.org/html/6315/history.html#tn-session-history-traversal-queue" id="ref-for-tn-session-history-traversal-queue②">session history traversal queue</a>:</p>
      <ol>
       <li data-md>
        <p>Let <var>allSteps</var> be the result of <a data-link-type="dfn" href="https://whatpr.org/html/6315/history.html#getting-all-history-steps" id="ref-for-getting-all-history-steps①">getting all history steps</a> for <var>traversable</var>.</p>
       <li data-md>
        <p>Let <var>currentStepIndex</var> be the index of the <a data-link-type="dfn" href="https://whatpr.org/html/6315/history.html#tn-current-session-history-step" id="ref-for-tn-current-session-history-step①">current session history step</a> within <var>allSteps</var>.</p>
       <li data-md>
        <p>Let <var>targetStepIndex</var> be <var>currentStepIndex</var> plus <var>delta</var>.</p>
       <li data-md>
        <p>If <var>allSteps</var>[<var>targetStepIndex</var>] does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain①">exist</a>, then return.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://whatpr.org/html/6315/history.html#apply-the-history-step" id="ref-for-apply-the-history-step②">Apply the history step</a> <var>allSteps</var>[<var>targetStepIndex</var>] to <var>traversable</var> with true, <var>step</var>, <var>initiatorOrigin</var>, and <var>userInvolvement</var>.</p>
      </ol>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="apply the history step">
     Modify the <a data-link-type="dfn" href="https://whatpr.org/html/6315/history.html#apply-the-history-step" id="ref-for-apply-the-history-step③">apply the history step</a> algorithm as follows. Change <var>checkForUserCancellation</var> to <var>fireBeforeunloadAndNavigate</var>. Add the <var>userInvolvement</var> parameter. Then, insert the following step after step 12 (which assembles <var>toTraverse</var> and other lists) but before step 13 (which checks if unloading is user-cancelled): 
    <ol>
     <li data-md>
      <p>If <var>fireBeforeunloadAndNavigate</var> is true and the result of <a data-link-type="dfn" href="#fire-traversal-navigate-events" id="ref-for-fire-traversal-navigate-events">firing traversal <code>navigate</code> events</a> given <var>toTraverse</var>, <var>step</var>, <var>initiatorToCheck</var>, and <var>userInvolvement</var> is false, then return.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="fire traversal navigate events">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="fire-traversal-navigate-events">fire traversal <code>navigate</code> events</dfn> for a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list⑤">list</a> of <a data-link-type="dfn" href="https://whatpr.org/html/6315/history.html#navigable" id="ref-for-navigable">navigables</a> <var>toTraverse</var>, an integer <var>step</var>, an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#concept-origin" id="ref-for-concept-origin">origin</a> <var>initiatorOrigin</var>, and a <a data-link-type="dfn" href="#user-navigation-involvement" id="ref-for-user-navigation-involvement③">user navigation involvement</a> <var>userInvolvement</var>: 
    <ol>
     <li data-md>
      <p>Let <var>overallResult</var> be true.</p>
     <li data-md>
      <p>Let <var>totalTasks</var> be the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-size" id="ref-for-list-size③">size</a> of <var>toTraverse</var>.</p>
     <li data-md>
      <p>Let <var>completedTasks</var> be 0.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate③">For each</a> <var>navigable</var> of <var>toTraverse</var>, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task">queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#history-traversal-task-source" id="ref-for-history-traversal-task-source">history traversal task source</a> given <var>navigable</var>’s <a data-link-type="dfn" href="https://whatpr.org/html/6315/history.html#nav-document" id="ref-for-nav-document">active document</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global③①">relevant global object</a> to run these steps:</p>
      <ol>
       <li data-md>
        <p>Let <var>destinationEntry</var> be the item in the result of <a data-link-type="dfn" href="https://whatpr.org/html/6315/history.html#getting-session-history-entries" id="ref-for-getting-session-history-entries①">getting the session history entries</a> for <var>navigable</var> that has the greatest <a data-link-type="dfn" href="https://whatpr.org/html/6315/history.html#she-step" id="ref-for-she-step③">step</a> less than or equal to <var>step</var>.</p>
       <li data-md>
        <p>If <var>destinationEntry</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#she-document" id="ref-for-she-document③">document</a> is not equal to <var>navigable</var>’s <a data-link-type="dfn" href="https://whatpr.org/html/6315/history.html#nav-document" id="ref-for-nav-document①">active document</a>, and <var>initiatorOrigin</var> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#same-origin-domain" id="ref-for-same-origin-domain③">same origin-domain</a> with <var>navigable</var>’s <a data-link-type="dfn" href="https://whatpr.org/html/6315/history.html#nav-document" id="ref-for-nav-document②">active document</a>'s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-origin" id="ref-for-concept-document-origin③">origin</a>, then abort these steps.</p>
       <li data-md>
        <p>Let <var>appHistory</var> be <var>navigable</var>’s <a data-link-type="dfn" href="https://whatpr.org/html/6315/history.html#nav-document" id="ref-for-nav-document③">active document</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global③②">relevant global object</a>'s <a data-link-type="dfn" href="#window-app-history" id="ref-for-window-app-history⑤">app history</a>.</p>
       <li data-md>
        <p>Let <var>result</var> be the result of <a data-link-type="dfn" href="#fire-a-traversal-navigate-event" id="ref-for-fire-a-traversal-navigate-event">firing a traversal navigate event</a> at <var>appHistory</var> with <i><a data-link-type="dfn" href="#fire-a-traversal-navigate-event-destinationentry" id="ref-for-fire-a-traversal-navigate-event-destinationentry">destinationEntry</a></i> set to <var>destinationEntry</var> and <i><a data-link-type="dfn" href="#fire-a-traversal-navigate-event-userinvolvement" id="ref-for-fire-a-traversal-navigate-event-userinvolvement">userInvolvement</a></i> set to <var>userInvolvement</var>.</p>
       <li data-md>
        <p>If <var>result</var> is false, then set <var>overallResult</var> to false.</p>
       <li data-md>
        <p>Increment <var>completedTasks</var>.</p>
      </ol>
     <li data-md>
      <p>Wait for <var>completedTasks</var> to be <var>totalTasks</var>.</p>
     <li data-md>
      <p>Return <var>overallResult</var>.</p>
    </ol>
   </div>
   <h2 class="heading settled" data-level="5" id="session-history-patches"><span class="secno">5. </span><span class="content">Patches to session history</span><a class="self-link" href="#session-history-patches"></a></h2>
   <p>This section details monkeypatches to <a data-link-type="biblio" href="#biblio-html">[HTML]</a> to track appropriate data for associating an <code class="idl"><a data-link-type="idl" href="#apphistory" id="ref-for-apphistory②⑤">AppHistory</a></code> with a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#session-history-entry" id="ref-for-session-history-entry⑦">session history entry</a>.</p>
   <h3 class="heading settled" data-level="5.1" id="session-history-new-she-fields"><span class="secno">5.1. </span><span class="content">New <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#session-history-entry" id="ref-for-session-history-entry⑧">session history entry</a> items</span><a class="self-link" href="#session-history-new-she-fields"></a></h3>
   <p>Each <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#session-history-entry" id="ref-for-session-history-entry⑨">session history entry</a> gains the following new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct-item" id="ref-for-struct-item①">items</a>:</p>
   <ul>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="session history entry" data-dfn-type="dfn" data-noexport id="session-history-entry-origin">origin</dfn>, an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#concept-origin" id="ref-for-concept-origin①">origin</a></p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="session history entry" data-dfn-type="dfn" data-noexport id="session-history-entry-app-history-key">app history key</dfn>, a string, initially set to the result of <a data-link-type="dfn" href="https://wicg.github.io/uuid/#dfn-generate-a-random-uuid" id="ref-for-dfn-generate-a-random-uuid">generating a random UUID</a></p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="session history entry" data-dfn-type="dfn" data-noexport id="session-history-entry-app-history-id">app history id</dfn>, a string, initially set to the result of <a data-link-type="dfn" href="https://wicg.github.io/uuid/#dfn-generate-a-random-uuid" id="ref-for-dfn-generate-a-random-uuid①">generating a random UUID</a></p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="session history entry" data-dfn-type="dfn" data-noexport id="session-history-entry-app-history-state">app history state</dfn>, which is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#serialized-state" id="ref-for-serialized-state⑥">serialized state</a> or null, initially null</p>
   </ul>
   <h3 class="heading settled" data-level="5.2" id="session-history-patches-key"><span class="secno">5.2. </span><span class="content">Carrying over the app history key</span><a class="self-link" href="#session-history-patches-key"></a></h3>
   <div class="algorithm" data-algorithm="update the session history with the new page key patch">
     Update the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#update-the-session-history-with-the-new-page" id="ref-for-update-the-session-history-with-the-new-page">update the session history with the new page</a> algorithm’s "<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#hh-replace" id="ref-for-hh-replace③"><code>replace</code></a>" case by adding the following step after the construction of <var>newEntry</var>: 
    <ol>
     <li data-md>
      <p>If <var>newEntry</var>’s <a data-link-type="dfn" href="#session-history-entry-origin" id="ref-for-session-history-entry-origin⑤">origin</a> is the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#same-origin" id="ref-for-same-origin⑥">same</a> as <var>sessionHistory</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#current-entry" id="ref-for-current-entry⑤">current entry</a>'s <a data-link-type="dfn" href="#session-history-entry-origin" id="ref-for-session-history-entry-origin⑥">origin</a>, then set <var>newEntry</var>’s <a data-link-type="dfn" href="#session-history-entry-app-history-key" id="ref-for-session-history-entry-app-history-key⑧">app history key</a> to <var>sessionHistory</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#current-entry" id="ref-for-current-entry⑥">current entry</a>'s <a data-link-type="dfn" href="#session-history-entry-app-history-key" id="ref-for-session-history-entry-app-history-key⑨">app history key</a>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="5.3" id="session-history-patches-state"><span class="secno">5.3. </span><span class="content">Carrying over the app history state</span><a class="self-link" href="#session-history-patches-state"></a></h3>
   <div class="algorithm" data-algorithm="navigate to a fragment state patch"> Update the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate-fragid" id="ref-for-navigate-fragid⑥">navigate to a fragment</a> algorithm by updating the step which creates and appends a new session history entry to carry over the <a data-link-type="dfn" href="#session-history-entry-app-history-state" id="ref-for-session-history-entry-app-history-state⑦">app history state</a> from the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#current-entry" id="ref-for-current-entry⑦">current entry</a> as well. </div>
   <h3 class="heading settled" data-level="5.4" id="session-history-patches-origin"><span class="secno">5.4. </span><span class="content">Tracking the <a data-link-type="dfn" href="#session-history-entry-origin" id="ref-for-session-history-entry-origin⑦">origin</a> member</span><a class="self-link" href="#session-history-patches-origin"></a></h3>
   <p>Update the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#update-the-session-history-with-the-new-page" id="ref-for-update-the-session-history-with-the-new-page①">update the session history with the new page</a> algorithm’s "<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#hh-replace" id="ref-for-hh-replace④"><code>replace</code></a>" and "<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#hh-default" id="ref-for-hh-default③"><code>default</code></a>" cases to set <var>newEntry</var>’s <a data-link-type="dfn" href="#session-history-entry-origin" id="ref-for-session-history-entry-origin⑧">origin</a> to <var>newDocument</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-origin" id="ref-for-concept-document-origin④">origin</a> as part of its creation.</p>
   <p>Update the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate-fragid" id="ref-for-navigate-fragid⑦">navigate to a fragment</a> algorithm to set the new <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#session-history-entry" id="ref-for-session-history-entry①⓪">session history entry</a>'s <a data-link-type="dfn" href="#session-history-entry-origin" id="ref-for-session-history-entry-origin⑨">origin</a> to the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#current-entry" id="ref-for-current-entry⑧">current entry</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#she-document" id="ref-for-she-document④">document</a>'s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-origin" id="ref-for-concept-document-origin⑤">origin</a>.</p>
   <p>Update the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#url-and-history-update-steps" id="ref-for-url-and-history-update-steps③">URL and history update steps</a> algorithm to set the new <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#session-history-entry" id="ref-for-session-history-entry①①">session history entry</a>'s <a data-link-type="dfn" href="#session-history-entry-origin" id="ref-for-session-history-entry-origin①⓪">origin</a> to <var>document</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-origin" id="ref-for-concept-document-origin⑥">origin</a>.</p>
   <p>Potentially update the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#traverse-the-history" id="ref-for-traverse-the-history">traverse the history</a> algorithm to consult the new <a data-link-type="dfn" href="#session-history-entry-origin" id="ref-for-session-history-entry-origin①①">origin</a> field, instead of checking the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#she-document" id="ref-for-she-document⑤">document</a>'s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-origin" id="ref-for-concept-document-origin⑦">origin</a>, since the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#she-document" id="ref-for-she-document⑥">document</a> can disappear?? Needs further investigation.</p>
   <h3 class="heading settled" data-level="5.5" id="session-history-patches-update"><span class="secno">5.5. </span><span class="content">Updating the <code class="idl"><a data-link-type="idl" href="#apphistory" id="ref-for-apphistory②⑥">AppHistory</a></code> object</span><a class="self-link" href="#session-history-patches-update"></a></h3>
   <div class="algorithm" data-algorithm="traverse the history update patch">
     Update the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#traverse-the-history" id="ref-for-traverse-the-history①">traverse the history</a> algorithm by adding the following step before the final step which fires various events: 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="#apphistory-update-the-entries" id="ref-for-apphistory-update-the-entries①">Update the entries</a> of <var>newDocument</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global③③">relevant global object</a>'s <a data-link-type="dfn" href="#window-app-history" id="ref-for-window-app-history⑥">app history</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="URL and history update steps update patch">
     Update the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#url-and-history-update-steps" id="ref-for-url-and-history-update-steps④">URL and history update steps</a> by appending the following final step: 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="#apphistory-update-the-entries" id="ref-for-apphistory-update-the-entries②">Update the entries</a> of <var>document</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global③④">relevant global object</a>'s <a data-link-type="dfn" href="#window-app-history" id="ref-for-window-app-history⑦">app history</a>.</p>
    </ol>
   </div>
   <p class="note" role="note">We do not <a data-link-type="dfn" href="#apphistory-update-the-entries" id="ref-for-apphistory-update-the-entries③">update the entries</a> when initially <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#creating-a-new-browsing-context" id="ref-for-creating-a-new-browsing-context①">creating a new browsing context</a>, as we intentionally don’t want to include the initial <code>about:blank</code> <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑧">Document</a></code> in any app history entry list. </p>
   <h2 class="heading settled" data-level="6" id="other-patches"><span class="secno">6. </span><span class="content">Other patches</span><a class="self-link" href="#other-patches"></a></h2>
   <h3 class="heading settled" data-level="6.1" id="cancel-navigation"><span class="secno">6.1. </span><span class="content">Canceling navigation</span><a class="self-link" href="#cancel-navigation"></a></h3>
   <p>The existing HTML specification discusses canceling a navigation in a few places. However, the process is not very well-defined. We may be able to make it more rigorous, after the <a href="https://github.com/whatwg/html/issues/5767">session history rewrite</a> lands.</p>
   <div class="algorithm" data-algorithm="navigation canceling patch"> The main addition of app history is that any time navigation of a given <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context" id="ref-for-browsing-context②">browsing context</a> <var>bc</var> is canceled, the user agent must <a data-link-type="dfn" href="#inform-app-history-about-a-canceled-navigation" id="ref-for-inform-app-history-about-a-canceled-navigation">inform app history about a canceled navigation</a> given <var>bc</var>. </div>
   <p class="note" role="note">This includes navigation cancelation induced by the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#stop-document-loading" id="ref-for-stop-document-loading">stop document loading</a> algorithm, which is invoked by user interface elements such as a stop button and by <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/window-object.html#dom-window-stop" id="ref-for-dom-window-stop">window.stop()</a></code>. (However, note <a href="https://github.com/whatwg/html/issues/6905">whatwg/html#6905</a>, which notes that in reality sometimes <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/window-object.html#dom-window-stop" id="ref-for-dom-window-stop①">window.stop()</a></code> does not cancel navigations.)</p>
  </main>
<script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#user-navigation-involvement-activation">activation</a><span>, in § 4.2</span>
   <li><a href="#window-app-history">app history</a><span>, in § 1</span>
   <li><a href="#apphistory">AppHistory</a><span>, in § 1</span>
   <li><a href="#dom-window-apphistory">appHistory</a><span>, in § 1</span>
   <li><a href="#app-history-api-navigation">app history API navigation</a><span>, in § 1.2</span>
   <li><a href="#apphistorydestination">AppHistoryDestination</a><span>, in § 2.2</span>
   <li><a href="#apphistoryentry">AppHistoryEntry</a><span>, in § 3</span>
   <li><a href="#session-history-entry-app-history-id">app history id</a><span>, in § 5.1</span>
   <li><a href="#session-history-entry-app-history-key">app history key</a><span>, in § 5.1</span>
   <li><a href="#apphistorynavigateevent">AppHistoryNavigateEvent</a><span>, in § 2.1</span>
   <li><a href="#dictdef-apphistorynavigateeventinit">AppHistoryNavigateEventInit</a><span>, in § 2.1</span>
   <li><a href="#dom-apphistorynavigateevent-apphistorynavigateevent">AppHistoryNavigateEvent(type, eventInit)</a><span>, in § 2.1</span>
   <li><a href="#dictdef-apphistorynavigateoptions">AppHistoryNavigateOptions</a><span>, in § 1</span>
   <li><a href="#dictdef-apphistorynavigationoptions">AppHistoryNavigationOptions</a><span>, in § 1</span>
   <li><a href="#enumdef-apphistorynavigationtype">AppHistoryNavigationType</a><span>, in § 2.1</span>
   <li><a href="#dictdef-apphistoryreloadoptions">AppHistoryReloadOptions</a><span>, in § 1</span>
   <li><a href="#session-history-entry-app-history-state">app history state</a><span>, in § 5.1</span>
   <li><a href="#navigate-apphistorystate">appHistoryState</a><span>, in § 4.3</span>
   <li><a href="#dom-apphistory-back">back()</a><span>, in § 1.4</span>
   <li><a href="#dom-apphistory-back">back(options)</a><span>, in § 1.4</span>
   <li><a href="#user-navigation-involvement-browser-ui">browser UI</a><span>, in § 4.2</span>
   <li><a href="#dom-apphistory-cangoback">canGoBack</a><span>, in § 1.1</span>
   <li><a href="#dom-apphistory-cangoforward">canGoForward</a><span>, in § 1.1</span>
   <li>
    canRespond
    <ul>
     <li><a href="#dom-apphistorynavigateevent-canrespond">attribute for AppHistoryNavigateEvent</a><span>, in § 2.1</span>
     <li><a href="#dom-apphistorynavigateeventinit-canrespond">dict-member for AppHistoryNavigateEventInit</a><span>, in § 2.1</span>
    </ul>
   <li><a href="#apphistorynavigateevent-classic-history-api-serialized-data">classic history API serialized data</a><span>, in § 2.1</span>
   <li><a href="#fire-a-push-or-replace-navigate-event-classichistoryapiserializeddata">classicHistoryAPISerializedData</a><span>, in § 2.3</span>
   <li><a href="#app-history-api-navigation-cleanup-step">cleanup step</a><span>, in § 1.2</span>
   <li><a href="#dom-apphistorynavigateevent-apphistorynavigateevent">constructor(type, eventInit)</a><span>, in § 2.1</span>
   <li><a href="#convert-a-history-handling-behavior-to-a-navigation-type">convert a history handling behavior to a navigation type</a><span>, in § 4.3</span>
   <li><a href="#dom-apphistory-current">current</a><span>, in § 1.1</span>
   <li><a href="#apphistory-current-index">current index</a><span>, in § 1.1</span>
   <li>
    destination
    <ul>
     <li><a href="#dom-apphistorynavigateevent-destination">attribute for AppHistoryNavigateEvent</a><span>, in § 2.1</span>
     <li><a href="#dom-apphistorynavigateeventinit-destination">dict-member for AppHistoryNavigateEventInit</a><span>, in § 2.1</span>
    </ul>
   <li><a href="#apphistorynavigateevent-destination-entry">destination entry</a><span>, in § 2.1</span>
   <li><a href="#fire-a-traversal-navigate-event-destinationentry">destinationEntry</a><span>, in § 2.3</span>
   <li><a href="#fire-a-push-or-replace-navigate-event-destinationurl">destinationURL</a><span>, in § 2.3</span>
   <li><a href="#dom-apphistory-entries">entries()</a><span>, in § 1.1</span>
   <li><a href="#apphistory-entry-list">entry list</a><span>, in § 1.1</span>
   <li><a href="#navigate-entrylist">entryList</a><span>, in § 4.1</span>
   <li><a href="#finalize-with-an-aborted-navigation-error">finalize with an aborted navigation error</a><span>, in § 2.3</span>
   <li><a href="#fire-a-push-or-replace-navigate-event">fire a push or replace navigate event</a><span>, in § 2.3</span>
   <li><a href="#fire-a-traversal-navigate-event">fire a traversal navigate event</a><span>, in § 2.3</span>
   <li><a href="#fire-traversal-navigate-events">fire traversal navigate events</a><span>, in § 4.4</span>
   <li>
    formData
    <ul>
     <li><a href="#dom-apphistorynavigateevent-formdata">attribute for AppHistoryNavigateEvent</a><span>, in § 2.1</span>
     <li><a href="#dom-apphistorynavigateeventinit-formdata">dict-member for AppHistoryNavigateEventInit</a><span>, in § 2.1</span>
    </ul>
   <li><a href="#fire-a-push-or-replace-navigate-event-formdataentrylist">formDataEntryList</a><span>, in § 2.3</span>
   <li><a href="#dom-apphistory-forward">forward()</a><span>, in § 1.4</span>
   <li><a href="#dom-apphistory-forward">forward(options)</a><span>, in § 1.4</span>
   <li>
    getState()
    <ul>
     <li><a href="#dom-apphistorydestination-getstate">method for AppHistoryDestination</a><span>, in § 2.2</span>
     <li><a href="#dom-apphistoryentry-getstate">method for AppHistoryEntry</a><span>, in § 3</span>
    </ul>
   <li><a href="#get-the-app-history-index">get the app history index</a><span>, in § 1.1</span>
   <li><a href="#dom-apphistory-goto">goTo(key)</a><span>, in § 1.4</span>
   <li><a href="#dom-apphistory-goto">goTo(key, options)</a><span>, in § 1.4</span>
   <li>
    hashChange
    <ul>
     <li><a href="#dom-apphistorynavigateevent-hashchange">attribute for AppHistoryNavigateEvent</a><span>, in § 2.1</span>
     <li><a href="#dom-apphistorynavigateeventinit-hashchange">dict-member for AppHistoryNavigateEventInit</a><span>, in § 2.1</span>
    </ul>
   <li>
    id
    <ul>
     <li><a href="#dom-apphistorydestination-id">attribute for AppHistoryDestination</a><span>, in § 2.2</span>
     <li><a href="#dom-apphistoryentry-id">attribute for AppHistoryEntry</a><span>, in § 3</span>
     <li><a href="#apphistorydestination-id">dfn for AppHistoryDestination</a><span>, in § 2.2</span>
    </ul>
   <li>
    index
    <ul>
     <li><a href="#dom-apphistorydestination-index">attribute for AppHistoryDestination</a><span>, in § 2.2</span>
     <li><a href="#dom-apphistoryentry-index">attribute for AppHistoryEntry</a><span>, in § 3</span>
     <li><a href="#apphistorydestination-index">dfn for AppHistoryDestination</a><span>, in § 2.2</span>
     <li><a href="#apphistoryentry-index">dfn for AppHistoryEntry</a><span>, in § 3</span>
    </ul>
   <li>
    info
    <ul>
     <li><a href="#dom-apphistorynavigateevent-info">attribute for AppHistoryNavigateEvent</a><span>, in § 2.1</span>
     <li><a href="#app-history-api-navigation-info">dfn for app history API navigation</a><span>, in § 1.2</span>
     <li><a href="#dom-apphistorynavigateeventinit-info">dict-member for AppHistoryNavigateEventInit</a><span>, in § 2.1</span>
    </ul>
   <li><a href="#inform-app-history-about-a-canceled-navigation">inform app history about a canceled navigation</a><span>, in § 2.3</span>
   <li><a href="#inner-navigate-event-firing-algorithm">inner navigate event firing algorithm</a><span>, in § 2.3</span>
   <li><a href="#apphistorydestination-is-same-document">is same document</a><span>, in § 2.2</span>
   <li><a href="#fire-a-push-or-replace-navigate-event-issamedocument">isSameDocument</a><span>, in § 2.3</span>
   <li>
    key
    <ul>
     <li><a href="#dom-apphistorydestination-key">attribute for AppHistoryDestination</a><span>, in § 2.2</span>
     <li><a href="#dom-apphistoryentry-key">attribute for AppHistoryEntry</a><span>, in § 3</span>
     <li><a href="#apphistorydestination-key">dfn for AppHistoryDestination</a><span>, in § 2.2</span>
    </ul>
   <li><a href="#eventdef-apphistory-navigate">navigate</a><span>, in § 1.5</span>
   <li><a href="#eventdef-apphistory-navigateerror">navigateerror</a><span>, in § 1.5</span>
   <li><a href="#dom-apphistorynavigationoptions-navigateinfo">navigateInfo</a><span>, in § 1</span>
   <li><a href="#eventdef-apphistory-navigatesuccess">navigatesuccess</a><span>, in § 1.5</span>
   <li><a href="#dom-apphistory-navigate">navigate(url)</a><span>, in § 1.3</span>
   <li><a href="#dom-apphistory-navigate">navigate(url, options)</a><span>, in § 1.3</span>
   <li><a href="#apphistorynavigateevent-navigation-action-promises-list">navigation action promises list</a><span>, in § 2.1</span>
   <li>
    navigationType
    <ul>
     <li><a href="#dom-apphistorynavigateevent-navigationtype">attribute for AppHistoryNavigateEvent</a><span>, in § 2.1</span>
     <li><a href="#fire-a-push-or-replace-navigate-event-navigationtype">dfn for fire a push or replace navigate event</a><span>, in § 2.3</span>
     <li><a href="#dom-apphistorynavigateeventinit-navigationtype">dict-member for AppHistoryNavigateEventInit</a><span>, in § 2.1</span>
    </ul>
   <li><a href="#user-navigation-involvement-none">none</a><span>, in § 4.2</span>
   <li><a href="#apphistory-ongoing-navigate-event">ongoing navigate event</a><span>, in § 1.2</span>
   <li><a href="#apphistory-ongoing-non-traverse-navigation">ongoing non-traverse navigation</a><span>, in § 1.2</span>
   <li><a href="#apphistory-ongoing-traverse-navigations">ongoing traverse navigations</a><span>, in § 1.2</span>
   <li><a href="#dom-apphistory-onnavigate">onnavigate</a><span>, in § 1.5</span>
   <li><a href="#dom-apphistory-onnavigateerror">onnavigateerror</a><span>, in § 1.5</span>
   <li><a href="#dom-apphistory-onnavigatesuccess">onnavigatesuccess</a><span>, in § 1.5</span>
   <li><a href="#session-history-entry-origin">origin</a><span>, in § 5.1</span>
   <li><a href="#perform-an-app-history-traversal">perform an app history traversal</a><span>, in § 1.4</span>
   <li><a href="#perform-a-non-traverse-app-history-navigation">perform a non-traverse app history navigation</a><span>, in § 1.3</span>
   <li><a href="#apphistory-post-navigate-event-ongoing-navigation-signal">post-navigate event ongoing navigation signal</a><span>, in § 1.2</span>
   <li><a href="#apphistory-promote-the-upcoming-non-traverse-navigation-to-ongoing">promote the upcoming non-traverse navigation to ongoing</a><span>, in § 1.2</span>
   <li><a href="#dom-apphistorynavigationtype-push">"push"</a><span>, in § 2.1</span>
   <li><a href="#dom-apphistorynavigationtype-reload">"reload"</a><span>, in § 2.1</span>
   <li><a href="#dom-apphistory-reload">reload()</a><span>, in § 1.3</span>
   <li><a href="#dom-apphistory-reload">reload(options)</a><span>, in § 1.3</span>
   <li><a href="#dom-apphistorynavigationtype-replace">"replace"</a><span>, in § 2.1</span>
   <li><a href="#dom-apphistorynavigateoptions-replace">replace</a><span>, in § 1</span>
   <li><a href="#dom-apphistorynavigateevent-respondwith">respondWith(newNavigationAction)</a><span>, in § 2.1</span>
   <li><a href="#app-history-api-navigation-returned-promise">returned promise</a><span>, in § 1.2</span>
   <li><a href="#rewritable">rewritable</a><span>, in § 2.3</span>
   <li>
    sameDocument
    <ul>
     <li><a href="#dom-apphistorydestination-samedocument">attribute for AppHistoryDestination</a><span>, in § 2.2</span>
     <li><a href="#dom-apphistoryentry-samedocument">attribute for AppHistoryEntry</a><span>, in § 3</span>
    </ul>
   <li><a href="#apphistoryentry-session-history-entry">session history entry</a><span>, in § 3</span>
   <li><a href="#apphistory-set-an-ongoing-traverse-navigation">set an ongoing traverse navigation</a><span>, in § 1.2</span>
   <li><a href="#apphistory-set-the-upcoming-non-traverse-navigation">set the upcoming non-traverse navigation</a><span>, in § 1.2</span>
   <li>
    signal
    <ul>
     <li><a href="#dom-apphistorynavigateevent-signal">attribute for AppHistoryNavigateEvent</a><span>, in § 2.1</span>
     <li><a href="#dom-apphistorynavigateeventinit-signal">dict-member for AppHistoryNavigateEventInit</a><span>, in § 2.1</span>
    </ul>
   <li>
    state
    <ul>
     <li><a href="#apphistorydestination-state">dfn for AppHistoryDestination</a><span>, in § 2.2</span>
     <li><a href="#fire-a-push-or-replace-navigate-event-state">dfn for fire a push or replace navigate event</a><span>, in § 2.3</span>
     <li><a href="#dom-apphistorynavigateoptions-state">dict-member for AppHistoryNavigateOptions</a><span>, in § 1</span>
     <li><a href="#dom-apphistoryreloadoptions-state">dict-member for AppHistoryReloadOptions</a><span>, in § 1</span>
    </ul>
   <li><a href="#apphistory-to-be-set-serialized-state">to-be-set serialized state</a><span>, in § 1.2</span>
   <li><a href="#dom-apphistorynavigationtype-traverse">"traverse"</a><span>, in § 2.1</span>
   <li><a href="#apphistory-upcoming-non-traverse-navigation">upcoming non-traverse navigation</a><span>, in § 1.2</span>
   <li><a href="#apphistory-update-the-entries">update the entries</a><span>, in § 1.1</span>
   <li><a href="#apphistorydestination-url">URL</a><span>, in § 2.2</span>
   <li>
    url
    <ul>
     <li><a href="#dom-apphistorydestination-url">attribute for AppHistoryDestination</a><span>, in § 2.2</span>
     <li><a href="#dom-apphistoryentry-url">attribute for AppHistoryEntry</a><span>, in § 3</span>
    </ul>
   <li>
    userInitiated
    <ul>
     <li><a href="#dom-apphistorynavigateevent-userinitiated">attribute for AppHistoryNavigateEvent</a><span>, in § 2.1</span>
     <li><a href="#dom-apphistorynavigateeventinit-userinitiated">dict-member for AppHistoryNavigateEventInit</a><span>, in § 2.1</span>
    </ul>
   <li>
    userInvolvement
    <ul>
     <li><a href="#fire-a-push-or-replace-navigate-event-userinvolvement">dfn for fire a push or replace navigate event</a><span>, in § 2.3</span>
     <li><a href="#fire-a-traversal-navigate-event-userinvolvement">dfn for fire a traversal navigate event</a><span>, in § 2.3</span>
     <li><a href="#navigate-userinvolvement">dfn for navigate</a><span>, in § 4.2</span>
     <li><a href="#traverse-the-history-by-a-delta-userinvolvement">dfn for traverse the history by a delta</a><span>, in § 4.2</span>
    </ul>
   <li>
    user navigation involvement
    <ul>
     <li><a href="#user-navigation-involvement">definition of</a><span>, in § 4.2</span>
     <li><a href="#event-user-navigation-involvement">dfn for Event</a><span>, in § 4.2</span>
    </ul>
  </ul>
  <aside class="dfn-panel" data-for="term-for-abortsignal">
   <a href="https://dom.spec.whatwg.org/#abortsignal">https://dom.spec.whatwg.org/#abortsignal</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-abortsignal">1.2. Ongoing navigation tracking</a> <a href="#ref-for-abortsignal①">(2)</a>
    <li><a href="#ref-for-abortsignal②">2.1. The AppHistoryNavigateEvent class</a> <a href="#ref-for-abortsignal③">(2)</a> <a href="#ref-for-abortsignal④">(3)</a>
    <li><a href="#ref-for-abortsignal⑤">2.3. Firing the event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-document">
   <a href="https://dom.spec.whatwg.org/#document">https://dom.spec.whatwg.org/#document</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-document">1.1. Introspecting the app history entry list</a> <a href="#ref-for-document①">(2)</a> <a href="#ref-for-document②">(3)</a>
    <li><a href="#ref-for-document③">2.2. The AppHistoryDestination class</a>
    <li><a href="#ref-for-document④">2.3. Firing the event</a> <a href="#ref-for-document⑤">(2)</a>
    <li><a href="#ref-for-document⑥">3. App history entries</a>
    <li><a href="#ref-for-document⑦">4.3. Navigation algorithm updates</a>
    <li><a href="#ref-for-document⑧">5.5. Updating the AppHistory object</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-event">
   <a href="https://dom.spec.whatwg.org/#event">https://dom.spec.whatwg.org/#event</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-event">2.1. The AppHistoryNavigateEvent class</a>
    <li><a href="#ref-for-event①">4.2. Browser UI/user-initiated patches</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dictdef-eventinit">
   <a href="https://dom.spec.whatwg.org/#dictdef-eventinit">https://dom.spec.whatwg.org/#dictdef-eventinit</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-eventinit">2.1. The AppHistoryNavigateEvent class</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-eventtarget">
   <a href="https://dom.spec.whatwg.org/#eventtarget">https://dom.spec.whatwg.org/#eventtarget</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-eventtarget">1. The AppHistory class</a>
    <li><a href="#ref-for-eventtarget①">3. App history entries</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-abortsignal-aborted-flag">
   <a href="https://dom.spec.whatwg.org/#abortsignal-aborted-flag">https://dom.spec.whatwg.org/#abortsignal-aborted-flag</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-abortsignal-aborted-flag">2.3. Firing the event</a> <a href="#ref-for-abortsignal-aborted-flag①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-eventtarget-activation-behavior">
   <a href="https://dom.spec.whatwg.org/#eventtarget-activation-behavior">https://dom.spec.whatwg.org/#eventtarget-activation-behavior</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-eventtarget-activation-behavior">4.2. Browser UI/user-initiated patches</a> <a href="#ref-for-eventtarget-activation-behavior①">(2)</a> <a href="#ref-for-eventtarget-activation-behavior②">(3)</a> <a href="#ref-for-eventtarget-activation-behavior③">(4)</a> <a href="#ref-for-eventtarget-activation-behavior④">(5)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-event-cancelable">
   <a href="https://dom.spec.whatwg.org/#dom-event-cancelable">https://dom.spec.whatwg.org/#dom-event-cancelable</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-event-cancelable">2.3. Firing the event</a> <a href="#ref-for-dom-event-cancelable①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-canceled-flag">
   <a href="https://dom.spec.whatwg.org/#canceled-flag">https://dom.spec.whatwg.org/#canceled-flag</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-canceled-flag">1.2. Ongoing navigation tracking</a> <a href="#ref-for-canceled-flag①">(2)</a>
    <li><a href="#ref-for-canceled-flag②">2.1. The AppHistoryNavigateEvent class</a>
    <li><a href="#ref-for-canceled-flag③">2.3. Firing the event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-event-create">
   <a href="https://dom.spec.whatwg.org/#concept-event-create">https://dom.spec.whatwg.org/#concept-event-create</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-event-create">2.3. Firing the event</a> <a href="#ref-for-concept-event-create①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-event-dispatch">
   <a href="https://dom.spec.whatwg.org/#concept-event-dispatch">https://dom.spec.whatwg.org/#concept-event-dispatch</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-event-dispatch">2.3. Firing the event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dispatch-flag">
   <a href="https://dom.spec.whatwg.org/#dispatch-flag">https://dom.spec.whatwg.org/#dispatch-flag</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dispatch-flag">2.1. The AppHistoryNavigateEvent class</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-event-fire">
   <a href="https://dom.spec.whatwg.org/#concept-event-fire">https://dom.spec.whatwg.org/#concept-event-fire</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-event-fire">2.3. Firing the event</a> <a href="#ref-for-concept-event-fire①">(2)</a> <a href="#ref-for-concept-event-fire②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-event-istrusted">
   <a href="https://dom.spec.whatwg.org/#dom-event-istrusted">https://dom.spec.whatwg.org/#dom-event-istrusted</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-event-istrusted">2.1. The AppHistoryNavigateEvent class</a> <a href="#ref-for-dom-event-istrusted①">(2)</a>
    <li><a href="#ref-for-dom-event-istrusted②">4.2. Browser UI/user-initiated patches</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-document-origin">
   <a href="https://dom.spec.whatwg.org/#concept-document-origin">https://dom.spec.whatwg.org/#concept-document-origin</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-document-origin">4.3. Navigation algorithm updates</a> <a href="#ref-for-concept-document-origin①">(2)</a>
    <li><a href="#ref-for-concept-document-origin②">4.4. History traversal updates</a> <a href="#ref-for-concept-document-origin③">(2)</a>
    <li><a href="#ref-for-concept-document-origin④">5.4. Tracking the origin member</a> <a href="#ref-for-concept-document-origin⑤">(2)</a> <a href="#ref-for-concept-document-origin⑥">(3)</a> <a href="#ref-for-concept-document-origin⑦">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-abortsignal-signal-abort">
   <a href="https://dom.spec.whatwg.org/#abortsignal-signal-abort">https://dom.spec.whatwg.org/#abortsignal-signal-abort</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-abortsignal-signal-abort">1.2. Ongoing navigation tracking</a> <a href="#ref-for-abortsignal-signal-abort①">(2)</a>
    <li><a href="#ref-for-abortsignal-signal-abort②">2.3. Firing the event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-event-type">
   <a href="https://dom.spec.whatwg.org/#dom-event-type">https://dom.spec.whatwg.org/#dom-event-type</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-event-type">2.3. Firing the event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-document-url">
   <a href="https://dom.spec.whatwg.org/#concept-document-url">https://dom.spec.whatwg.org/#concept-document-url</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-document-url">1.3. Navigating</a>
    <li><a href="#ref-for-concept-document-url①">2.3. Firing the event</a> <a href="#ref-for-concept-document-url②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-global-fetch">
   <a href="https://fetch.spec.whatwg.org/#dom-global-fetch">https://fetch.spec.whatwg.org/#dom-global-fetch</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-global-fetch">2.1. The AppHistoryNavigateEvent class</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-errorevent">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#errorevent">https://html.spec.whatwg.org/multipage/webappapis.html#errorevent</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-errorevent">2.3. Firing the event</a> <a href="#ref-for-errorevent①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-eventhandler">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-eventhandler">1. The AppHistory class</a> <a href="#ref-for-eventhandler①">(2)</a> <a href="#ref-for-eventhandler②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-structureddeserialize">
   <a href="https://html.spec.whatwg.org/multipage/structured-data.html#structureddeserialize">https://html.spec.whatwg.org/multipage/structured-data.html#structureddeserialize</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-structureddeserialize">2.2. The AppHistoryDestination class</a>
    <li><a href="#ref-for-structureddeserialize①">3. App history entries</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-structuredserializeforstorage">
   <a href="https://html.spec.whatwg.org/multipage/structured-data.html#structuredserializeforstorage">https://html.spec.whatwg.org/multipage/structured-data.html#structuredserializeforstorage</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-structuredserializeforstorage">1.3. Navigating</a> <a href="#ref-for-structuredserializeforstorage①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-window">
   <a href="https://html.spec.whatwg.org/multipage/window-object.html#window">https://html.spec.whatwg.org/multipage/window-object.html#window</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-window">1. The AppHistory class</a> <a href="#ref-for-window①">(2)</a> <a href="#ref-for-window②">(3)</a>
    <li><a href="#ref-for-window③">1.1. Introspecting the app history entry list</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-the-a-element">
   <a href="https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-a-element">https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-a-element</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-the-a-element">2.1. The AppHistoryNavigateEvent class</a>
    <li><a href="#ref-for-the-a-element①">4.2. Browser UI/user-initiated patches</a> <a href="#ref-for-the-a-element②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-nav-document">
   <a href="https://whatpr.org/html/6315/history.html#nav-document">https://whatpr.org/html/6315/history.html#nav-document</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-nav-document">4.4. History traversal updates</a> <a href="#ref-for-nav-document①">(2)</a> <a href="#ref-for-nav-document②">(3)</a> <a href="#ref-for-nav-document③">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-nav-active-history-entry">
   <a href="https://whatpr.org/html/6315/history.html#nav-active-history-entry">https://whatpr.org/html/6315/history.html#nav-active-history-entry</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-nav-active-history-entry">1.4. Traversing</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-active-window">
   <a href="https://html.spec.whatwg.org/multipage/browsers.html#active-window">https://html.spec.whatwg.org/multipage/browsers.html#active-window</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-active-window">2.3. Firing the event</a>
    <li><a href="#ref-for-active-window①">4.3. Navigation algorithm updates</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-allowed-to-navigate">
   <a href="https://html.spec.whatwg.org/multipage/browsers.html#allowed-to-navigate">https://html.spec.whatwg.org/multipage/browsers.html#allowed-to-navigate</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-allowed-to-navigate">1.3. Navigating</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-apply-the-history-step">
   <a href="https://whatpr.org/html/6315/history.html#apply-the-history-step">https://whatpr.org/html/6315/history.html#apply-the-history-step</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-apply-the-history-step">1.4. Traversing</a> <a href="#ref-for-apply-the-history-step①">(2)</a>
    <li><a href="#ref-for-apply-the-history-step②">4.4. History traversal updates</a> <a href="#ref-for-apply-the-history-step③">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-the-area-element">
   <a href="https://html.spec.whatwg.org/multipage/image-maps.html#the-area-element">https://html.spec.whatwg.org/multipage/image-maps.html#the-area-element</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-the-area-element">4.2. Browser UI/user-initiated patches</a> <a href="#ref-for-the-area-element①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-location-assign">
   <a href="https://html.spec.whatwg.org/multipage/history.html#dom-location-assign">https://html.spec.whatwg.org/multipage/history.html#dom-location-assign</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-location-assign">1.3. Navigating</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-document-window">
   <a href="https://html.spec.whatwg.org/multipage/window-object.html#concept-document-window">https://html.spec.whatwg.org/multipage/window-object.html#concept-document-window</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-document-window">1.1. Introspecting the app history entry list</a> <a href="#ref-for-concept-document-window①">(2)</a> <a href="#ref-for-concept-document-window②">(3)</a> <a href="#ref-for-concept-document-window③">(4)</a>
    <li><a href="#ref-for-concept-document-window④">1.3. Navigating</a> <a href="#ref-for-concept-document-window⑤">(2)</a> <a href="#ref-for-concept-document-window⑥">(3)</a> <a href="#ref-for-concept-document-window⑦">(4)</a>
    <li><a href="#ref-for-concept-document-window⑧">1.4. Traversing</a> <a href="#ref-for-concept-document-window⑨">(2)</a>
    <li><a href="#ref-for-concept-document-window①⓪">2.3. Firing the event</a> <a href="#ref-for-concept-document-window①①">(2)</a> <a href="#ref-for-concept-document-window①②">(3)</a>
    <li><a href="#ref-for-concept-document-window①③">3. App history entries</a> <a href="#ref-for-concept-document-window①④">(2)</a> <a href="#ref-for-concept-document-window①⑤">(3)</a> <a href="#ref-for-concept-document-window①⑥">(4)</a> <a href="#ref-for-concept-document-window①⑦">(5)</a> <a href="#ref-for-concept-document-window①⑧">(6)</a> <a href="#ref-for-concept-document-window①⑨">(7)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-window-bc">
   <a href="https://html.spec.whatwg.org/multipage/window-object.html#window-bc">https://html.spec.whatwg.org/multipage/window-object.html#window-bc</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-window-bc">1.1. Introspecting the app history entry list</a>
    <li><a href="#ref-for-window-bc①">1.3. Navigating</a>
    <li><a href="#ref-for-window-bc②">1.4. Traversing</a> <a href="#ref-for-window-bc③">(2)</a>
    <li><a href="#ref-for-window-bc④">2.3. Firing the event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-the-button-element">
   <a href="https://html.spec.whatwg.org/multipage/form-elements.html#the-button-element">https://html.spec.whatwg.org/multipage/form-elements.html#the-button-element</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-the-button-element">4.2. Browser UI/user-initiated patches</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-errorevent-colno">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-errorevent-colno">https://html.spec.whatwg.org/multipage/webappapis.html#dom-errorevent-colno</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-errorevent-colno">2.3. Firing the event</a> <a href="#ref-for-dom-errorevent-colno①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-bc-navigable">
   <a href="https://whatpr.org/html/6315/browsers.html#bc-navigable">https://whatpr.org/html/6315/browsers.html#bc-navigable</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-bc-navigable">1.4. Traversing</a>
    <li><a href="#ref-for-bc-navigable①">4.4. History traversal updates</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-creating-a-new-browsing-context">
   <a href="https://html.spec.whatwg.org/multipage/browsers.html#creating-a-new-browsing-context">https://html.spec.whatwg.org/multipage/browsers.html#creating-a-new-browsing-context</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-creating-a-new-browsing-context">4.3. Navigation algorithm updates</a>
    <li><a href="#ref-for-creating-a-new-browsing-context①">5.5. Updating the AppHistory object</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-current-entry">
   <a href="https://html.spec.whatwg.org/multipage/history.html#current-entry">https://html.spec.whatwg.org/multipage/history.html#current-entry</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-current-entry">1.1. Introspecting the app history entry list</a>
    <li><a href="#ref-for-current-entry①">1.3. Navigating</a>
    <li><a href="#ref-for-current-entry②">2.3. Firing the event</a> <a href="#ref-for-current-entry③">(2)</a>
    <li><a href="#ref-for-current-entry④">4.3. Navigation algorithm updates</a>
    <li><a href="#ref-for-current-entry⑤">5.2. Carrying over the app history key</a> <a href="#ref-for-current-entry⑥">(2)</a>
    <li><a href="#ref-for-current-entry⑦">5.3. Carrying over the app history state</a>
    <li><a href="#ref-for-current-entry⑧">5.4. Tracking the origin member</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-tn-current-session-history-step">
   <a href="https://whatpr.org/html/6315/history.html#tn-current-session-history-step">https://whatpr.org/html/6315/history.html#tn-current-session-history-step</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-tn-current-session-history-step">1.4. Traversing</a>
    <li><a href="#ref-for-tn-current-session-history-step①">4.4. History traversal updates</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-hh-default">
   <a href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#hh-default">https://html.spec.whatwg.org/multipage/browsing-the-web.html#hh-default</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-hh-default">1.3. Navigating</a> <a href="#ref-for-hh-default①">(2)</a>
    <li><a href="#ref-for-hh-default②">4.3. Navigation algorithm updates</a>
    <li><a href="#ref-for-hh-default③">5.4. Tracking the origin member</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-she-document">
   <a href="https://html.spec.whatwg.org/multipage/history.html#she-document">https://html.spec.whatwg.org/multipage/history.html#she-document</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-she-document">2.3. Firing the event</a>
    <li><a href="#ref-for-she-document①">3. App history entries</a>
    <li><a href="#ref-for-she-document②">4.3. Navigation algorithm updates</a>
    <li><a href="#ref-for-she-document③">4.4. History traversal updates</a>
    <li><a href="#ref-for-she-document④">5.4. Tracking the origin member</a> <a href="#ref-for-she-document⑤">(2)</a> <a href="#ref-for-she-document⑥">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-enqueue-the-following-steps">
   <a href="https://html.spec.whatwg.org/multipage/infrastructure.html#enqueue-the-following-steps">https://html.spec.whatwg.org/multipage/infrastructure.html#enqueue-the-following-steps</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-enqueue-the-following-steps">1.4. Traversing</a>
    <li><a href="#ref-for-enqueue-the-following-steps①">4.4. History traversal updates</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-enqueue-the-following-steps">
   <a href="https://html.spec.whatwg.org/multipage/infrastructure.html#enqueue-the-following-steps">https://html.spec.whatwg.org/multipage/infrastructure.html#enqueue-the-following-steps</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-enqueue-the-following-steps">1.4. Traversing</a>
    <li><a href="#ref-for-enqueue-the-following-steps①">4.4. History traversal updates</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-hh-entry-update">
   <a href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#hh-entry-update">https://html.spec.whatwg.org/multipage/browsing-the-web.html#hh-entry-update</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-hh-entry-update">2.3. Firing the event</a>
    <li><a href="#ref-for-hh-entry-update①">4.3. Navigation algorithm updates</a> <a href="#ref-for-hh-entry-update②">(2)</a> <a href="#ref-for-hh-entry-update③">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-errorevent-error">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-errorevent-error">https://html.spec.whatwg.org/multipage/webappapis.html#dom-errorevent-error</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-errorevent-error">2.3. Firing the event</a> <a href="#ref-for-dom-errorevent-error①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-event-handlers">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers">https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-event-handlers">1.5. Event handlers</a> <a href="#ref-for-event-handlers①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-event-handler-event-type">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type">https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-event-handler-event-type">1.5. Event handlers</a> <a href="#ref-for-event-handler-event-type①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-event-handler-idl-attributes">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes">https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-event-handler-idl-attributes">1.5. Event handlers</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-agent-event-loop">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-agent-event-loop">https://html.spec.whatwg.org/multipage/webappapis.html#concept-agent-event-loop</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-agent-event-loop">2.3. Firing the event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-exceptions-enabled">
   <a href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#exceptions-enabled">https://html.spec.whatwg.org/multipage/browsing-the-web.html#exceptions-enabled</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-exceptions-enabled">1.3. Navigating</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-errorevent-filename">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-errorevent-filename">https://html.spec.whatwg.org/multipage/webappapis.html#dom-errorevent-filename</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-errorevent-filename">2.3. Firing the event</a> <a href="#ref-for-dom-errorevent-filename①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-following-hyperlinks-2">
   <a href="https://html.spec.whatwg.org/multipage/links.html#following-hyperlinks-2">https://html.spec.whatwg.org/multipage/links.html#following-hyperlinks-2</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-following-hyperlinks-2">4.2. Browser UI/user-initiated patches</a> <a href="#ref-for-following-hyperlinks-2①">(2)</a> <a href="#ref-for-following-hyperlinks-2②">(3)</a> <a href="#ref-for-following-hyperlinks-2③">(4)</a> <a href="#ref-for-following-hyperlinks-2④">(5)</a> <a href="#ref-for-following-hyperlinks-2⑤">(6)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-the-form-element">
   <a href="https://html.spec.whatwg.org/multipage/forms.html#the-form-element">https://html.spec.whatwg.org/multipage/forms.html#the-form-element</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-the-form-element">2.1. The AppHistoryNavigateEvent class</a>
    <li><a href="#ref-for-the-form-element①">4.2. Browser UI/user-initiated patches</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-fully-active">
   <a href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active">https://html.spec.whatwg.org/multipage/browsers.html#fully-active</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-fully-active">1.1. Introspecting the app history entry list</a> <a href="#ref-for-fully-active①">(2)</a> <a href="#ref-for-fully-active②">(3)</a> <a href="#ref-for-fully-active③">(4)</a>
    <li><a href="#ref-for-fully-active④">1.3. Navigating</a> <a href="#ref-for-fully-active⑤">(2)</a>
    <li><a href="#ref-for-fully-active⑥">1.4. Traversing</a>
    <li><a href="#ref-for-fully-active⑦">2.1. The AppHistoryNavigateEvent class</a>
    <li><a href="#ref-for-fully-active⑧">2.3. Firing the event</a>
    <li><a href="#ref-for-fully-active⑨">3. App history entries</a> <a href="#ref-for-fully-active①⓪">(2)</a> <a href="#ref-for-fully-active①①">(3)</a> <a href="#ref-for-fully-active①②">(4)</a> <a href="#ref-for-fully-active①③">(5)</a> <a href="#ref-for-fully-active①④">(6)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-getting-all-history-steps">
   <a href="https://whatpr.org/html/6315/history.html#getting-all-history-steps">https://whatpr.org/html/6315/history.html#getting-all-history-steps</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-getting-all-history-steps">1.4. Traversing</a>
    <li><a href="#ref-for-getting-all-history-steps①">4.4. History traversal updates</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-getting-session-history-entries">
   <a href="https://whatpr.org/html/6315/history.html#getting-session-history-entries">https://whatpr.org/html/6315/history.html#getting-session-history-entries</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-getting-session-history-entries">1.4. Traversing</a>
    <li><a href="#ref-for-getting-session-history-entries①">4.4. History traversal updates</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-history-handling-behavior">
   <a href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#history-handling-behavior">https://html.spec.whatwg.org/multipage/browsing-the-web.html#history-handling-behavior</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-history-handling-behavior">1.3. Navigating</a>
    <li><a href="#ref-for-history-handling-behavior①">4.3. Navigation algorithm updates</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-history-traversal-task-source">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#history-traversal-task-source">https://html.spec.whatwg.org/multipage/webappapis.html#history-traversal-task-source</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-history-traversal-task-source">4.4. History traversal updates</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-navigation-hh">
   <a href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigation-hh">https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigation-hh</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-navigation-hh">1.3. Navigating</a>
    <li><a href="#ref-for-navigation-hh①">4.1. Form submission patches</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-the-iframe-element">
   <a href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element">https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-the-iframe-element">2.3. Firing the event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-in-parallel">
   <a href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-in-parallel">4.1. Form submission patches</a>
    <li><a href="#ref-for-in-parallel①">4.3. Navigation algorithm updates</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-the-input-element">
   <a href="https://html.spec.whatwg.org/multipage/input.html#the-input-element">https://html.spec.whatwg.org/multipage/input.html#the-input-element</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-the-input-element">4.2. Browser UI/user-initiated patches</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-input-activation-behavior">
   <a href="https://html.spec.whatwg.org/multipage/input.html#input-activation-behavior">https://html.spec.whatwg.org/multipage/input.html#input-activation-behavior</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-input-activation-behavior">4.2. Browser UI/user-initiated patches</a> <a href="#ref-for-input-activation-behavior①">(2)</a> <a href="#ref-for-input-activation-behavior②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-uhus-ispush">
   <a href="https://html.spec.whatwg.org/multipage/history.html#uhus-ispush">https://html.spec.whatwg.org/multipage/history.html#uhus-ispush</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-uhus-ispush">2.3. Firing the event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-joint-session-history">
   <a href="https://html.spec.whatwg.org/multipage/history.html#joint-session-history">https://html.spec.whatwg.org/multipage/history.html#joint-session-history</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-joint-session-history">1.4. Traversing</a> <a href="#ref-for-joint-session-history①">(2)</a> <a href="#ref-for-joint-session-history②">(3)</a> <a href="#ref-for-joint-session-history③">(4)</a> <a href="#ref-for-joint-session-history④">(5)</a> <a href="#ref-for-joint-session-history⑤">(6)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-errorevent-lineno">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-errorevent-lineno">https://html.spec.whatwg.org/multipage/webappapis.html#dom-errorevent-lineno</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-errorevent-lineno">2.3. Firing the event</a> <a href="#ref-for-dom-errorevent-lineno①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-errorevent-message">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-errorevent-message">https://html.spec.whatwg.org/multipage/webappapis.html#dom-errorevent-message</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-errorevent-message">2.3. Firing the event</a> <a href="#ref-for-dom-errorevent-message①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-navigable">
   <a href="https://whatpr.org/html/6315/history.html#navigable">https://whatpr.org/html/6315/history.html#navigable</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-navigable">4.4. History traversal updates</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-navigate">
   <a href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate">https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-navigate">1.3. Navigating</a> <a href="#ref-for-navigate①">(2)</a>
    <li><a href="#ref-for-navigate②">4.1. Form submission patches</a> <a href="#ref-for-navigate③">(2)</a> <a href="#ref-for-navigate④">(3)</a>
    <li><a href="#ref-for-navigate⑤">4.2. Browser UI/user-initiated patches</a> <a href="#ref-for-navigate⑥">(2)</a> <a href="#ref-for-navigate⑦">(3)</a> <a href="#ref-for-navigate⑧">(4)</a> <a href="#ref-for-navigate⑨">(5)</a> <a href="#ref-for-navigate①⓪">(6)</a>
    <li><a href="#ref-for-navigate①①">4.3. Navigation algorithm updates</a> <a href="#ref-for-navigate①②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-navigate-fragid">
   <a href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate-fragid">https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate-fragid</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-navigate-fragid">1.3. Navigating</a>
    <li><a href="#ref-for-navigate-fragid①">2.1. The AppHistoryNavigateEvent class</a>
    <li><a href="#ref-for-navigate-fragid②">4.2. Browser UI/user-initiated patches</a>
    <li><a href="#ref-for-navigate-fragid③">4.3. Navigation algorithm updates</a> <a href="#ref-for-navigate-fragid④">(2)</a> <a href="#ref-for-navigate-fragid⑤">(3)</a>
    <li><a href="#ref-for-navigate-fragid⑥">5.3. Carrying over the app history state</a>
    <li><a href="#ref-for-navigate-fragid⑦">5.4. Tracking the origin member</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-navigation-navigationtype">
   <a href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigation-navigationtype">https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigation-navigationtype</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-navigation-navigationtype">4.1. Form submission patches</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-document-open">
   <a href="https://html.spec.whatwg.org/multipage/multipage/dynamic-markup-insertion.html#dom-document-open">https://html.spec.whatwg.org/multipage/multipage/dynamic-markup-insertion.html#dom-document-open</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-document-open">1.1. Introspecting the app history entry list</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-settings-object-origin">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin">https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-settings-object-origin">2.3. Firing the event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-parse-a-url">
   <a href="https://html.spec.whatwg.org/multipage/urls-and-fetching.html#parse-a-url">https://html.spec.whatwg.org/multipage/urls-and-fetching.html#parse-a-url</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-parse-a-url">1.3. Navigating</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-plan-to-navigate">
   <a href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#plan-to-navigate">https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#plan-to-navigate</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-plan-to-navigate">4.1. Form submission patches</a> <a href="#ref-for-plan-to-navigate①">(2)</a>
    <li><a href="#ref-for-plan-to-navigate②">4.2. Browser UI/user-initiated patches</a> <a href="#ref-for-plan-to-navigate③">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-history-pushstate">
   <a href="https://html.spec.whatwg.org/multipage/history.html#dom-history-pushstate">https://html.spec.whatwg.org/multipage/history.html#dom-history-pushstate</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-history-pushstate">2.2. The AppHistoryDestination class</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-queue-a-global-task">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task">https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-queue-a-global-task">4.4. History traversal updates</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-queue-a-microtask">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-microtask">https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-microtask</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-queue-a-microtask">2.3. Firing the event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-relevant-agent">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-agent">https://html.spec.whatwg.org/multipage/webappapis.html#relevant-agent</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-relevant-agent">2.3. Firing the event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-relevant-global">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global">https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-relevant-global">1.1. Introspecting the app history entry list</a> <a href="#ref-for-concept-relevant-global①">(2)</a> <a href="#ref-for-concept-relevant-global②">(3)</a> <a href="#ref-for-concept-relevant-global③">(4)</a> <a href="#ref-for-concept-relevant-global④">(5)</a>
    <li><a href="#ref-for-concept-relevant-global⑤">1.3. Navigating</a> <a href="#ref-for-concept-relevant-global⑥">(2)</a> <a href="#ref-for-concept-relevant-global⑦">(3)</a> <a href="#ref-for-concept-relevant-global⑧">(4)</a> <a href="#ref-for-concept-relevant-global⑨">(5)</a> <a href="#ref-for-concept-relevant-global①⓪">(6)</a>
    <li><a href="#ref-for-concept-relevant-global①①">1.4. Traversing</a> <a href="#ref-for-concept-relevant-global①②">(2)</a> <a href="#ref-for-concept-relevant-global①③">(3)</a> <a href="#ref-for-concept-relevant-global①④">(4)</a>
    <li><a href="#ref-for-concept-relevant-global①⑤">2.1. The AppHistoryNavigateEvent class</a>
    <li><a href="#ref-for-concept-relevant-global①⑥">2.3. Firing the event</a> <a href="#ref-for-concept-relevant-global①⑦">(2)</a> <a href="#ref-for-concept-relevant-global①⑧">(3)</a> <a href="#ref-for-concept-relevant-global①⑨">(4)</a> <a href="#ref-for-concept-relevant-global②⓪">(5)</a> <a href="#ref-for-concept-relevant-global②①">(6)</a>
    <li><a href="#ref-for-concept-relevant-global②②">3. App history entries</a> <a href="#ref-for-concept-relevant-global②③">(2)</a> <a href="#ref-for-concept-relevant-global②④">(3)</a> <a href="#ref-for-concept-relevant-global②⑤">(4)</a> <a href="#ref-for-concept-relevant-global②⑥">(5)</a> <a href="#ref-for-concept-relevant-global②⑦">(6)</a> <a href="#ref-for-concept-relevant-global②⑧">(7)</a>
    <li><a href="#ref-for-concept-relevant-global②⑨">4.3. Navigation algorithm updates</a> <a href="#ref-for-concept-relevant-global③⓪">(2)</a>
    <li><a href="#ref-for-concept-relevant-global③①">4.4. History traversal updates</a> <a href="#ref-for-concept-relevant-global③②">(2)</a>
    <li><a href="#ref-for-concept-relevant-global③③">5.5. Updating the AppHistory object</a> <a href="#ref-for-concept-relevant-global③④">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-relevant-realm">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm">https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-relevant-realm">1.1. Introspecting the app history entry list</a>
    <li><a href="#ref-for-concept-relevant-realm①">1.2. Ongoing navigation tracking</a> <a href="#ref-for-concept-relevant-realm②">(2)</a>
    <li><a href="#ref-for-concept-relevant-realm③">1.3. Navigating</a>
    <li><a href="#ref-for-concept-relevant-realm④">1.4. Traversing</a>
    <li><a href="#ref-for-concept-relevant-realm⑤">2.3. Firing the event</a> <a href="#ref-for-concept-relevant-realm⑥">(2)</a> <a href="#ref-for-concept-relevant-realm⑦">(3)</a> <a href="#ref-for-concept-relevant-realm⑧">(4)</a> <a href="#ref-for-concept-relevant-realm⑨">(5)</a> <a href="#ref-for-concept-relevant-realm①⓪">(6)</a> <a href="#ref-for-concept-relevant-realm①①">(7)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-relevant-settings-object">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object">https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-relevant-settings-object">1.3. Navigating</a>
    <li><a href="#ref-for-relevant-settings-object①">2.3. Firing the event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-hh-reload">
   <a href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#hh-reload">https://html.spec.whatwg.org/multipage/browsing-the-web.html#hh-reload</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-hh-reload">1.3. Navigating</a> <a href="#ref-for-hh-reload①">(2)</a>
    <li><a href="#ref-for-hh-reload②">4.3. Navigation algorithm updates</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-hh-replace">
   <a href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#hh-replace">https://html.spec.whatwg.org/multipage/browsing-the-web.html#hh-replace</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-hh-replace">1.3. Navigating</a> <a href="#ref-for-hh-replace①">(2)</a>
    <li><a href="#ref-for-hh-replace②">4.3. Navigation algorithm updates</a>
    <li><a href="#ref-for-hh-replace③">5.2. Carrying over the app history key</a>
    <li><a href="#ref-for-hh-replace④">5.4. Tracking the origin member</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-report-the-exception">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#report-the-exception">https://html.spec.whatwg.org/multipage/webappapis.html#report-the-exception</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-report-the-exception">2.3. Firing the event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-resulting-url-record">
   <a href="https://html.spec.whatwg.org/multipage/urls-and-fetching.html#resulting-url-record">https://html.spec.whatwg.org/multipage/urls-and-fetching.html#resulting-url-record</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-resulting-url-record">1.3. Navigating</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-same-origin">
   <a href="https://html.spec.whatwg.org/multipage/origin.html#same-origin">https://html.spec.whatwg.org/multipage/origin.html#same-origin</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-same-origin">1.1. Introspecting the app history entry list</a> <a href="#ref-for-same-origin①">(2)</a> <a href="#ref-for-same-origin②">(3)</a>
    <li><a href="#ref-for-same-origin③">2.3. Firing the event</a> <a href="#ref-for-same-origin④">(2)</a> <a href="#ref-for-same-origin⑤">(3)</a>
    <li><a href="#ref-for-same-origin⑥">5.2. Carrying over the app history key</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-same-origin-domain">
   <a href="https://html.spec.whatwg.org/multipage/origin.html#same-origin-domain">https://html.spec.whatwg.org/multipage/origin.html#same-origin-domain</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-same-origin-domain">1.3. Navigating</a>
    <li><a href="#ref-for-same-origin-domain①">4.3. Navigation algorithm updates</a> <a href="#ref-for-same-origin-domain②">(2)</a>
    <li><a href="#ref-for-same-origin-domain③">4.4. History traversal updates</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-serializable-objects">
   <a href="https://html.spec.whatwg.org/multipage/structured-data.html#serializable-objects">https://html.spec.whatwg.org/multipage/structured-data.html#serializable-objects</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-serializable-objects">1.3. Navigating</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-serialized-state">
   <a href="https://html.spec.whatwg.org/multipage/history.html#serialized-state">https://html.spec.whatwg.org/multipage/history.html#serialized-state</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-serialized-state">1.2. Ongoing navigation tracking</a>
    <li><a href="#ref-for-serialized-state①">1.3. Navigating</a>
    <li><a href="#ref-for-serialized-state②">2.1. The AppHistoryNavigateEvent class</a>
    <li><a href="#ref-for-serialized-state③">2.2. The AppHistoryDestination class</a>
    <li><a href="#ref-for-serialized-state④">2.3. Firing the event</a> <a href="#ref-for-serialized-state⑤">(2)</a>
    <li><a href="#ref-for-serialized-state⑥">5.1. New session history entry items</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-uhus-serializeddata">
   <a href="https://html.spec.whatwg.org/multipage/history.html#uhus-serializeddata">https://html.spec.whatwg.org/multipage/history.html#uhus-serializeddata</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-uhus-serializeddata">2.3. Firing the event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-session-history">
   <a href="https://html.spec.whatwg.org/multipage/history.html#session-history">https://html.spec.whatwg.org/multipage/history.html#session-history</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-session-history">1.1. Introspecting the app history entry list</a>
    <li><a href="#ref-for-session-history①">1.3. Navigating</a>
    <li><a href="#ref-for-session-history②">4.3. Navigation algorithm updates</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-session-history-entry">
   <a href="https://html.spec.whatwg.org/multipage/history.html#session-history-entry">https://html.spec.whatwg.org/multipage/history.html#session-history-entry</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-session-history-entry">1.1. Introspecting the app history entry list</a>
    <li><a href="#ref-for-session-history-entry①">1.4. Traversing</a> <a href="#ref-for-session-history-entry②">(2)</a>
    <li><a href="#ref-for-session-history-entry③">2.1. The AppHistoryNavigateEvent class</a>
    <li><a href="#ref-for-session-history-entry④">2.3. Firing the event</a> <a href="#ref-for-session-history-entry⑤">(2)</a>
    <li><a href="#ref-for-session-history-entry⑥">3. App history entries</a>
    <li><a href="#ref-for-session-history-entry⑦">5. Patches to session history</a>
    <li><a href="#ref-for-session-history-entry⑧">5.1. New session history entry items</a> <a href="#ref-for-session-history-entry⑨">(2)</a>
    <li><a href="#ref-for-session-history-entry①⓪">5.4. Tracking the origin member</a> <a href="#ref-for-session-history-entry①①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-tn-session-history-traversal-queue">
   <a href="https://whatpr.org/html/6315/history.html#tn-session-history-traversal-queue">https://whatpr.org/html/6315/history.html#tn-session-history-traversal-queue</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-tn-session-history-traversal-queue">1.2. Ongoing navigation tracking</a>
    <li><a href="#ref-for-tn-session-history-traversal-queue①">1.4. Traversing</a>
    <li><a href="#ref-for-tn-session-history-traversal-queue②">4.4. History traversal updates</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-shared-history-push/replace-state-steps">
   <a href="https://html.spec.whatwg.org/multipage/history.html#shared-history-push/replace-state-steps">https://html.spec.whatwg.org/multipage/history.html#shared-history-push/replace-state-steps</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-shared-history-push/replace-state-steps">4.3. Navigation algorithm updates</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-source-browsing-context">
   <a href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#source-browsing-context">https://html.spec.whatwg.org/multipage/browsing-the-web.html#source-browsing-context</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-source-browsing-context">1.3. Navigating</a> <a href="#ref-for-source-browsing-context①">(2)</a>
    <li><a href="#ref-for-source-browsing-context②">4.3. Navigation algorithm updates</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-history-state">
   <a href="https://html.spec.whatwg.org/multipage/history.html#dom-history-state">https://html.spec.whatwg.org/multipage/history.html#dom-history-state</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-history-state">3. App history entries</a> <a href="#ref-for-dom-history-state①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-she-step">
   <a href="https://whatpr.org/html/6315/history.html#she-step">https://whatpr.org/html/6315/history.html#she-step</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-she-step">1.4. Traversing</a> <a href="#ref-for-she-step①">(2)</a> <a href="#ref-for-she-step②">(3)</a>
    <li><a href="#ref-for-she-step③">4.4. History traversal updates</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-still-on-its-initial-about:blank-document">
   <a href="https://html.spec.whatwg.org/multipage/dom.html#still-on-its-initial-about:blank-document">https://html.spec.whatwg.org/multipage/dom.html#still-on-its-initial-about:blank-document</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-still-on-its-initial-about:blank-document">1.1. Introspecting the app history entry list</a>
    <li><a href="#ref-for-still-on-its-initial-about:blank-document①">2.3. Firing the event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-stop-document-loading">
   <a href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#stop-document-loading">https://html.spec.whatwg.org/multipage/browsing-the-web.html#stop-document-loading</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-stop-document-loading">6.1. Canceling navigation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-window-stop">
   <a href="https://html.spec.whatwg.org/multipage/window-object.html#dom-window-stop">https://html.spec.whatwg.org/multipage/window-object.html#dom-window-stop</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-window-stop">6.1. Canceling navigation</a> <a href="#ref-for-dom-window-stop①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-submit-body">
   <a href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#submit-body">https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#submit-body</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-submit-body">4.1. Form submission patches</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-submit-button">
   <a href="https://html.spec.whatwg.org/multipage/forms.html#concept-submit-button">https://html.spec.whatwg.org/multipage/forms.html#concept-submit-button</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-submit-button">4.2. Browser UI/user-initiated patches</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-form-submit">
   <a href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#concept-form-submit">https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#concept-form-submit</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-form-submit">2.1. The AppHistoryNavigateEvent class</a>
    <li><a href="#ref-for-concept-form-submit①">4.2. Browser UI/user-initiated patches</a> <a href="#ref-for-concept-form-submit②">(2)</a> <a href="#ref-for-concept-form-submit③">(3)</a> <a href="#ref-for-concept-form-submit④">(4)</a> <a href="#ref-for-concept-form-submit⑤">(5)</a> <a href="#ref-for-concept-form-submit⑥">(6)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-nav-traversable">
   <a href="https://whatpr.org/html/6315/history.html#nav-traversable">https://whatpr.org/html/6315/history.html#nav-traversable</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-nav-traversable">1.4. Traversing</a>
    <li><a href="#ref-for-nav-traversable①">4.4. History traversal updates</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-traverse-the-history">
   <a href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#traverse-the-history">https://html.spec.whatwg.org/multipage/browsing-the-web.html#traverse-the-history</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-traverse-the-history">5.4. Tracking the origin member</a>
    <li><a href="#ref-for-traverse-the-history①">5.5. Updating the AppHistory object</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-traverse-the-history-by-a-delta">
   <a href="https://html.spec.whatwg.org/multipage/history.html#traverse-the-history-by-a-delta">https://html.spec.whatwg.org/multipage/history.html#traverse-the-history-by-a-delta</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-traverse-the-history-by-a-delta">4.2. Browser UI/user-initiated patches</a> <a href="#ref-for-traverse-the-history-by-a-delta①">(2)</a>
    <li><a href="#ref-for-traverse-the-history-by-a-delta②">4.3. Navigation algorithm updates</a>
    <li><a href="#ref-for-traverse-the-history-by-a-delta③">4.4. History traversal updates</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-unload-counter">
   <a href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#unload-counter">https://html.spec.whatwg.org/multipage/browsing-the-web.html#unload-counter</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-unload-counter">1.3. Navigating</a> <a href="#ref-for-unload-counter①">(2)</a>
    <li><a href="#ref-for-unload-counter②">1.4. Traversing</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-update-the-session-history-with-the-new-page">
   <a href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#update-the-session-history-with-the-new-page">https://html.spec.whatwg.org/multipage/browsing-the-web.html#update-the-session-history-with-the-new-page</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-update-the-session-history-with-the-new-page">5.2. Carrying over the app history key</a>
    <li><a href="#ref-for-update-the-session-history-with-the-new-page①">5.4. Tracking the origin member</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-she-url">
   <a href="https://html.spec.whatwg.org/multipage/history.html#she-url">https://html.spec.whatwg.org/multipage/history.html#she-url</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-she-url">2.3. Firing the event</a>
    <li><a href="#ref-for-she-url①">3. App history entries</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-url-and-history-update-steps">
   <a href="https://html.spec.whatwg.org/multipage/history.html#url-and-history-update-steps">https://html.spec.whatwg.org/multipage/history.html#url-and-history-update-steps</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-url-and-history-update-steps">1.1. Introspecting the app history entry list</a>
    <li><a href="#ref-for-url-and-history-update-steps①">2.3. Firing the event</a>
    <li><a href="#ref-for-url-and-history-update-steps②">4.3. Navigation algorithm updates</a>
    <li><a href="#ref-for-url-and-history-update-steps③">5.4. Tracking the origin member</a>
    <li><a href="#ref-for-url-and-history-update-steps④">5.5. Updating the AppHistory object</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-list-append">
   <a href="https://infra.spec.whatwg.org/#list-append">https://infra.spec.whatwg.org/#list-append</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-list-append">1.1. Introspecting the app history entry list</a> <a href="#ref-for-list-append①">(2)</a> <a href="#ref-for-list-append②">(3)</a> <a href="#ref-for-list-append③">(4)</a>
    <li><a href="#ref-for-list-append④">2.1. The AppHistoryNavigateEvent class</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-assert">
   <a href="https://infra.spec.whatwg.org/#assert">https://infra.spec.whatwg.org/#assert</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-assert">1.1. Introspecting the app history entry list</a>
    <li><a href="#ref-for-assert①">1.3. Navigating</a>
    <li><a href="#ref-for-assert②">2.3. Firing the event</a>
    <li><a href="#ref-for-assert③">4.3. Navigation algorithm updates</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-iteration-break">
   <a href="https://infra.spec.whatwg.org/#iteration-break">https://infra.spec.whatwg.org/#iteration-break</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-iteration-break">1.1. Introspecting the app history entry list</a> <a href="#ref-for-iteration-break①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-list-contain">
   <a href="https://infra.spec.whatwg.org/#list-contain">https://infra.spec.whatwg.org/#list-contain</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-list-contain">1.1. Introspecting the app history entry list</a>
    <li><a href="#ref-for-list-contain①">4.4. History traversal updates</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-map-exists">
   <a href="https://infra.spec.whatwg.org/#map-exists">https://infra.spec.whatwg.org/#map-exists</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-map-exists">1.3. Navigating</a> <a href="#ref-for-map-exists①">(2)</a>
    <li><a href="#ref-for-map-exists②">1.4. Traversing</a> <a href="#ref-for-map-exists③">(2)</a>
    <li><a href="#ref-for-map-exists④">2.3. Firing the event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-list-iterate">
   <a href="https://infra.spec.whatwg.org/#list-iterate">https://infra.spec.whatwg.org/#list-iterate</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-list-iterate">1.1. Introspecting the app history entry list</a> <a href="#ref-for-list-iterate①">(2)</a> <a href="#ref-for-list-iterate②">(3)</a>
    <li><a href="#ref-for-list-iterate③">4.4. History traversal updates</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-string-is">
   <a href="https://infra.spec.whatwg.org/#string-is">https://infra.spec.whatwg.org/#string-is</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-string-is">2.3. Firing the event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-list-is-empty">
   <a href="https://infra.spec.whatwg.org/#list-is-empty">https://infra.spec.whatwg.org/#list-is-empty</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-list-is-empty">1.1. Introspecting the app history entry list</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-struct-item">
   <a href="https://infra.spec.whatwg.org/#struct-item">https://infra.spec.whatwg.org/#struct-item</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-struct-item">1.2. Ongoing navigation tracking</a>
    <li><a href="#ref-for-struct-item①">5.1. New session history entry items</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-list">
   <a href="https://infra.spec.whatwg.org/#list">https://infra.spec.whatwg.org/#list</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-list">1.1. Introspecting the app history entry list</a>
    <li><a href="#ref-for-list①">2.1. The AppHistoryNavigateEvent class</a>
    <li><a href="#ref-for-list②">2.3. Firing the event</a> <a href="#ref-for-list③">(2)</a>
    <li><a href="#ref-for-list④">4.1. Form submission patches</a>
    <li><a href="#ref-for-list⑤">4.4. History traversal updates</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-ordered-map">
   <a href="https://infra.spec.whatwg.org/#ordered-map">https://infra.spec.whatwg.org/#ordered-map</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-ordered-map">1.2. Ongoing navigation tracking</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-list-prepend">
   <a href="https://infra.spec.whatwg.org/#list-prepend">https://infra.spec.whatwg.org/#list-prepend</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-list-prepend">1.1. Introspecting the app history entry list</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-map-remove">
   <a href="https://infra.spec.whatwg.org/#map-remove">https://infra.spec.whatwg.org/#map-remove</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-map-remove">1.2. Ongoing navigation tracking</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-list-size">
   <a href="https://infra.spec.whatwg.org/#list-size">https://infra.spec.whatwg.org/#list-size</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-list-size">1.1. Introspecting the app history entry list</a> <a href="#ref-for-list-size①">(2)</a>
    <li><a href="#ref-for-list-size②">1.4. Traversing</a>
    <li><a href="#ref-for-list-size③">4.4. History traversal updates</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-string">
   <a href="https://infra.spec.whatwg.org/#string">https://infra.spec.whatwg.org/#string</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-string">2.2. The AppHistoryDestination class</a> <a href="#ref-for-string①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-struct">
   <a href="https://infra.spec.whatwg.org/#struct">https://infra.spec.whatwg.org/#struct</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-struct">1.2. Ongoing navigation tracking</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-user-agent">
   <a href="https://infra.spec.whatwg.org/#user-agent">https://infra.spec.whatwg.org/#user-agent</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-user-agent">3. App history entries</a> <a href="#ref-for-user-agent①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-url-equals">
   <a href="https://url.spec.whatwg.org/#concept-url-equals">https://url.spec.whatwg.org/#concept-url-equals</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-url-equals">2.3. Firing the event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-url-equals-exclude-fragments">
   <a href="https://url.spec.whatwg.org/#url-equals-exclude-fragments">https://url.spec.whatwg.org/#url-equals-exclude-fragments</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-url-equals-exclude-fragments">2.3. Firing the event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-url-fragment">
   <a href="https://url.spec.whatwg.org/#concept-url-fragment">https://url.spec.whatwg.org/#concept-url-fragment</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-url-fragment">2.3. Firing the event</a> <a href="#ref-for-concept-url-fragment①">(2)</a> <a href="#ref-for-concept-url-fragment②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-url-origin">
   <a href="https://url.spec.whatwg.org/#concept-url-origin">https://url.spec.whatwg.org/#concept-url-origin</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-url-origin">2.3. Firing the event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-url-path">
   <a href="https://url.spec.whatwg.org/#concept-url-path">https://url.spec.whatwg.org/#concept-url-path</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-url-path">2.3. Firing the event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-url-query">
   <a href="https://url.spec.whatwg.org/#concept-url-query">https://url.spec.whatwg.org/#concept-url-query</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-url-query">2.3. Firing the event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-url">
   <a href="https://url.spec.whatwg.org/#concept-url">https://url.spec.whatwg.org/#concept-url</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-url">1.3. Navigating</a>
    <li><a href="#ref-for-concept-url①">2.2. The AppHistoryDestination class</a>
    <li><a href="#ref-for-concept-url②">2.3. Firing the event</a> <a href="#ref-for-concept-url③">(2)</a> <a href="#ref-for-concept-url④">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-url-serializer">
   <a href="https://url.spec.whatwg.org/#concept-url-serializer">https://url.spec.whatwg.org/#concept-url-serializer</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-url-serializer">2.2. The AppHistoryDestination class</a>
    <li><a href="#ref-for-concept-url-serializer①">3. App history entries</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-generate-a-random-uuid">
   <a href="https://wicg.github.io/uuid/#dfn-generate-a-random-uuid">https://wicg.github.io/uuid/#dfn-generate-a-random-uuid</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-generate-a-random-uuid">5.1. New session history entry items</a> <a href="#ref-for-dfn-generate-a-random-uuid①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-http-headerdef-sec-fetch-site">
   <a href="https://w3c.github.io/webappsec-fetch-metadata/#http-headerdef-sec-fetch-site">https://w3c.github.io/webappsec-fetch-metadata/#http-headerdef-sec-fetch-site</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-http-headerdef-sec-fetch-site">4.2. Browser UI/user-initiated patches</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-aborterror">
   <a href="https://heycam.github.io/webidl/#aborterror">https://heycam.github.io/webidl/#aborterror</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-aborterror">1.3. Navigating</a>
    <li><a href="#ref-for-aborterror①">2.3. Firing the event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-ArrayBuffer">
   <a href="https://heycam.github.io/webidl/#idl-ArrayBuffer">https://heycam.github.io/webidl/#idl-ArrayBuffer</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-ArrayBuffer">3. App history entries</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-DOMException">
   <a href="https://heycam.github.io/webidl/#idl-DOMException">https://heycam.github.io/webidl/#idl-DOMException</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-DOMException">1.3. Navigating</a> <a href="#ref-for-idl-DOMException①">(2)</a> <a href="#ref-for-idl-DOMException②">(3)</a> <a href="#ref-for-idl-DOMException③">(4)</a> <a href="#ref-for-idl-DOMException④">(5)</a> <a href="#ref-for-idl-DOMException⑤">(6)</a>
    <li><a href="#ref-for-idl-DOMException⑥">1.4. Traversing</a> <a href="#ref-for-idl-DOMException⑦">(2)</a> <a href="#ref-for-idl-DOMException⑧">(3)</a> <a href="#ref-for-idl-DOMException⑨">(4)</a> <a href="#ref-for-idl-DOMException①⓪">(5)</a> <a href="#ref-for-idl-DOMException①①">(6)</a> <a href="#ref-for-idl-DOMException①②">(7)</a> <a href="#ref-for-idl-DOMException①③">(8)</a> <a href="#ref-for-idl-DOMException①④">(9)</a> <a href="#ref-for-idl-DOMException①⑤">(10)</a> <a href="#ref-for-idl-DOMException①⑥">(11)</a>
    <li><a href="#ref-for-idl-DOMException①⑦">2.1. The AppHistoryNavigateEvent class</a> <a href="#ref-for-idl-DOMException①⑧">(2)</a> <a href="#ref-for-idl-DOMException①⑨">(3)</a> <a href="#ref-for-idl-DOMException②⓪">(4)</a> <a href="#ref-for-idl-DOMException②①">(5)</a> <a href="#ref-for-idl-DOMException②②">(6)</a> <a href="#ref-for-idl-DOMException②③">(7)</a>
    <li><a href="#ref-for-idl-DOMException②④">2.3. Firing the event</a> <a href="#ref-for-idl-DOMException②⑤">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-DOMString">
   <a href="https://heycam.github.io/webidl/#idl-DOMString">https://heycam.github.io/webidl/#idl-DOMString</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-DOMString">1. The AppHistory class</a>
    <li><a href="#ref-for-idl-DOMString①">2.1. The AppHistoryNavigateEvent class</a>
    <li><a href="#ref-for-idl-DOMString②">2.2. The AppHistoryDestination class</a> <a href="#ref-for-idl-DOMString③">(2)</a>
    <li><a href="#ref-for-idl-DOMString④">3. App history entries</a> <a href="#ref-for-idl-DOMString⑤">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-Exposed">
   <a href="https://heycam.github.io/webidl/#Exposed">https://heycam.github.io/webidl/#Exposed</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-Exposed">1. The AppHistory class</a>
    <li><a href="#ref-for-Exposed①">2.1. The AppHistoryNavigateEvent class</a>
    <li><a href="#ref-for-Exposed②">2.2. The AppHistoryDestination class</a>
    <li><a href="#ref-for-Exposed③">3. App history entries</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-invalidstateerror">
   <a href="https://heycam.github.io/webidl/#invalidstateerror">https://heycam.github.io/webidl/#invalidstateerror</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-invalidstateerror">1.3. Navigating</a> <a href="#ref-for-invalidstateerror①">(2)</a> <a href="#ref-for-invalidstateerror②">(3)</a> <a href="#ref-for-invalidstateerror③">(4)</a>
    <li><a href="#ref-for-invalidstateerror④">1.4. Traversing</a> <a href="#ref-for-invalidstateerror⑤">(2)</a> <a href="#ref-for-invalidstateerror⑥">(3)</a> <a href="#ref-for-invalidstateerror⑦">(4)</a> <a href="#ref-for-invalidstateerror⑧">(5)</a> <a href="#ref-for-invalidstateerror⑨">(6)</a> <a href="#ref-for-invalidstateerror①⓪">(7)</a> <a href="#ref-for-invalidstateerror①①">(8)</a> <a href="#ref-for-invalidstateerror①②">(9)</a> <a href="#ref-for-invalidstateerror①③">(10)</a>
    <li><a href="#ref-for-invalidstateerror①④">2.1. The AppHistoryNavigateEvent class</a> <a href="#ref-for-invalidstateerror①⑤">(2)</a> <a href="#ref-for-invalidstateerror①⑥">(3)</a> <a href="#ref-for-invalidstateerror①⑦">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-promise">
   <a href="https://heycam.github.io/webidl/#idl-promise">https://heycam.github.io/webidl/#idl-promise</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-promise">1. The AppHistory class</a> <a href="#ref-for-idl-promise①">(2)</a> <a href="#ref-for-idl-promise②">(3)</a> <a href="#ref-for-idl-promise③">(4)</a> <a href="#ref-for-idl-promise④">(5)</a>
    <li><a href="#ref-for-idl-promise⑤">1.2. Ongoing navigation tracking</a> <a href="#ref-for-idl-promise⑥">(2)</a> <a href="#ref-for-idl-promise⑦">(3)</a> <a href="#ref-for-idl-promise⑧">(4)</a>
    <li><a href="#ref-for-idl-promise⑨">2.1. The AppHistoryNavigateEvent class</a> <a href="#ref-for-idl-promise①⓪">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-securityerror">
   <a href="https://heycam.github.io/webidl/#securityerror">https://heycam.github.io/webidl/#securityerror</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-securityerror">1.4. Traversing</a>
    <li><a href="#ref-for-securityerror①">2.1. The AppHistoryNavigateEvent class</a> <a href="#ref-for-securityerror②">(2)</a> <a href="#ref-for-securityerror③">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-syntaxerror">
   <a href="https://heycam.github.io/webidl/#syntaxerror">https://heycam.github.io/webidl/#syntaxerror</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-syntaxerror">1.3. Navigating</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-USVString">
   <a href="https://heycam.github.io/webidl/#idl-USVString">https://heycam.github.io/webidl/#idl-USVString</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-USVString">1. The AppHistory class</a>
    <li><a href="#ref-for-idl-USVString①">2.2. The AppHistoryDestination class</a>
    <li><a href="#ref-for-idl-USVString②">3. App history entries</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-a-new-promise">
   <a href="https://heycam.github.io/webidl/#a-new-promise">https://heycam.github.io/webidl/#a-new-promise</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-a-new-promise">1.2. Ongoing navigation tracking</a> <a href="#ref-for-a-new-promise①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-a-promise-rejected-with">
   <a href="https://heycam.github.io/webidl/#a-promise-rejected-with">https://heycam.github.io/webidl/#a-promise-rejected-with</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-a-promise-rejected-with">1.3. Navigating</a> <a href="#ref-for-a-promise-rejected-with①">(2)</a> <a href="#ref-for-a-promise-rejected-with②">(3)</a> <a href="#ref-for-a-promise-rejected-with③">(4)</a> <a href="#ref-for-a-promise-rejected-with④">(5)</a> <a href="#ref-for-a-promise-rejected-with⑤">(6)</a> <a href="#ref-for-a-promise-rejected-with⑥">(7)</a>
    <li><a href="#ref-for-a-promise-rejected-with⑦">1.4. Traversing</a> <a href="#ref-for-a-promise-rejected-with⑧">(2)</a> <a href="#ref-for-a-promise-rejected-with⑨">(3)</a> <a href="#ref-for-a-promise-rejected-with①⓪">(4)</a> <a href="#ref-for-a-promise-rejected-with①①">(5)</a> <a href="#ref-for-a-promise-rejected-with①②">(6)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-a-promise-resolved-with">
   <a href="https://heycam.github.io/webidl/#a-promise-resolved-with">https://heycam.github.io/webidl/#a-promise-resolved-with</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-a-promise-resolved-with">1.4. Traversing</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-any">
   <a href="https://heycam.github.io/webidl/#idl-any">https://heycam.github.io/webidl/#idl-any</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-any">1. The AppHistory class</a> <a href="#ref-for-idl-any①">(2)</a> <a href="#ref-for-idl-any②">(3)</a>
    <li><a href="#ref-for-idl-any③">2.1. The AppHistoryNavigateEvent class</a> <a href="#ref-for-idl-any④">(2)</a>
    <li><a href="#ref-for-idl-any⑤">2.2. The AppHistoryDestination class</a>
    <li><a href="#ref-for-idl-any⑥">3. App history entries</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-boolean">
   <a href="https://heycam.github.io/webidl/#idl-boolean">https://heycam.github.io/webidl/#idl-boolean</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-boolean">1. The AppHistory class</a> <a href="#ref-for-idl-boolean①">(2)</a> <a href="#ref-for-idl-boolean②">(3)</a>
    <li><a href="#ref-for-idl-boolean③">2.1. The AppHistoryNavigateEvent class</a> <a href="#ref-for-idl-boolean④">(2)</a> <a href="#ref-for-idl-boolean⑤">(3)</a> <a href="#ref-for-idl-boolean⑥">(4)</a> <a href="#ref-for-idl-boolean⑦">(5)</a> <a href="#ref-for-idl-boolean⑧">(6)</a>
    <li><a href="#ref-for-idl-boolean⑨">2.2. The AppHistoryDestination class</a>
    <li><a href="#ref-for-idl-boolean①⓪">3. App history entries</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-long-long">
   <a href="https://heycam.github.io/webidl/#idl-long-long">https://heycam.github.io/webidl/#idl-long-long</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-long-long">2.2. The AppHistoryDestination class</a>
    <li><a href="#ref-for-idl-long-long①">3. App history entries</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-domexception-message">
   <a href="https://heycam.github.io/webidl/#dom-domexception-message">https://heycam.github.io/webidl/#dom-domexception-message</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-domexception-message">2.3. Firing the event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-new">
   <a href="https://heycam.github.io/webidl/#new">https://heycam.github.io/webidl/#new</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-new">1.1. Introspecting the app history entry list</a>
    <li><a href="#ref-for-new①">1.3. Navigating</a>
    <li><a href="#ref-for-new②">1.4. Traversing</a>
    <li><a href="#ref-for-new③">2.3. Firing the event</a> <a href="#ref-for-new④">(2)</a> <a href="#ref-for-new⑤">(3)</a> <a href="#ref-for-new⑥">(4)</a> <a href="#ref-for-new⑦">(5)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-reject">
   <a href="https://heycam.github.io/webidl/#reject">https://heycam.github.io/webidl/#reject</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-reject">1.2. Ongoing navigation tracking</a> <a href="#ref-for-reject①">(2)</a>
    <li><a href="#ref-for-reject②">1.3. Navigating</a>
    <li><a href="#ref-for-reject③">1.4. Traversing</a>
    <li><a href="#ref-for-reject④">2.3. Firing the event</a> <a href="#ref-for-reject⑤">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-resolve">
   <a href="https://heycam.github.io/webidl/#resolve">https://heycam.github.io/webidl/#resolve</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-resolve">1.2. Ongoing navigation tracking</a> <a href="#ref-for-resolve①">(2)</a>
    <li><a href="#ref-for-resolve②">2.3. Firing the event</a> <a href="#ref-for-resolve③">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-sequence">
   <a href="https://heycam.github.io/webidl/#idl-sequence">https://heycam.github.io/webidl/#idl-sequence</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-sequence">1. The AppHistory class</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-this">
   <a href="https://heycam.github.io/webidl/#this">https://heycam.github.io/webidl/#this</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-this">1. The AppHistory class</a>
    <li><a href="#ref-for-this①">1.1. Introspecting the app history entry list</a> <a href="#ref-for-this②">(2)</a> <a href="#ref-for-this③">(3)</a> <a href="#ref-for-this④">(4)</a> <a href="#ref-for-this⑤">(5)</a> <a href="#ref-for-this⑥">(6)</a> <a href="#ref-for-this⑦">(7)</a> <a href="#ref-for-this⑧">(8)</a> <a href="#ref-for-this⑨">(9)</a> <a href="#ref-for-this①⓪">(10)</a> <a href="#ref-for-this①①">(11)</a> <a href="#ref-for-this①②">(12)</a> <a href="#ref-for-this①③">(13)</a>
    <li><a href="#ref-for-this①④">1.3. Navigating</a> <a href="#ref-for-this①⑤">(2)</a> <a href="#ref-for-this①⑥">(3)</a> <a href="#ref-for-this①⑦">(4)</a> <a href="#ref-for-this①⑧">(5)</a> <a href="#ref-for-this①⑨">(6)</a> <a href="#ref-for-this②⓪">(7)</a> <a href="#ref-for-this②①">(8)</a> <a href="#ref-for-this②②">(9)</a> <a href="#ref-for-this②③">(10)</a> <a href="#ref-for-this②④">(11)</a>
    <li><a href="#ref-for-this②⑤">1.4. Traversing</a> <a href="#ref-for-this②⑥">(2)</a> <a href="#ref-for-this②⑦">(3)</a> <a href="#ref-for-this②⑧">(4)</a> <a href="#ref-for-this②⑨">(5)</a> <a href="#ref-for-this③⓪">(6)</a> <a href="#ref-for-this③①">(7)</a> <a href="#ref-for-this③②">(8)</a> <a href="#ref-for-this③③">(9)</a> <a href="#ref-for-this③④">(10)</a> <a href="#ref-for-this③⑤">(11)</a> <a href="#ref-for-this③⑥">(12)</a>
    <li><a href="#ref-for-this③⑦">2.1. The AppHistoryNavigateEvent class</a> <a href="#ref-for-this③⑧">(2)</a> <a href="#ref-for-this③⑨">(3)</a> <a href="#ref-for-this④⓪">(4)</a> <a href="#ref-for-this④①">(5)</a> <a href="#ref-for-this④②">(6)</a>
    <li><a href="#ref-for-this④③">2.2. The AppHistoryDestination class</a> <a href="#ref-for-this④④">(2)</a> <a href="#ref-for-this④⑤">(3)</a> <a href="#ref-for-this④⑥">(4)</a> <a href="#ref-for-this④⑦">(5)</a> <a href="#ref-for-this④⑧">(6)</a> <a href="#ref-for-this④⑨">(7)</a>
    <li><a href="#ref-for-this⑤⓪">2.3. Firing the event</a>
    <li><a href="#ref-for-this⑤①">3. App history entries</a> <a href="#ref-for-this⑤②">(2)</a> <a href="#ref-for-this⑤③">(3)</a> <a href="#ref-for-this⑤④">(4)</a> <a href="#ref-for-this⑤⑤">(5)</a> <a href="#ref-for-this⑤⑥">(6)</a> <a href="#ref-for-this⑤⑦">(7)</a> <a href="#ref-for-this⑤⑧">(8)</a> <a href="#ref-for-this⑤⑨">(9)</a> <a href="#ref-for-this⑥⓪">(10)</a> <a href="#ref-for-this⑥①">(11)</a> <a href="#ref-for-this⑥②">(12)</a> <a href="#ref-for-this⑥③">(13)</a> <a href="#ref-for-this⑥④">(14)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-undefined">
   <a href="https://heycam.github.io/webidl/#idl-undefined">https://heycam.github.io/webidl/#idl-undefined</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-undefined">1. The AppHistory class</a> <a href="#ref-for-idl-undefined①">(2)</a> <a href="#ref-for-idl-undefined②">(3)</a> <a href="#ref-for-idl-undefined③">(4)</a> <a href="#ref-for-idl-undefined④">(5)</a>
    <li><a href="#ref-for-idl-undefined⑤">2.1. The AppHistoryNavigateEvent class</a> <a href="#ref-for-idl-undefined⑥">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-wait-for-all">
   <a href="https://heycam.github.io/webidl/#wait-for-all">https://heycam.github.io/webidl/#wait-for-all</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-wait-for-all">2.3. Firing the event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-formdata">
   <a href="https://xhr.spec.whatwg.org/#formdata">https://xhr.spec.whatwg.org/#formdata</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-formdata">2.1. The AppHistoryNavigateEvent class</a> <a href="#ref-for-formdata①">(2)</a> <a href="#ref-for-formdata②">(3)</a>
    <li><a href="#ref-for-formdata③">2.3. Firing the event</a> <a href="#ref-for-formdata④">(2)</a> <a href="#ref-for-formdata⑤">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-formdata-entry">
   <a href="https://xhr.spec.whatwg.org/#concept-formdata-entry">https://xhr.spec.whatwg.org/#concept-formdata-entry</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-formdata-entry">2.3. Firing the event</a> <a href="#ref-for-concept-formdata-entry①">(2)</a>
    <li><a href="#ref-for-concept-formdata-entry②">4.1. Form submission patches</a>
   </ul>
  </aside>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[DOM]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-abortsignal">AbortSignal</span>
     <li><span class="dfn-paneled" id="term-for-document">Document</span>
     <li><span class="dfn-paneled" id="term-for-event">Event</span>
     <li><span class="dfn-paneled" id="term-for-dictdef-eventinit">EventInit</span>
     <li><span class="dfn-paneled" id="term-for-eventtarget">EventTarget</span>
     <li><span class="dfn-paneled" id="term-for-abortsignal-aborted-flag">aborted flag</span>
     <li><span class="dfn-paneled" id="term-for-eventtarget-activation-behavior">activation behavior</span>
     <li><span class="dfn-paneled" id="term-for-dom-event-cancelable">cancelable</span>
     <li><span class="dfn-paneled" id="term-for-canceled-flag">canceled flag</span>
     <li><span class="dfn-paneled" id="term-for-concept-event-create">creating an event</span>
     <li><span class="dfn-paneled" id="term-for-concept-event-dispatch">dispatch</span>
     <li><span class="dfn-paneled" id="term-for-dispatch-flag">dispatch flag</span>
     <li><span class="dfn-paneled" id="term-for-concept-event-fire">fire an event</span>
     <li><span class="dfn-paneled" id="term-for-dom-event-istrusted">isTrusted</span>
     <li><span class="dfn-paneled" id="term-for-concept-document-origin">origin</span>
     <li><span class="dfn-paneled" id="term-for-abortsignal-signal-abort">signal abort</span>
     <li><span class="dfn-paneled" id="term-for-dom-event-type">type</span>
     <li><span class="dfn-paneled" id="term-for-concept-document-url">url</span>
    </ul>
   <li>
    <a data-link-type="biblio">[FETCH]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-global-fetch">fetch(input)</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-errorevent">ErrorEvent</span>
     <li><span class="dfn-paneled" id="term-for-eventhandler">EventHandler</span>
     <li><span class="dfn-paneled" id="term-for-structureddeserialize">StructuredDeserialize</span>
     <li><span class="dfn-paneled" id="term-for-structuredserializeforstorage">StructuredSerializeForStorage</span>
     <li><span class="dfn-paneled" id="term-for-window">Window</span>
     <li><span class="dfn-paneled" id="term-for-the-a-element">a</span>
     <li><span class="dfn-paneled" id="term-for-nav-document">active document <small>(for navigable)</small></span>
     <li><span class="dfn-paneled" id="term-for-nav-active-history-entry">active session history entry</span>
     <li><span class="dfn-paneled" id="term-for-active-window">active window</span>
     <li><span class="dfn-paneled" id="term-for-allowed-to-navigate">allowed to navigate</span>
     <li><span class="dfn-paneled" id="term-for-apply-the-history-step">apply the history step</span>
     <li><span class="dfn-paneled" id="term-for-the-area-element">area</span>
     <li><span class="dfn-paneled" id="term-for-dom-location-assign">assign(url)</span>
     <li><span class="dfn-paneled" id="term-for-concept-document-window">associated document</span>
     <li><span class="dfn-paneled" id="term-for-window-bc">browsing context <small>(for Window)</small></span>
     <li><span class="dfn-paneled" id="term-for-the-button-element">button</span>
     <li><span class="dfn-paneled" id="term-for-dom-errorevent-colno">colno</span>
     <li><span class="dfn-paneled" id="term-for-bc-navigable">containing navigable</span>
     <li><span class="dfn-paneled" id="term-for-creating-a-new-browsing-context">create a new browsing context</span>
     <li><span class="dfn-paneled" id="term-for-current-entry">current entry</span>
     <li><span class="dfn-paneled" id="term-for-tn-current-session-history-step">current session history step</span>
     <li><span class="dfn-paneled" id="term-for-hh-default">default</span>
     <li><span class="dfn-paneled" id="term-for-she-document">document <small>(for session history entry)</small></span>
     <li><span class="dfn-paneled" id="term-for-enqueue-the-following-steps">enqueue steps</span>
     <li><span class="dfn-paneled" id="term-for-enqueue-the-following-steps①">enqueue the following steps</span>
     <li><span class="dfn-paneled" id="term-for-hh-entry-update">entry update</span>
     <li><span class="dfn-paneled" id="term-for-dom-errorevent-error">error</span>
     <li><span class="dfn-paneled" id="term-for-event-handlers">event handler</span>
     <li><span class="dfn-paneled" id="term-for-event-handler-event-type">event handler event type</span>
     <li><span class="dfn-paneled" id="term-for-event-handler-idl-attributes">event handler idl attribute</span>
     <li><span class="dfn-paneled" id="term-for-concept-agent-event-loop">event loop</span>
     <li><span class="dfn-paneled" id="term-for-exceptions-enabled">exceptionsenabled</span>
     <li><span class="dfn-paneled" id="term-for-dom-errorevent-filename">filename</span>
     <li><span class="dfn-paneled" id="term-for-following-hyperlinks-2">follow the hyperlink</span>
     <li><span class="dfn-paneled" id="term-for-the-form-element">form</span>
     <li><span class="dfn-paneled" id="term-for-fully-active">fully active</span>
     <li><span class="dfn-paneled" id="term-for-getting-all-history-steps">get all history steps</span>
     <li><span class="dfn-paneled" id="term-for-getting-session-history-entries">get the session history entries</span>
     <li><span class="dfn-paneled" id="term-for-history-handling-behavior">history handling behavior</span>
     <li><span class="dfn-paneled" id="term-for-history-traversal-task-source">history traversal task source</span>
     <li><span class="dfn-paneled" id="term-for-navigation-hh">historyhandling</span>
     <li><span class="dfn-paneled" id="term-for-the-iframe-element">iframe</span>
     <li><span class="dfn-paneled" id="term-for-in-parallel">in parallel</span>
     <li><span class="dfn-paneled" id="term-for-the-input-element">input</span>
     <li><span class="dfn-paneled" id="term-for-input-activation-behavior">input activation behavior</span>
     <li><span class="dfn-paneled" id="term-for-uhus-ispush">ispush</span>
     <li><span class="dfn-paneled" id="term-for-joint-session-history">joint session history</span>
     <li><span class="dfn-paneled" id="term-for-dom-errorevent-lineno">lineno</span>
     <li><span class="dfn-paneled" id="term-for-dom-errorevent-message">message</span>
     <li><span class="dfn-paneled" id="term-for-navigable">navigable</span>
     <li><span class="dfn-paneled" id="term-for-navigate">navigate</span>
     <li><span class="dfn-paneled" id="term-for-navigate-fragid">navigate to a fragment</span>
     <li><span class="dfn-paneled" id="term-for-navigation-navigationtype">navigationtype</span>
     <li><span class="dfn-paneled" id="term-for-dom-document-open">open(unused1, unused2)</span>
     <li><span class="dfn-paneled" id="term-for-concept-settings-object-origin">origin <small>(for environment settings object)</small></span>
     <li><span class="dfn-paneled" id="term-for-parse-a-url">parse a url</span>
     <li><span class="dfn-paneled" id="term-for-plan-to-navigate">plan to navigate</span>
     <li><span class="dfn-paneled" id="term-for-dom-history-pushstate">pushState(data, unused)</span>
     <li><span class="dfn-paneled" id="term-for-queue-a-global-task">queue a global task</span>
     <li><span class="dfn-paneled" id="term-for-queue-a-microtask">queue a microtask</span>
     <li><span class="dfn-paneled" id="term-for-relevant-agent">relevant agent</span>
     <li><span class="dfn-paneled" id="term-for-concept-relevant-global">relevant global object</span>
     <li><span class="dfn-paneled" id="term-for-concept-relevant-realm">relevant realm</span>
     <li><span class="dfn-paneled" id="term-for-relevant-settings-object">relevant settings object</span>
     <li><span class="dfn-paneled" id="term-for-hh-reload">reload</span>
     <li><span class="dfn-paneled" id="term-for-hh-replace">replace</span>
     <li><span class="dfn-paneled" id="term-for-report-the-exception">report an exception</span>
     <li><span class="dfn-paneled" id="term-for-resulting-url-record">resulting url record</span>
     <li><span class="dfn-paneled" id="term-for-same-origin">same origin</span>
     <li><span class="dfn-paneled" id="term-for-same-origin-domain">same origin-domain</span>
     <li><span class="dfn-paneled" id="term-for-serializable-objects">serializable objects</span>
     <li><span class="dfn-paneled" id="term-for-serialized-state">serialized state</span>
     <li><span class="dfn-paneled" id="term-for-uhus-serializeddata">serializeddata</span>
     <li><span class="dfn-paneled" id="term-for-session-history">session history</span>
     <li><span class="dfn-paneled" id="term-for-session-history-entry">session history entry</span>
     <li><span class="dfn-paneled" id="term-for-tn-session-history-traversal-queue">session history traversal queue</span>
     <li><span class="dfn-paneled" id="term-for-shared-history-push/replace-state-steps">shared history push/replace state steps</span>
     <li><span class="dfn-paneled" id="term-for-source-browsing-context">source browsing context</span>
     <li><span class="dfn-paneled" id="term-for-dom-history-state">state</span>
     <li><span class="dfn-paneled" id="term-for-she-step">step</span>
     <li><span class="dfn-paneled" id="term-for-still-on-its-initial-about:blank-document">still on its initial about:blank document</span>
     <li><span class="dfn-paneled" id="term-for-stop-document-loading">stop document loading</span>
     <li><span class="dfn-paneled" id="term-for-dom-window-stop">stop()</span>
     <li><span class="dfn-paneled" id="term-for-submit-body">submit as entity body</span>
     <li><span class="dfn-paneled" id="term-for-concept-submit-button">submit buttons</span>
     <li><span class="dfn-paneled" id="term-for-concept-form-submit">submitted</span>
     <li><span class="dfn-paneled" id="term-for-nav-traversable">traversable navigable</span>
     <li><span class="dfn-paneled" id="term-for-traverse-the-history">traverse the history</span>
     <li><span class="dfn-paneled" id="term-for-traverse-the-history-by-a-delta">traverse the history by a delta</span>
     <li><span class="dfn-paneled" id="term-for-unload-counter">unload counter</span>
     <li><span class="dfn-paneled" id="term-for-update-the-session-history-with-the-new-page">update the session history with the new page</span>
     <li><span class="dfn-paneled" id="term-for-she-url">url</span>
     <li><span class="dfn-paneled" id="term-for-url-and-history-update-steps">url and history update steps</span>
    </ul>
   <li>
    <a data-link-type="biblio">[INFRA]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-list-append">append</span>
     <li><span class="dfn-paneled" id="term-for-assert">assert</span>
     <li><span class="dfn-paneled" id="term-for-iteration-break">break</span>
     <li><span class="dfn-paneled" id="term-for-list-contain">contain</span>
     <li><span class="dfn-paneled" id="term-for-map-exists">exist <small>(for map)</small></span>
     <li><span class="dfn-paneled" id="term-for-list-iterate">for each</span>
     <li><span class="dfn-paneled" id="term-for-string-is">is</span>
     <li><span class="dfn-paneled" id="term-for-list-is-empty">is empty</span>
     <li><span class="dfn-paneled" id="term-for-struct-item">item</span>
     <li><span class="dfn-paneled" id="term-for-list">list</span>
     <li><span class="dfn-paneled" id="term-for-ordered-map">map</span>
     <li><span class="dfn-paneled" id="term-for-list-prepend">prepend</span>
     <li><span class="dfn-paneled" id="term-for-map-remove">remove</span>
     <li><span class="dfn-paneled" id="term-for-list-size">size</span>
     <li><span class="dfn-paneled" id="term-for-string">string</span>
     <li><span class="dfn-paneled" id="term-for-struct">struct</span>
     <li><span class="dfn-paneled" id="term-for-user-agent">user agent</span>
    </ul>
   <li>
    <a data-link-type="biblio">[URL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-concept-url-equals">equal</span>
     <li><span class="dfn-paneled" id="term-for-url-equals-exclude-fragments">exclude fragments</span>
     <li><span class="dfn-paneled" id="term-for-concept-url-fragment">fragment</span>
     <li><span class="dfn-paneled" id="term-for-concept-url-origin">origin</span>
     <li><span class="dfn-paneled" id="term-for-concept-url-path">path</span>
     <li><span class="dfn-paneled" id="term-for-concept-url-query">query</span>
     <li><span class="dfn-paneled" id="term-for-concept-url">url</span>
     <li><span class="dfn-paneled" id="term-for-concept-url-serializer">url serializer</span>
    </ul>
   <li>
    <a data-link-type="biblio">[uuid]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dfn-generate-a-random-uuid">generate a random uuid</span>
    </ul>
   <li>
    <a data-link-type="biblio">[webappsec-fetch-metadata-1]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-http-headerdef-sec-fetch-site">sec-fetch-site</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WebIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-aborterror">AbortError</span>
     <li><span class="dfn-paneled" id="term-for-idl-ArrayBuffer">ArrayBuffer</span>
     <li><span class="dfn-paneled" id="term-for-idl-DOMException">DOMException</span>
     <li><span class="dfn-paneled" id="term-for-idl-DOMString">DOMString</span>
     <li><span class="dfn-paneled" id="term-for-Exposed">Exposed</span>
     <li><span class="dfn-paneled" id="term-for-invalidstateerror">InvalidStateError</span>
     <li><span class="dfn-paneled" id="term-for-idl-promise">Promise</span>
     <li><span class="dfn-paneled" id="term-for-securityerror">SecurityError</span>
     <li><span class="dfn-paneled" id="term-for-syntaxerror">SyntaxError</span>
     <li><span class="dfn-paneled" id="term-for-idl-USVString">USVString</span>
     <li><span class="dfn-paneled" id="term-for-a-new-promise">a new promise</span>
     <li><span class="dfn-paneled" id="term-for-a-promise-rejected-with">a promise rejected with</span>
     <li><span class="dfn-paneled" id="term-for-a-promise-resolved-with">a promise resolved with</span>
     <li><span class="dfn-paneled" id="term-for-idl-any">any</span>
     <li><span class="dfn-paneled" id="term-for-idl-boolean">boolean</span>
     <li><span class="dfn-paneled" id="term-for-idl-long-long">long long</span>
     <li><span class="dfn-paneled" id="term-for-dom-domexception-message">message</span>
     <li><span class="dfn-paneled" id="term-for-new">new</span>
     <li><span class="dfn-paneled" id="term-for-reject">reject</span>
     <li><span class="dfn-paneled" id="term-for-resolve">resolve</span>
     <li><span class="dfn-paneled" id="term-for-idl-sequence">sequence</span>
     <li><span class="dfn-paneled" id="term-for-this">this</span>
     <li><span class="dfn-paneled" id="term-for-idl-undefined">undefined</span>
     <li><span class="dfn-paneled" id="term-for-wait-for-all">wait for all</span>
    </ul>
   <li>
    <a data-link-type="biblio">[XHR]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-formdata">FormData</span>
     <li><span class="dfn-paneled" id="term-for-concept-formdata-entry">entries</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-dom">[DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-infra">[INFRA]
   <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
   <dt id="biblio-url">[URL]
   <dd>Anne van Kesteren. <a href="https://url.spec.whatwg.org/"><cite>URL Standard</cite></a>. Living Standard. URL: <a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
   <dt id="biblio-webidl">[WebIDL]
   <dd>Boris Zbarsky. <a href="https://heycam.github.io/webidl/"><cite>Web IDL</cite></a>. URL: <a href="https://heycam.github.io/webidl/">https://heycam.github.io/webidl/</a>
   <dt id="biblio-xhr">[XHR]
   <dd>Anne van Kesteren. <a href="https://xhr.spec.whatwg.org/"><cite>XMLHttpRequest Standard</cite></a>. Living Standard. URL: <a href="https://xhr.spec.whatwg.org/">https://xhr.spec.whatwg.org/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-csp">[CSP]
   <dd>Mike West. <a href="https://w3c.github.io/webappsec-csp/"><cite>Content Security Policy Level 3</cite></a>. URL: <a href="https://w3c.github.io/webappsec-csp/">https://w3c.github.io/webappsec-csp/</a>
   <dt id="biblio-fetch">[FETCH]
   <dd>Anne van Kesteren. <a href="https://fetch.spec.whatwg.org/"><cite>Fetch Standard</cite></a>. Living Standard. URL: <a href="https://fetch.spec.whatwg.org/">https://fetch.spec.whatwg.org/</a>
   <dt id="biblio-webappsec-fetch-metadata-1">[WEBAPPSEC-FETCH-METADATA-1]
   <dd>Fetch Metadata Request Headers URL: <a href="https://w3c.github.io/webappsec-fetch-metadata/">https://w3c.github.io/webappsec-fetch-metadata/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/window-object.html#window"><c- g>Window</c-></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#apphistory"><c- n>AppHistory</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="AppHistory" href="#dom-window-apphistory"><c- g>appHistory</c-></a>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#apphistory"><code><c- g>AppHistory</c-></code></a> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget"><c- n>EventTarget</c-></a> {
  <a data-link-type="dfn" href="https://heycam.github.io/webidl/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#apphistoryentry"><c- n>AppHistoryEntry</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-apphistory-entries"><c- g>entries</c-></a>();
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#apphistoryentry"><c- n>AppHistoryEntry</c-></a>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="AppHistoryEntry?" href="#dom-apphistory-current"><c- g>current</c-></a>;

  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-apphistory-cangoback"><c- g>canGoBack</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-apphistory-cangoforward"><c- g>canGoForward</c-></a>;

  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-apphistory-navigate"><c- g>navigate</c-></a>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString"><c- b>USVString</c-></a> <a href="#dom-apphistory-navigate-url-options-url"><code><c- g>url</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-apphistorynavigateoptions"><c- n>AppHistoryNavigateOptions</c-></a> <a href="#dom-apphistory-navigate-url-options-options"><code><c- g>options</c-></code></a> = {});
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-apphistory-reload"><c- g>reload</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-apphistoryreloadoptions"><c- n>AppHistoryReloadOptions</c-></a> <a href="#dom-apphistory-reload-options-options"><code><c- g>options</c-></code></a> = {});

  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-apphistory-goto"><c- g>goTo</c-></a>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-apphistory-goto-key-options-key"><code><c- g>key</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-apphistorynavigationoptions"><c- n>AppHistoryNavigationOptions</c-></a> <a href="#dom-apphistory-goto-key-options-options"><code><c- g>options</c-></code></a> = {});
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-apphistory-back"><c- g>back</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-apphistorynavigationoptions"><c- n>AppHistoryNavigationOptions</c-></a> <a href="#dom-apphistory-back-options-options"><code><c- g>options</c-></code></a> = {});
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-apphistory-forward"><c- g>forward</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-apphistorynavigationoptions"><c- n>AppHistoryNavigationOptions</c-></a> <a href="#dom-apphistory-forward-options-options"><code><c- g>options</c-></code></a> = {});

  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-apphistory-onnavigate"><c- g>onnavigate</c-></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-apphistory-onnavigatesuccess"><c- g>onnavigatesuccess</c-></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-apphistory-onnavigateerror"><c- g>onnavigateerror</c-></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-apphistorynavigationoptions"><code><c- g>AppHistoryNavigationOptions</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-any"><c- b>any</c-></a> <a data-type="any " href="#dom-apphistorynavigationoptions-navigateinfo"><code><c- g>navigateInfo</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-apphistorynavigateoptions"><code><c- g>AppHistoryNavigateOptions</c-></code></a> : <a data-link-type="idl-name" href="#dictdef-apphistorynavigationoptions"><c- n>AppHistoryNavigationOptions</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-any"><c- b>any</c-></a> <a data-type="any " href="#dom-apphistorynavigateoptions-state"><code><c- g>state</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean"><c- b>boolean</c-></a> <a data-default="false" data-type="boolean " href="#dom-apphistorynavigateoptions-replace"><code><c- g>replace</c-></code></a> = <c- b>false</c->;
};

<c- b>dictionary</c-> <a href="#dictdef-apphistoryreloadoptions"><code><c- g>AppHistoryReloadOptions</c-></code></a> : <a data-link-type="idl-name" href="#dictdef-apphistorynavigationoptions"><c- n>AppHistoryNavigationOptions</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-any"><c- b>any</c-></a> <a data-type="any " href="#dom-apphistoryreloadoptions-state"><code><c- g>state</c-></code></a>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#apphistorynavigateevent"><code><c- g>AppHistoryNavigateEvent</c-></code></a> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#event"><c- n>Event</c-></a> {
  <a href="#dom-apphistorynavigateevent-apphistorynavigateevent"><code><c- g>constructor</c-></code></a>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-apphistorynavigateevent-apphistorynavigateevent-type-eventinit-type"><code><c- g>type</c-></code></a>, <a data-link-type="idl-name" href="#dictdef-apphistorynavigateeventinit"><c- n>AppHistoryNavigateEventInit</c-></a> <a href="#dom-apphistorynavigateevent-apphistorynavigateevent-type-eventinit-eventinit"><code><c- g>eventInit</c-></code></a>);

  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#enumdef-apphistorynavigationtype"><c- n>AppHistoryNavigationType</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="AppHistoryNavigationType" href="#dom-apphistorynavigateevent-navigationtype"><c- g>navigationType</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#apphistorydestination"><c- n>AppHistoryDestination</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="AppHistoryDestination" href="#dom-apphistorynavigateevent-destination"><c- g>destination</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-apphistorynavigateevent-canrespond"><c- g>canRespond</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-apphistorynavigateevent-userinitiated"><c- g>userInitiated</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-apphistorynavigateevent-hashchange"><c- g>hashChange</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#abortsignal"><c- n>AbortSignal</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="AbortSignal" href="#dom-apphistorynavigateevent-signal"><c- g>signal</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://xhr.spec.whatwg.org/#formdata"><c- n>FormData</c-></a>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="FormData?" href="#dom-apphistorynavigateevent-formdata"><c- g>formData</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-any"><c- b>any</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="any" href="#dom-apphistorynavigateevent-info"><c- g>info</c-></a>;

  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-apphistorynavigateevent-respondwith"><c- g>respondWith</c-></a>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined"><c- b>undefined</c-></a>> <a href="#dom-apphistorynavigateevent-respondwith-newnavigationaction-newnavigationaction"><code><c- g>newNavigationAction</c-></code></a>);
};

<c- b>dictionary</c-> <a href="#dictdef-apphistorynavigateeventinit"><code><c- g>AppHistoryNavigateEventInit</c-></code></a> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#dictdef-eventinit"><c- n>EventInit</c-></a> {
  <a data-link-type="idl-name" href="#enumdef-apphistorynavigationtype"><c- n>AppHistoryNavigationType</c-></a> <a data-default="&quot;push&quot;" data-type="AppHistoryNavigationType " href="#dom-apphistorynavigateeventinit-navigationtype"><code><c- g>navigationType</c-></code></a> = "push";
  <c- b>required</c-> <a data-link-type="idl-name" href="#apphistorydestination"><c- n>AppHistoryDestination</c-></a> <a data-type="AppHistoryDestination " href="#dom-apphistorynavigateeventinit-destination"><code><c- g>destination</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean"><c- b>boolean</c-></a> <a data-default="false" data-type="boolean " href="#dom-apphistorynavigateeventinit-canrespond"><code><c- g>canRespond</c-></code></a> = <c- b>false</c->;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean"><c- b>boolean</c-></a> <a data-default="false" data-type="boolean " href="#dom-apphistorynavigateeventinit-userinitiated"><code><c- g>userInitiated</c-></code></a> = <c- b>false</c->;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean"><c- b>boolean</c-></a> <a data-default="false" data-type="boolean " href="#dom-apphistorynavigateeventinit-hashchange"><code><c- g>hashChange</c-></code></a> = <c- b>false</c->;
  <c- b>required</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#abortsignal"><c- n>AbortSignal</c-></a> <a data-type="AbortSignal " href="#dom-apphistorynavigateeventinit-signal"><code><c- g>signal</c-></code></a>;
  <a data-link-type="idl-name" href="https://xhr.spec.whatwg.org/#formdata"><c- n>FormData</c-></a>? <a data-default="null" data-type="FormData? " href="#dom-apphistorynavigateeventinit-formdata"><code><c- g>formData</c-></code></a> = <c- b>null</c->;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-any"><c- b>any</c-></a> <a data-default="null" data-type="any " href="#dom-apphistorynavigateeventinit-info"><code><c- g>info</c-></code></a> = <c- b>null</c->;
};

<c- b>enum</c-> <a href="#enumdef-apphistorynavigationtype"><code><c- g>AppHistoryNavigationType</c-></code></a> {
  <a href="#dom-apphistorynavigationtype-reload"><code><c- s>"reload"</c-></code></a>,
  <a href="#dom-apphistorynavigationtype-push"><code><c- s>"push"</c-></code></a>,
  <a href="#dom-apphistorynavigationtype-replace"><code><c- s>"replace"</c-></code></a>,
  <a href="#dom-apphistorynavigationtype-traverse"><code><c- s>"traverse"</c-></code></a>
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#apphistorydestination"><code><c- g>AppHistoryDestination</c-></code></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString"><c- b>USVString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="USVString" href="#dom-apphistorydestination-url"><c- g>url</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString"><c- b>DOMString</c-></a>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMString?" href="#dom-apphistorydestination-key"><c- g>key</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString"><c- b>DOMString</c-></a>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMString?" href="#dom-apphistorydestination-id"><c- g>id</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-long-long"><c- b>long</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="long long" href="#dom-apphistorydestination-index"><c- g>index</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-apphistorydestination-samedocument"><c- g>sameDocument</c-></a>;

  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-any"><c- b>any</c-></a> <a class="idl-code" data-link-type="method" href="#dom-apphistorydestination-getstate"><c- g>getState</c-></a>();
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#apphistoryentry"><code><c- g>AppHistoryEntry</c-></code></a> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget"><c- n>EventTarget</c-></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString"><c- b>USVString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="USVString" href="#dom-apphistoryentry-url"><c- g>url</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMString" href="#dom-apphistoryentry-key"><c- g>key</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMString" href="#dom-apphistoryentry-id"><c- g>id</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-long-long"><c- b>long</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="long long" href="#dom-apphistoryentry-index"><c- g>index</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-apphistoryentry-samedocument"><c- g>sameDocument</c-></a>;

  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-any"><c- b>any</c-></a> <a class="idl-code" data-link-type="method" href="#dom-apphistoryentry-getstate"><c- g>getState</c-></a>();

  // TODO event handlers
};

</pre>
  <aside class="dfn-panel" data-for="window-app-history">
   <b><a href="#window-app-history">#window-app-history</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-window-app-history">1. The AppHistory class</a>
    <li><a href="#ref-for-window-app-history①">2.3. Firing the event</a>
    <li><a href="#ref-for-window-app-history②">4.3. Navigation algorithm updates</a> <a href="#ref-for-window-app-history③">(2)</a> <a href="#ref-for-window-app-history④">(3)</a>
    <li><a href="#ref-for-window-app-history⑤">4.4. History traversal updates</a>
    <li><a href="#ref-for-window-app-history⑥">5.5. Updating the AppHistory object</a> <a href="#ref-for-window-app-history⑦">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-window-apphistory">
   <b><a href="#dom-window-apphistory">#dom-window-apphistory</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-window-apphistory">1. The AppHistory class</a>
    <li><a href="#ref-for-dom-window-apphistory①">1.1. Introspecting the app history entry list</a> <a href="#ref-for-dom-window-apphistory②">(2)</a> <a href="#ref-for-dom-window-apphistory③">(3)</a> <a href="#ref-for-dom-window-apphistory④">(4)</a>
    <li><a href="#ref-for-dom-window-apphistory⑤">1.3. Navigating</a> <a href="#ref-for-dom-window-apphistory⑥">(2)</a> <a href="#ref-for-dom-window-apphistory⑦">(3)</a> <a href="#ref-for-dom-window-apphistory⑧">(4)</a>
    <li><a href="#ref-for-dom-window-apphistory⑨">1.4. Traversing</a> <a href="#ref-for-dom-window-apphistory①⓪">(2)</a> <a href="#ref-for-dom-window-apphistory①①">(3)</a> <a href="#ref-for-dom-window-apphistory①②">(4)</a> <a href="#ref-for-dom-window-apphistory①③">(5)</a> <a href="#ref-for-dom-window-apphistory①④">(6)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="apphistory">
   <b><a href="#apphistory">#apphistory</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-apphistory">1. The AppHistory class</a> <a href="#ref-for-apphistory①">(2)</a> <a href="#ref-for-apphistory②">(3)</a>
    <li><a href="#ref-for-apphistory③">1.1. Introspecting the app history entry list</a> <a href="#ref-for-apphistory④">(2)</a> <a href="#ref-for-apphistory⑤">(3)</a> <a href="#ref-for-apphistory⑥">(4)</a>
    <li><a href="#ref-for-apphistory⑦">1.2. Ongoing navigation tracking</a> <a href="#ref-for-apphistory⑧">(2)</a> <a href="#ref-for-apphistory⑨">(3)</a> <a href="#ref-for-apphistory①⓪">(4)</a> <a href="#ref-for-apphistory①①">(5)</a> <a href="#ref-for-apphistory①②">(6)</a> <a href="#ref-for-apphistory①③">(7)</a> <a href="#ref-for-apphistory①④">(8)</a> <a href="#ref-for-apphistory①⑤">(9)</a> <a href="#ref-for-apphistory①⑥">(10)</a>
    <li><a href="#ref-for-apphistory①⑦">1.3. Navigating</a> <a href="#ref-for-apphistory①⑧">(2)</a>
    <li><a href="#ref-for-apphistory①⑨">1.4. Traversing</a>
    <li><a href="#ref-for-apphistory②⓪">1.5. Event handlers</a>
    <li><a href="#ref-for-apphistory②①">2.3. Firing the event</a> <a href="#ref-for-apphistory②②">(2)</a> <a href="#ref-for-apphistory②③">(3)</a> <a href="#ref-for-apphistory②④">(4)</a>
    <li><a href="#ref-for-apphistory②⑤">5. Patches to session history</a>
    <li><a href="#ref-for-apphistory②⑥">5.5. Updating the AppHistory object</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-apphistorynavigationoptions">
   <b><a href="#dictdef-apphistorynavigationoptions">#dictdef-apphistorynavigationoptions</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-apphistorynavigationoptions">1. The AppHistory class</a> <a href="#ref-for-dictdef-apphistorynavigationoptions①">(2)</a> <a href="#ref-for-dictdef-apphistorynavigationoptions②">(3)</a> <a href="#ref-for-dictdef-apphistorynavigationoptions③">(4)</a> <a href="#ref-for-dictdef-apphistorynavigationoptions④">(5)</a>
    <li><a href="#ref-for-dictdef-apphistorynavigationoptions⑤">1.4. Traversing</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistorynavigationoptions-navigateinfo">
   <b><a href="#dom-apphistorynavigationoptions-navigateinfo">#dom-apphistorynavigationoptions-navigateinfo</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistorynavigationoptions-navigateinfo">1.2. Ongoing navigation tracking</a>
    <li><a href="#ref-for-dom-apphistorynavigationoptions-navigateinfo①">1.3. Navigating</a> <a href="#ref-for-dom-apphistorynavigationoptions-navigateinfo②">(2)</a> <a href="#ref-for-dom-apphistorynavigationoptions-navigateinfo③">(3)</a> <a href="#ref-for-dom-apphistorynavigationoptions-navigateinfo④">(4)</a> <a href="#ref-for-dom-apphistorynavigationoptions-navigateinfo⑤">(5)</a>
    <li><a href="#ref-for-dom-apphistorynavigationoptions-navigateinfo⑥">1.4. Traversing</a> <a href="#ref-for-dom-apphistorynavigationoptions-navigateinfo⑦">(2)</a> <a href="#ref-for-dom-apphistorynavigationoptions-navigateinfo⑧">(3)</a> <a href="#ref-for-dom-apphistorynavigationoptions-navigateinfo⑨">(4)</a> <a href="#ref-for-dom-apphistorynavigationoptions-navigateinfo①⓪">(5)</a> <a href="#ref-for-dom-apphistorynavigationoptions-navigateinfo①①">(6)</a> <a href="#ref-for-dom-apphistorynavigationoptions-navigateinfo①②">(7)</a> <a href="#ref-for-dom-apphistorynavigationoptions-navigateinfo①③">(8)</a> <a href="#ref-for-dom-apphistorynavigationoptions-navigateinfo①④">(9)</a> <a href="#ref-for-dom-apphistorynavigationoptions-navigateinfo①⑤">(10)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-apphistorynavigateoptions">
   <b><a href="#dictdef-apphistorynavigateoptions">#dictdef-apphistorynavigateoptions</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-apphistorynavigateoptions">1. The AppHistory class</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistorynavigateoptions-state">
   <b><a href="#dom-apphistorynavigateoptions-state">#dom-apphistorynavigateoptions-state</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistorynavigateoptions-state">1.2. Ongoing navigation tracking</a>
    <li><a href="#ref-for-dom-apphistorynavigateoptions-state①">1.3. Navigating</a> <a href="#ref-for-dom-apphistorynavigateoptions-state②">(2)</a> <a href="#ref-for-dom-apphistorynavigateoptions-state③">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistorynavigateoptions-replace">
   <b><a href="#dom-apphistorynavigateoptions-replace">#dom-apphistorynavigateoptions-replace</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistorynavigateoptions-replace">1.3. Navigating</a> <a href="#ref-for-dom-apphistorynavigateoptions-replace①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-apphistoryreloadoptions">
   <b><a href="#dictdef-apphistoryreloadoptions">#dictdef-apphistoryreloadoptions</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-apphistoryreloadoptions">1. The AppHistory class</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistoryreloadoptions-state">
   <b><a href="#dom-apphistoryreloadoptions-state">#dom-apphistoryreloadoptions-state</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistoryreloadoptions-state">1.3. Navigating</a> <a href="#ref-for-dom-apphistoryreloadoptions-state①">(2)</a> <a href="#ref-for-dom-apphistoryreloadoptions-state②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="apphistory-entry-list">
   <b><a href="#apphistory-entry-list">#apphistory-entry-list</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-apphistory-entry-list">1.1. Introspecting the app history entry list</a> <a href="#ref-for-apphistory-entry-list①">(2)</a> <a href="#ref-for-apphistory-entry-list②">(3)</a> <a href="#ref-for-apphistory-entry-list③">(4)</a> <a href="#ref-for-apphistory-entry-list④">(5)</a> <a href="#ref-for-apphistory-entry-list⑤">(6)</a> <a href="#ref-for-apphistory-entry-list⑥">(7)</a> <a href="#ref-for-apphistory-entry-list⑦">(8)</a>
    <li><a href="#ref-for-apphistory-entry-list⑧">1.3. Navigating</a>
    <li><a href="#ref-for-apphistory-entry-list⑨">1.4. Traversing</a> <a href="#ref-for-apphistory-entry-list①⓪">(2)</a> <a href="#ref-for-apphistory-entry-list①①">(3)</a> <a href="#ref-for-apphistory-entry-list①②">(4)</a> <a href="#ref-for-apphistory-entry-list①③">(5)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="apphistory-current-index">
   <b><a href="#apphistory-current-index">#apphistory-current-index</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-apphistory-current-index">1.1. Introspecting the app history entry list</a> <a href="#ref-for-apphistory-current-index①">(2)</a> <a href="#ref-for-apphistory-current-index②">(3)</a> <a href="#ref-for-apphistory-current-index③">(4)</a> <a href="#ref-for-apphistory-current-index④">(5)</a> <a href="#ref-for-apphistory-current-index⑤">(6)</a> <a href="#ref-for-apphistory-current-index⑥">(7)</a>
    <li><a href="#ref-for-apphistory-current-index⑦">1.3. Navigating</a> <a href="#ref-for-apphistory-current-index⑧">(2)</a>
    <li><a href="#ref-for-apphistory-current-index⑨">1.4. Traversing</a> <a href="#ref-for-apphistory-current-index①⓪">(2)</a> <a href="#ref-for-apphistory-current-index①①">(3)</a> <a href="#ref-for-apphistory-current-index①②">(4)</a> <a href="#ref-for-apphistory-current-index①③">(5)</a> <a href="#ref-for-apphistory-current-index①④">(6)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistory-entries">
   <b><a href="#dom-apphistory-entries">#dom-apphistory-entries</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistory-entries">1. The AppHistory class</a>
    <li><a href="#ref-for-dom-apphistory-entries①">1.1. Introspecting the app history entry list</a>
    <li><a href="#ref-for-dom-apphistory-entries②">1.4. Traversing</a>
    <li><a href="#ref-for-dom-apphistory-entries③">3. App history entries</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistory-current">
   <b><a href="#dom-apphistory-current">#dom-apphistory-current</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistory-current">1. The AppHistory class</a>
    <li><a href="#ref-for-dom-apphistory-current①">1.1. Introspecting the app history entry list</a>
    <li><a href="#ref-for-dom-apphistory-current②">1.4. Traversing</a> <a href="#ref-for-dom-apphistory-current③">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistory-cangoback">
   <b><a href="#dom-apphistory-cangoback">#dom-apphistory-cangoback</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistory-cangoback">1. The AppHistory class</a>
    <li><a href="#ref-for-dom-apphistory-cangoback①">1.1. Introspecting the app history entry list</a>
    <li><a href="#ref-for-dom-apphistory-cangoback②">1.4. Traversing</a> <a href="#ref-for-dom-apphistory-cangoback③">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistory-cangoforward">
   <b><a href="#dom-apphistory-cangoforward">#dom-apphistory-cangoforward</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistory-cangoforward">1. The AppHistory class</a>
    <li><a href="#ref-for-dom-apphistory-cangoforward①">1.1. Introspecting the app history entry list</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="apphistory-update-the-entries">
   <b><a href="#apphistory-update-the-entries">#apphistory-update-the-entries</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-apphistory-update-the-entries">1.1. Introspecting the app history entry list</a>
    <li><a href="#ref-for-apphistory-update-the-entries①">5.5. Updating the AppHistory object</a> <a href="#ref-for-apphistory-update-the-entries②">(2)</a> <a href="#ref-for-apphistory-update-the-entries③">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="get-the-app-history-index">
   <b><a href="#get-the-app-history-index">#get-the-app-history-index</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-get-the-app-history-index">2.3. Firing the event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="apphistory-ongoing-navigate-event">
   <b><a href="#apphistory-ongoing-navigate-event">#apphistory-ongoing-navigate-event</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-apphistory-ongoing-navigate-event">1.2. Ongoing navigation tracking</a>
    <li><a href="#ref-for-apphistory-ongoing-navigate-event①">2.3. Firing the event</a> <a href="#ref-for-apphistory-ongoing-navigate-event②">(2)</a> <a href="#ref-for-apphistory-ongoing-navigate-event③">(3)</a> <a href="#ref-for-apphistory-ongoing-navigate-event④">(4)</a> <a href="#ref-for-apphistory-ongoing-navigate-event⑤">(5)</a> <a href="#ref-for-apphistory-ongoing-navigate-event⑥">(6)</a> <a href="#ref-for-apphistory-ongoing-navigate-event⑦">(7)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="apphistory-to-be-set-serialized-state">
   <b><a href="#apphistory-to-be-set-serialized-state">#apphistory-to-be-set-serialized-state</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-apphistory-to-be-set-serialized-state">1.3. Navigating</a> <a href="#ref-for-apphistory-to-be-set-serialized-state①">(2)</a> <a href="#ref-for-apphistory-to-be-set-serialized-state②">(3)</a> <a href="#ref-for-apphistory-to-be-set-serialized-state③">(4)</a>
    <li><a href="#ref-for-apphistory-to-be-set-serialized-state④">2.3. Firing the event</a> <a href="#ref-for-apphistory-to-be-set-serialized-state⑤">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="apphistory-upcoming-non-traverse-navigation">
   <b><a href="#apphistory-upcoming-non-traverse-navigation">#apphistory-upcoming-non-traverse-navigation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-apphistory-upcoming-non-traverse-navigation">1.2. Ongoing navigation tracking</a> <a href="#ref-for-apphistory-upcoming-non-traverse-navigation①">(2)</a> <a href="#ref-for-apphistory-upcoming-non-traverse-navigation②">(3)</a> <a href="#ref-for-apphistory-upcoming-non-traverse-navigation③">(4)</a>
    <li><a href="#ref-for-apphistory-upcoming-non-traverse-navigation④">1.3. Navigating</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="apphistory-ongoing-non-traverse-navigation">
   <b><a href="#apphistory-ongoing-non-traverse-navigation">#apphistory-ongoing-non-traverse-navigation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-apphistory-ongoing-non-traverse-navigation">1.2. Ongoing navigation tracking</a> <a href="#ref-for-apphistory-ongoing-non-traverse-navigation①">(2)</a> <a href="#ref-for-apphistory-ongoing-non-traverse-navigation②">(3)</a>
    <li><a href="#ref-for-apphistory-ongoing-non-traverse-navigation③">2.3. Firing the event</a> <a href="#ref-for-apphistory-ongoing-non-traverse-navigation④">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="apphistory-ongoing-traverse-navigations">
   <b><a href="#apphistory-ongoing-traverse-navigations">#apphistory-ongoing-traverse-navigations</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-apphistory-ongoing-traverse-navigations">1.2. Ongoing navigation tracking</a> <a href="#ref-for-apphistory-ongoing-traverse-navigations①">(2)</a>
    <li><a href="#ref-for-apphistory-ongoing-traverse-navigations②">1.4. Traversing</a> <a href="#ref-for-apphistory-ongoing-traverse-navigations③">(2)</a>
    <li><a href="#ref-for-apphistory-ongoing-traverse-navigations④">2.3. Firing the event</a> <a href="#ref-for-apphistory-ongoing-traverse-navigations⑤">(2)</a> <a href="#ref-for-apphistory-ongoing-traverse-navigations⑥">(3)</a> <a href="#ref-for-apphistory-ongoing-traverse-navigations⑦">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="apphistory-post-navigate-event-ongoing-navigation-signal">
   <b><a href="#apphistory-post-navigate-event-ongoing-navigation-signal">#apphistory-post-navigate-event-ongoing-navigation-signal</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-apphistory-post-navigate-event-ongoing-navigation-signal">1.2. Ongoing navigation tracking</a>
    <li><a href="#ref-for-apphistory-post-navigate-event-ongoing-navigation-signal①">2.3. Firing the event</a> <a href="#ref-for-apphistory-post-navigate-event-ongoing-navigation-signal②">(2)</a> <a href="#ref-for-apphistory-post-navigate-event-ongoing-navigation-signal③">(3)</a> <a href="#ref-for-apphistory-post-navigate-event-ongoing-navigation-signal④">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="app-history-api-navigation">
   <b><a href="#app-history-api-navigation">#app-history-api-navigation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-app-history-api-navigation">1.2. Ongoing navigation tracking</a> <a href="#ref-for-app-history-api-navigation①">(2)</a> <a href="#ref-for-app-history-api-navigation②">(3)</a> <a href="#ref-for-app-history-api-navigation③">(4)</a> <a href="#ref-for-app-history-api-navigation④">(5)</a> <a href="#ref-for-app-history-api-navigation⑤">(6)</a>
    <li><a href="#ref-for-app-history-api-navigation⑥">2.3. Firing the event</a> <a href="#ref-for-app-history-api-navigation⑦">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="app-history-api-navigation-info">
   <b><a href="#app-history-api-navigation-info">#app-history-api-navigation-info</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-app-history-api-navigation-info">1.2. Ongoing navigation tracking</a> <a href="#ref-for-app-history-api-navigation-info①">(2)</a>
    <li><a href="#ref-for-app-history-api-navigation-info②">2.3. Firing the event</a> <a href="#ref-for-app-history-api-navigation-info③">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="app-history-api-navigation-returned-promise">
   <b><a href="#app-history-api-navigation-returned-promise">#app-history-api-navigation-returned-promise</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-app-history-api-navigation-returned-promise">1.2. Ongoing navigation tracking</a> <a href="#ref-for-app-history-api-navigation-returned-promise①">(2)</a>
    <li><a href="#ref-for-app-history-api-navigation-returned-promise②">1.3. Navigating</a> <a href="#ref-for-app-history-api-navigation-returned-promise③">(2)</a>
    <li><a href="#ref-for-app-history-api-navigation-returned-promise④">1.4. Traversing</a> <a href="#ref-for-app-history-api-navigation-returned-promise⑤">(2)</a> <a href="#ref-for-app-history-api-navigation-returned-promise⑥">(3)</a>
    <li><a href="#ref-for-app-history-api-navigation-returned-promise⑦">2.3. Firing the event</a> <a href="#ref-for-app-history-api-navigation-returned-promise⑧">(2)</a> <a href="#ref-for-app-history-api-navigation-returned-promise⑨">(3)</a> <a href="#ref-for-app-history-api-navigation-returned-promise①⓪">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="app-history-api-navigation-cleanup-step">
   <b><a href="#app-history-api-navigation-cleanup-step">#app-history-api-navigation-cleanup-step</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-app-history-api-navigation-cleanup-step">1.2. Ongoing navigation tracking</a> <a href="#ref-for-app-history-api-navigation-cleanup-step①">(2)</a>
    <li><a href="#ref-for-app-history-api-navigation-cleanup-step②">1.3. Navigating</a>
    <li><a href="#ref-for-app-history-api-navigation-cleanup-step③">1.4. Traversing</a>
    <li><a href="#ref-for-app-history-api-navigation-cleanup-step④">2.3. Firing the event</a> <a href="#ref-for-app-history-api-navigation-cleanup-step⑤">(2)</a> <a href="#ref-for-app-history-api-navigation-cleanup-step⑥">(3)</a> <a href="#ref-for-app-history-api-navigation-cleanup-step⑦">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="apphistory-set-the-upcoming-non-traverse-navigation">
   <b><a href="#apphistory-set-the-upcoming-non-traverse-navigation">#apphistory-set-the-upcoming-non-traverse-navigation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-apphistory-set-the-upcoming-non-traverse-navigation">1.3. Navigating</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="apphistory-promote-the-upcoming-non-traverse-navigation-to-ongoing">
   <b><a href="#apphistory-promote-the-upcoming-non-traverse-navigation-to-ongoing">#apphistory-promote-the-upcoming-non-traverse-navigation-to-ongoing</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-apphistory-promote-the-upcoming-non-traverse-navigation-to-ongoing">1.3. Navigating</a>
    <li><a href="#ref-for-apphistory-promote-the-upcoming-non-traverse-navigation-to-ongoing①">2.3. Firing the event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="apphistory-set-an-ongoing-traverse-navigation">
   <b><a href="#apphistory-set-an-ongoing-traverse-navigation">#apphistory-set-an-ongoing-traverse-navigation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-apphistory-set-an-ongoing-traverse-navigation">1.4. Traversing</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistory-navigate">
   <b><a href="#dom-apphistory-navigate">#dom-apphistory-navigate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistory-navigate">1. The AppHistory class</a>
    <li><a href="#ref-for-dom-apphistory-navigate①">1.2. Ongoing navigation tracking</a>
    <li><a href="#ref-for-dom-apphistory-navigate②">1.3. Navigating</a> <a href="#ref-for-dom-apphistory-navigate③">(2)</a> <a href="#ref-for-dom-apphistory-navigate④">(3)</a>
    <li><a href="#ref-for-dom-apphistory-navigate⑤">2.2. The AppHistoryDestination class</a>
    <li><a href="#ref-for-dom-apphistory-navigate⑥">2.3. Firing the event</a> <a href="#ref-for-dom-apphistory-navigate⑦">(2)</a> <a href="#ref-for-dom-apphistory-navigate⑧">(3)</a>
    <li><a href="#ref-for-dom-apphistory-navigate⑨">3. App history entries</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistory-reload">
   <b><a href="#dom-apphistory-reload">#dom-apphistory-reload</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistory-reload">1. The AppHistory class</a>
    <li><a href="#ref-for-dom-apphistory-reload①">1.3. Navigating</a> <a href="#ref-for-dom-apphistory-reload②">(2)</a>
    <li><a href="#ref-for-dom-apphistory-reload③">2.2. The AppHistoryDestination class</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="perform-a-non-traverse-app-history-navigation">
   <b><a href="#perform-a-non-traverse-app-history-navigation">#perform-a-non-traverse-app-history-navigation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-perform-a-non-traverse-app-history-navigation">1.3. Navigating</a> <a href="#ref-for-perform-a-non-traverse-app-history-navigation①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistory-goto">
   <b><a href="#dom-apphistory-goto">#dom-apphistory-goto</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistory-goto">1. The AppHistory class</a>
    <li><a href="#ref-for-dom-apphistory-goto①">1.4. Traversing</a> <a href="#ref-for-dom-apphistory-goto②">(2)</a>
    <li><a href="#ref-for-dom-apphistory-goto③">3. App history entries</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistory-back">
   <b><a href="#dom-apphistory-back">#dom-apphistory-back</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistory-back">1. The AppHistory class</a>
    <li><a href="#ref-for-dom-apphistory-back①">1.4. Traversing</a> <a href="#ref-for-dom-apphistory-back②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistory-forward">
   <b><a href="#dom-apphistory-forward">#dom-apphistory-forward</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistory-forward">1. The AppHistory class</a>
    <li><a href="#ref-for-dom-apphistory-forward①">1.4. Traversing</a> <a href="#ref-for-dom-apphistory-forward②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="perform-an-app-history-traversal">
   <b><a href="#perform-an-app-history-traversal">#perform-an-app-history-traversal</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-perform-an-app-history-traversal">1.4. Traversing</a> <a href="#ref-for-perform-an-app-history-traversal①">(2)</a> <a href="#ref-for-perform-an-app-history-traversal②">(3)</a>
    <li><a href="#ref-for-perform-an-app-history-traversal③">2.3. Firing the event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistory-onnavigate">
   <b><a href="#dom-apphistory-onnavigate">#dom-apphistory-onnavigate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistory-onnavigate">1. The AppHistory class</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="eventdef-apphistory-navigate">
   <b><a href="#eventdef-apphistory-navigate">#eventdef-apphistory-navigate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-eventdef-apphistory-navigate">1.2. Ongoing navigation tracking</a> <a href="#ref-for-eventdef-apphistory-navigate①">(2)</a>
    <li><a href="#ref-for-eventdef-apphistory-navigate②">1.3. Navigating</a> <a href="#ref-for-eventdef-apphistory-navigate③">(2)</a> <a href="#ref-for-eventdef-apphistory-navigate④">(3)</a> <a href="#ref-for-eventdef-apphistory-navigate⑤">(4)</a> <a href="#ref-for-eventdef-apphistory-navigate⑥">(5)</a> <a href="#ref-for-eventdef-apphistory-navigate⑦">(6)</a> <a href="#ref-for-eventdef-apphistory-navigate⑧">(7)</a>
    <li><a href="#ref-for-eventdef-apphistory-navigate⑨">1.4. Traversing</a> <a href="#ref-for-eventdef-apphistory-navigate①⓪">(2)</a> <a href="#ref-for-eventdef-apphistory-navigate①①">(3)</a> <a href="#ref-for-eventdef-apphistory-navigate①②">(4)</a> <a href="#ref-for-eventdef-apphistory-navigate①③">(5)</a> <a href="#ref-for-eventdef-apphistory-navigate①④">(6)</a> <a href="#ref-for-eventdef-apphistory-navigate①⑤">(7)</a>
    <li><a href="#ref-for-eventdef-apphistory-navigate①⑥">2. The navigate event</a>
    <li><a href="#ref-for-eventdef-apphistory-navigate①⑦">2.3. Firing the event</a>
    <li><a href="#ref-for-eventdef-apphistory-navigate①⑧">4. Patches to fire the navigate event</a> <a href="#ref-for-eventdef-apphistory-navigate①⑨">(2)</a>
    <li><a href="#ref-for-eventdef-apphistory-navigate②⓪">4.3. Navigation algorithm updates</a> <a href="#ref-for-eventdef-apphistory-navigate②①">(2)</a> <a href="#ref-for-eventdef-apphistory-navigate②②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistory-onnavigatesuccess">
   <b><a href="#dom-apphistory-onnavigatesuccess">#dom-apphistory-onnavigatesuccess</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistory-onnavigatesuccess">1. The AppHistory class</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="eventdef-apphistory-navigatesuccess">
   <b><a href="#eventdef-apphistory-navigatesuccess">#eventdef-apphistory-navigatesuccess</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-eventdef-apphistory-navigatesuccess">2.1. The AppHistoryNavigateEvent class</a>
    <li><a href="#ref-for-eventdef-apphistory-navigatesuccess①">2.3. Firing the event</a> <a href="#ref-for-eventdef-apphistory-navigatesuccess②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistory-onnavigateerror">
   <b><a href="#dom-apphistory-onnavigateerror">#dom-apphistory-onnavigateerror</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistory-onnavigateerror">1. The AppHistory class</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="eventdef-apphistory-navigateerror">
   <b><a href="#eventdef-apphistory-navigateerror">#eventdef-apphistory-navigateerror</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-eventdef-apphistory-navigateerror">2.1. The AppHistoryNavigateEvent class</a>
    <li><a href="#ref-for-eventdef-apphistory-navigateerror①">2.3. Firing the event</a> <a href="#ref-for-eventdef-apphistory-navigateerror②">(2)</a> <a href="#ref-for-eventdef-apphistory-navigateerror③">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="apphistorynavigateevent">
   <b><a href="#apphistorynavigateevent">#apphistorynavigateevent</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-apphistorynavigateevent">1.2. Ongoing navigation tracking</a> <a href="#ref-for-apphistorynavigateevent①">(2)</a> <a href="#ref-for-apphistorynavigateevent②">(3)</a>
    <li><a href="#ref-for-apphistorynavigateevent③">2.1. The AppHistoryNavigateEvent class</a> <a href="#ref-for-apphistorynavigateevent④">(2)</a> <a href="#ref-for-apphistorynavigateevent⑤">(3)</a>
    <li><a href="#ref-for-apphistorynavigateevent⑥">2.3. Firing the event</a> <a href="#ref-for-apphistorynavigateevent⑦">(2)</a> <a href="#ref-for-apphistorynavigateevent⑧">(3)</a>
    <li><a href="#ref-for-apphistorynavigateevent⑨">4.1. Form submission patches</a>
    <li><a href="#ref-for-apphistorynavigateevent①⓪">4.2. Browser UI/user-initiated patches</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-apphistorynavigateeventinit">
   <b><a href="#dictdef-apphistorynavigateeventinit">#dictdef-apphistorynavigateeventinit</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-apphistorynavigateeventinit">2.1. The AppHistoryNavigateEvent class</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="enumdef-apphistorynavigationtype">
   <b><a href="#enumdef-apphistorynavigationtype">#enumdef-apphistorynavigationtype</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-enumdef-apphistorynavigationtype">2.1. The AppHistoryNavigateEvent class</a> <a href="#ref-for-enumdef-apphistorynavigationtype①">(2)</a>
    <li><a href="#ref-for-enumdef-apphistorynavigationtype②">2.3. Firing the event</a> <a href="#ref-for-enumdef-apphistorynavigationtype③">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistorynavigationtype-reload">
   <b><a href="#dom-apphistorynavigationtype-reload">#dom-apphistorynavigationtype-reload</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistorynavigationtype-reload">2.1. The AppHistoryNavigateEvent class</a> <a href="#ref-for-dom-apphistorynavigationtype-reload①">(2)</a>
    <li><a href="#ref-for-dom-apphistorynavigationtype-reload②">2.2. The AppHistoryDestination class</a>
    <li><a href="#ref-for-dom-apphistorynavigationtype-reload③">4.3. Navigation algorithm updates</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistorynavigationtype-push">
   <b><a href="#dom-apphistorynavigationtype-push">#dom-apphistorynavigationtype-push</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistorynavigationtype-push">2.1. The AppHistoryNavigateEvent class</a> <a href="#ref-for-dom-apphistorynavigationtype-push①">(2)</a>
    <li><a href="#ref-for-dom-apphistorynavigationtype-push②">2.2. The AppHistoryDestination class</a>
    <li><a href="#ref-for-dom-apphistorynavigationtype-push③">2.3. Firing the event</a>
    <li><a href="#ref-for-dom-apphistorynavigationtype-push④">4.3. Navigation algorithm updates</a> <a href="#ref-for-dom-apphistorynavigationtype-push⑤">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistorynavigationtype-replace">
   <b><a href="#dom-apphistorynavigationtype-replace">#dom-apphistorynavigationtype-replace</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistorynavigationtype-replace">2.1. The AppHistoryNavigateEvent class</a> <a href="#ref-for-dom-apphistorynavigationtype-replace①">(2)</a>
    <li><a href="#ref-for-dom-apphistorynavigationtype-replace②">2.2. The AppHistoryDestination class</a>
    <li><a href="#ref-for-dom-apphistorynavigationtype-replace③">4.3. Navigation algorithm updates</a> <a href="#ref-for-dom-apphistorynavigationtype-replace④">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistorynavigationtype-traverse">
   <b><a href="#dom-apphistorynavigationtype-traverse">#dom-apphistorynavigationtype-traverse</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistorynavigationtype-traverse">1.2. Ongoing navigation tracking</a> <a href="#ref-for-dom-apphistorynavigationtype-traverse①">(2)</a>
    <li><a href="#ref-for-dom-apphistorynavigationtype-traverse②">2.1. The AppHistoryNavigateEvent class</a> <a href="#ref-for-dom-apphistorynavigationtype-traverse③">(2)</a>
    <li><a href="#ref-for-dom-apphistorynavigationtype-traverse④">2.2. The AppHistoryDestination class</a> <a href="#ref-for-dom-apphistorynavigationtype-traverse⑤">(2)</a> <a href="#ref-for-dom-apphistorynavigationtype-traverse⑥">(3)</a> <a href="#ref-for-dom-apphistorynavigationtype-traverse⑦">(4)</a>
    <li><a href="#ref-for-dom-apphistorynavigationtype-traverse⑧">2.3. Firing the event</a> <a href="#ref-for-dom-apphistorynavigationtype-traverse⑨">(2)</a> <a href="#ref-for-dom-apphistorynavigationtype-traverse①⓪">(3)</a> <a href="#ref-for-dom-apphistorynavigationtype-traverse①①">(4)</a> <a href="#ref-for-dom-apphistorynavigationtype-traverse①②">(5)</a> <a href="#ref-for-dom-apphistorynavigationtype-traverse①③">(6)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistorynavigateevent-navigationtype">
   <b><a href="#dom-apphistorynavigateevent-navigationtype">#dom-apphistorynavigateevent-navigationtype</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistorynavigateevent-navigationtype">2.1. The AppHistoryNavigateEvent class</a> <a href="#ref-for-dom-apphistorynavigateevent-navigationtype①">(2)</a> <a href="#ref-for-dom-apphistorynavigateevent-navigationtype②">(3)</a> <a href="#ref-for-dom-apphistorynavigateevent-navigationtype③">(4)</a>
    <li><a href="#ref-for-dom-apphistorynavigateevent-navigationtype④">2.3. Firing the event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistorynavigateevent-destination">
   <b><a href="#dom-apphistorynavigateevent-destination">#dom-apphistorynavigateevent-destination</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistorynavigateevent-destination">2.1. The AppHistoryNavigateEvent class</a> <a href="#ref-for-dom-apphistorynavigateevent-destination①">(2)</a>
    <li><a href="#ref-for-dom-apphistorynavigateevent-destination②">2.2. The AppHistoryDestination class</a> <a href="#ref-for-dom-apphistorynavigateevent-destination③">(2)</a> <a href="#ref-for-dom-apphistorynavigateevent-destination④">(3)</a> <a href="#ref-for-dom-apphistorynavigateevent-destination⑤">(4)</a> <a href="#ref-for-dom-apphistorynavigateevent-destination⑥">(5)</a> <a href="#ref-for-dom-apphistorynavigateevent-destination⑦">(6)</a>
    <li><a href="#ref-for-dom-apphistorynavigateevent-destination⑧">2.3. Firing the event</a> <a href="#ref-for-dom-apphistorynavigateevent-destination⑨">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistorynavigateevent-canrespond">
   <b><a href="#dom-apphistorynavigateevent-canrespond">#dom-apphistorynavigateevent-canrespond</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistorynavigateevent-canrespond">2.1. The AppHistoryNavigateEvent class</a> <a href="#ref-for-dom-apphistorynavigateevent-canrespond①">(2)</a> <a href="#ref-for-dom-apphistorynavigateevent-canrespond②">(3)</a> <a href="#ref-for-dom-apphistorynavigateevent-canrespond③">(4)</a>
    <li><a href="#ref-for-dom-apphistorynavigateevent-canrespond④">2.3. Firing the event</a> <a href="#ref-for-dom-apphistorynavigateevent-canrespond⑤">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistorynavigateevent-userinitiated">
   <b><a href="#dom-apphistorynavigateevent-userinitiated">#dom-apphistorynavigateevent-userinitiated</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistorynavigateevent-userinitiated">2.1. The AppHistoryNavigateEvent class</a> <a href="#ref-for-dom-apphistorynavigateevent-userinitiated①">(2)</a>
    <li><a href="#ref-for-dom-apphistorynavigateevent-userinitiated②">2.3. Firing the event</a>
    <li><a href="#ref-for-dom-apphistorynavigateevent-userinitiated③">4.2. Browser UI/user-initiated patches</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistorynavigateevent-hashchange">
   <b><a href="#dom-apphistorynavigateevent-hashchange">#dom-apphistorynavigateevent-hashchange</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistorynavigateevent-hashchange">2.1. The AppHistoryNavigateEvent class</a> <a href="#ref-for-dom-apphistorynavigateevent-hashchange①">(2)</a>
    <li><a href="#ref-for-dom-apphistorynavigateevent-hashchange②">2.3. Firing the event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistorynavigateevent-signal">
   <b><a href="#dom-apphistorynavigateevent-signal">#dom-apphistorynavigateevent-signal</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistorynavigateevent-signal">1.2. Ongoing navigation tracking</a> <a href="#ref-for-dom-apphistorynavigateevent-signal①">(2)</a> <a href="#ref-for-dom-apphistorynavigateevent-signal②">(3)</a>
    <li><a href="#ref-for-dom-apphistorynavigateevent-signal③">2.1. The AppHistoryNavigateEvent class</a> <a href="#ref-for-dom-apphistorynavigateevent-signal④">(2)</a>
    <li><a href="#ref-for-dom-apphistorynavigateevent-signal⑤">2.3. Firing the event</a> <a href="#ref-for-dom-apphistorynavigateevent-signal⑥">(2)</a> <a href="#ref-for-dom-apphistorynavigateevent-signal⑦">(3)</a> <a href="#ref-for-dom-apphistorynavigateevent-signal⑧">(4)</a> <a href="#ref-for-dom-apphistorynavigateevent-signal⑨">(5)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistorynavigateevent-formdata">
   <b><a href="#dom-apphistorynavigateevent-formdata">#dom-apphistorynavigateevent-formdata</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistorynavigateevent-formdata">2.1. The AppHistoryNavigateEvent class</a> <a href="#ref-for-dom-apphistorynavigateevent-formdata①">(2)</a>
    <li><a href="#ref-for-dom-apphistorynavigateevent-formdata②">2.3. Firing the event</a>
    <li><a href="#ref-for-dom-apphistorynavigateevent-formdata③">4.1. Form submission patches</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistorynavigateevent-info">
   <b><a href="#dom-apphistorynavigateevent-info">#dom-apphistorynavigateevent-info</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistorynavigateevent-info">1.3. Navigating</a>
    <li><a href="#ref-for-dom-apphistorynavigateevent-info①">1.4. Traversing</a> <a href="#ref-for-dom-apphistorynavigateevent-info②">(2)</a> <a href="#ref-for-dom-apphistorynavigateevent-info③">(3)</a>
    <li><a href="#ref-for-dom-apphistorynavigateevent-info④">2.1. The AppHistoryNavigateEvent class</a> <a href="#ref-for-dom-apphistorynavigateevent-info⑤">(2)</a>
    <li><a href="#ref-for-dom-apphistorynavigateevent-info⑥">2.3. Firing the event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="apphistorynavigateevent-classic-history-api-serialized-data">
   <b><a href="#apphistorynavigateevent-classic-history-api-serialized-data">#apphistorynavigateevent-classic-history-api-serialized-data</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-apphistorynavigateevent-classic-history-api-serialized-data">2.3. Firing the event</a> <a href="#ref-for-apphistorynavigateevent-classic-history-api-serialized-data①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="apphistorynavigateevent-destination-entry">
   <b><a href="#apphistorynavigateevent-destination-entry">#apphistorynavigateevent-destination-entry</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-apphistorynavigateevent-destination-entry">2.3. Firing the event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="apphistorynavigateevent-navigation-action-promises-list">
   <b><a href="#apphistorynavigateevent-navigation-action-promises-list">#apphistorynavigateevent-navigation-action-promises-list</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-apphistorynavigateevent-navigation-action-promises-list">2.1. The AppHistoryNavigateEvent class</a>
    <li><a href="#ref-for-apphistorynavigateevent-navigation-action-promises-list①">2.3. Firing the event</a> <a href="#ref-for-apphistorynavigateevent-navigation-action-promises-list②">(2)</a> <a href="#ref-for-apphistorynavigateevent-navigation-action-promises-list③">(3)</a> <a href="#ref-for-apphistorynavigateevent-navigation-action-promises-list④">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistorynavigateevent-respondwith">
   <b><a href="#dom-apphistorynavigateevent-respondwith">#dom-apphistorynavigateevent-respondwith</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistorynavigateevent-respondwith">1.2. Ongoing navigation tracking</a> <a href="#ref-for-dom-apphistorynavigateevent-respondwith①">(2)</a> <a href="#ref-for-dom-apphistorynavigateevent-respondwith②">(3)</a> <a href="#ref-for-dom-apphistorynavigateevent-respondwith③">(4)</a>
    <li><a href="#ref-for-dom-apphistorynavigateevent-respondwith④">1.3. Navigating</a> <a href="#ref-for-dom-apphistorynavigateevent-respondwith⑤">(2)</a> <a href="#ref-for-dom-apphistorynavigateevent-respondwith⑥">(3)</a> <a href="#ref-for-dom-apphistorynavigateevent-respondwith⑦">(4)</a> <a href="#ref-for-dom-apphistorynavigateevent-respondwith⑧">(5)</a> <a href="#ref-for-dom-apphistorynavigateevent-respondwith⑨">(6)</a>
    <li><a href="#ref-for-dom-apphistorynavigateevent-respondwith①⓪">1.4. Traversing</a> <a href="#ref-for-dom-apphistorynavigateevent-respondwith①①">(2)</a> <a href="#ref-for-dom-apphistorynavigateevent-respondwith①②">(3)</a> <a href="#ref-for-dom-apphistorynavigateevent-respondwith①③">(4)</a> <a href="#ref-for-dom-apphistorynavigateevent-respondwith①④">(5)</a> <a href="#ref-for-dom-apphistorynavigateevent-respondwith①⑤">(6)</a>
    <li><a href="#ref-for-dom-apphistorynavigateevent-respondwith①⑥">2.1. The AppHistoryNavigateEvent class</a> <a href="#ref-for-dom-apphistorynavigateevent-respondwith①⑦">(2)</a> <a href="#ref-for-dom-apphistorynavigateevent-respondwith①⑧">(3)</a>
    <li><a href="#ref-for-dom-apphistorynavigateevent-respondwith①⑨">2.2. The AppHistoryDestination class</a>
    <li><a href="#ref-for-dom-apphistorynavigateevent-respondwith②⓪">2.3. Firing the event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="apphistorydestination">
   <b><a href="#apphistorydestination">#apphistorydestination</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-apphistorydestination">2.1. The AppHistoryNavigateEvent class</a> <a href="#ref-for-apphistorydestination①">(2)</a> <a href="#ref-for-apphistorydestination②">(3)</a>
    <li><a href="#ref-for-apphistorydestination③">2.2. The AppHistoryDestination class</a> <a href="#ref-for-apphistorydestination④">(2)</a> <a href="#ref-for-apphistorydestination⑤">(3)</a> <a href="#ref-for-apphistorydestination⑥">(4)</a> <a href="#ref-for-apphistorydestination⑦">(5)</a> <a href="#ref-for-apphistorydestination⑧">(6)</a> <a href="#ref-for-apphistorydestination⑨">(7)</a>
    <li><a href="#ref-for-apphistorydestination①⓪">2.3. Firing the event</a> <a href="#ref-for-apphistorydestination①①">(2)</a> <a href="#ref-for-apphistorydestination①②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="apphistorydestination-url">
   <b><a href="#apphistorydestination-url">#apphistorydestination-url</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-apphistorydestination-url">2.2. The AppHistoryDestination class</a>
    <li><a href="#ref-for-apphistorydestination-url①">2.3. Firing the event</a> <a href="#ref-for-apphistorydestination-url②">(2)</a> <a href="#ref-for-apphistorydestination-url③">(3)</a> <a href="#ref-for-apphistorydestination-url④">(4)</a> <a href="#ref-for-apphistorydestination-url⑤">(5)</a> <a href="#ref-for-apphistorydestination-url⑥">(6)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="apphistorydestination-key">
   <b><a href="#apphistorydestination-key">#apphistorydestination-key</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-apphistorydestination-key">2.2. The AppHistoryDestination class</a>
    <li><a href="#ref-for-apphistorydestination-key①">2.3. Firing the event</a> <a href="#ref-for-apphistorydestination-key②">(2)</a> <a href="#ref-for-apphistorydestination-key③">(3)</a> <a href="#ref-for-apphistorydestination-key④">(4)</a> <a href="#ref-for-apphistorydestination-key⑤">(5)</a> <a href="#ref-for-apphistorydestination-key⑥">(6)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="apphistorydestination-id">
   <b><a href="#apphistorydestination-id">#apphistorydestination-id</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-apphistorydestination-id">2.2. The AppHistoryDestination class</a>
    <li><a href="#ref-for-apphistorydestination-id①">2.3. Firing the event</a> <a href="#ref-for-apphistorydestination-id②">(2)</a> <a href="#ref-for-apphistorydestination-id③">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="apphistorydestination-index">
   <b><a href="#apphistorydestination-index">#apphistorydestination-index</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-apphistorydestination-index">2.2. The AppHistoryDestination class</a>
    <li><a href="#ref-for-apphistorydestination-index①">2.3. Firing the event</a> <a href="#ref-for-apphistorydestination-index②">(2)</a> <a href="#ref-for-apphistorydestination-index③">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="apphistorydestination-state">
   <b><a href="#apphistorydestination-state">#apphistorydestination-state</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-apphistorydestination-state">2.2. The AppHistoryDestination class</a> <a href="#ref-for-apphistorydestination-state①">(2)</a>
    <li><a href="#ref-for-apphistorydestination-state②">2.3. Firing the event</a> <a href="#ref-for-apphistorydestination-state③">(2)</a> <a href="#ref-for-apphistorydestination-state④">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="apphistorydestination-is-same-document">
   <b><a href="#apphistorydestination-is-same-document">#apphistorydestination-is-same-document</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-apphistorydestination-is-same-document">2.2. The AppHistoryDestination class</a>
    <li><a href="#ref-for-apphistorydestination-is-same-document①">2.3. Firing the event</a> <a href="#ref-for-apphistorydestination-is-same-document②">(2)</a> <a href="#ref-for-apphistorydestination-is-same-document③">(3)</a> <a href="#ref-for-apphistorydestination-is-same-document④">(4)</a> <a href="#ref-for-apphistorydestination-is-same-document⑤">(5)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistorydestination-url">
   <b><a href="#dom-apphistorydestination-url">#dom-apphistorydestination-url</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistorydestination-url">2.2. The AppHistoryDestination class</a> <a href="#ref-for-dom-apphistorydestination-url①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistorydestination-key">
   <b><a href="#dom-apphistorydestination-key">#dom-apphistorydestination-key</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistorydestination-key">2.2. The AppHistoryDestination class</a> <a href="#ref-for-dom-apphistorydestination-key①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistorydestination-id">
   <b><a href="#dom-apphistorydestination-id">#dom-apphistorydestination-id</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistorydestination-id">2.2. The AppHistoryDestination class</a> <a href="#ref-for-dom-apphistorydestination-id①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistorydestination-index">
   <b><a href="#dom-apphistorydestination-index">#dom-apphistorydestination-index</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistorydestination-index">2.2. The AppHistoryDestination class</a> <a href="#ref-for-dom-apphistorydestination-index①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistorydestination-samedocument">
   <b><a href="#dom-apphistorydestination-samedocument">#dom-apphistorydestination-samedocument</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistorydestination-samedocument">2.2. The AppHistoryDestination class</a> <a href="#ref-for-dom-apphistorydestination-samedocument①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistorydestination-getstate">
   <b><a href="#dom-apphistorydestination-getstate">#dom-apphistorydestination-getstate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistorydestination-getstate">2.2. The AppHistoryDestination class</a> <a href="#ref-for-dom-apphistorydestination-getstate①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="fire-a-traversal-navigate-event">
   <b><a href="#fire-a-traversal-navigate-event">#fire-a-traversal-navigate-event</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-fire-a-traversal-navigate-event">4.4. History traversal updates</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="fire-a-traversal-navigate-event-destinationentry">
   <b><a href="#fire-a-traversal-navigate-event-destinationentry">#fire-a-traversal-navigate-event-destinationentry</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-fire-a-traversal-navigate-event-destinationentry">4.4. History traversal updates</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="fire-a-traversal-navigate-event-userinvolvement">
   <b><a href="#fire-a-traversal-navigate-event-userinvolvement">#fire-a-traversal-navigate-event-userinvolvement</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-fire-a-traversal-navigate-event-userinvolvement">4.4. History traversal updates</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="fire-a-push-or-replace-navigate-event">
   <b><a href="#fire-a-push-or-replace-navigate-event">#fire-a-push-or-replace-navigate-event</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-fire-a-push-or-replace-navigate-event">4.3. Navigation algorithm updates</a> <a href="#ref-for-fire-a-push-or-replace-navigate-event①">(2)</a> <a href="#ref-for-fire-a-push-or-replace-navigate-event②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="fire-a-push-or-replace-navigate-event-navigationtype">
   <b><a href="#fire-a-push-or-replace-navigate-event-navigationtype">#fire-a-push-or-replace-navigate-event-navigationtype</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-fire-a-push-or-replace-navigate-event-navigationtype">4.3. Navigation algorithm updates</a> <a href="#ref-for-fire-a-push-or-replace-navigate-event-navigationtype①">(2)</a> <a href="#ref-for-fire-a-push-or-replace-navigate-event-navigationtype②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="fire-a-push-or-replace-navigate-event-destinationurl">
   <b><a href="#fire-a-push-or-replace-navigate-event-destinationurl">#fire-a-push-or-replace-navigate-event-destinationurl</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-fire-a-push-or-replace-navigate-event-destinationurl">4.3. Navigation algorithm updates</a> <a href="#ref-for-fire-a-push-or-replace-navigate-event-destinationurl①">(2)</a> <a href="#ref-for-fire-a-push-or-replace-navigate-event-destinationurl②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="fire-a-push-or-replace-navigate-event-issamedocument">
   <b><a href="#fire-a-push-or-replace-navigate-event-issamedocument">#fire-a-push-or-replace-navigate-event-issamedocument</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-fire-a-push-or-replace-navigate-event-issamedocument">4.3. Navigation algorithm updates</a> <a href="#ref-for-fire-a-push-or-replace-navigate-event-issamedocument①">(2)</a> <a href="#ref-for-fire-a-push-or-replace-navigate-event-issamedocument②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="fire-a-push-or-replace-navigate-event-userinvolvement">
   <b><a href="#fire-a-push-or-replace-navigate-event-userinvolvement">#fire-a-push-or-replace-navigate-event-userinvolvement</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-fire-a-push-or-replace-navigate-event-userinvolvement">4.3. Navigation algorithm updates</a> <a href="#ref-for-fire-a-push-or-replace-navigate-event-userinvolvement①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="fire-a-push-or-replace-navigate-event-state">
   <b><a href="#fire-a-push-or-replace-navigate-event-state">#fire-a-push-or-replace-navigate-event-state</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-fire-a-push-or-replace-navigate-event-state">4.3. Navigation algorithm updates</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="fire-a-push-or-replace-navigate-event-formdataentrylist">
   <b><a href="#fire-a-push-or-replace-navigate-event-formdataentrylist">#fire-a-push-or-replace-navigate-event-formdataentrylist</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-fire-a-push-or-replace-navigate-event-formdataentrylist">4.3. Navigation algorithm updates</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="fire-a-push-or-replace-navigate-event-classichistoryapiserializeddata">
   <b><a href="#fire-a-push-or-replace-navigate-event-classichistoryapiserializeddata">#fire-a-push-or-replace-navigate-event-classichistoryapiserializeddata</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-fire-a-push-or-replace-navigate-event-classichistoryapiserializeddata">4.3. Navigation algorithm updates</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="inner-navigate-event-firing-algorithm">
   <b><a href="#inner-navigate-event-firing-algorithm">#inner-navigate-event-firing-algorithm</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-inner-navigate-event-firing-algorithm">1.3. Navigating</a>
    <li><a href="#ref-for-inner-navigate-event-firing-algorithm①">2.3. Firing the event</a> <a href="#ref-for-inner-navigate-event-firing-algorithm②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="finalize-with-an-aborted-navigation-error">
   <b><a href="#finalize-with-an-aborted-navigation-error">#finalize-with-an-aborted-navigation-error</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-finalize-with-an-aborted-navigation-error">1.3. Navigating</a>
    <li><a href="#ref-for-finalize-with-an-aborted-navigation-error①">1.4. Traversing</a> <a href="#ref-for-finalize-with-an-aborted-navigation-error②">(2)</a>
    <li><a href="#ref-for-finalize-with-an-aborted-navigation-error③">2.3. Firing the event</a> <a href="#ref-for-finalize-with-an-aborted-navigation-error④">(2)</a> <a href="#ref-for-finalize-with-an-aborted-navigation-error⑤">(3)</a> <a href="#ref-for-finalize-with-an-aborted-navigation-error⑥">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="inform-app-history-about-a-canceled-navigation">
   <b><a href="#inform-app-history-about-a-canceled-navigation">#inform-app-history-about-a-canceled-navigation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-inform-app-history-about-a-canceled-navigation">6.1. Canceling navigation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="rewritable">
   <b><a href="#rewritable">#rewritable</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-rewritable">2.1. The AppHistoryNavigateEvent class</a>
    <li><a href="#ref-for-rewritable①">2.3. Firing the event</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="apphistoryentry">
   <b><a href="#apphistoryentry">#apphistoryentry</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-apphistoryentry">1. The AppHistory class</a> <a href="#ref-for-apphistoryentry①">(2)</a>
    <li><a href="#ref-for-apphistoryentry②">1.1. Introspecting the app history entry list</a> <a href="#ref-for-apphistoryentry③">(2)</a> <a href="#ref-for-apphistoryentry④">(3)</a> <a href="#ref-for-apphistoryentry⑤">(4)</a> <a href="#ref-for-apphistoryentry⑥">(5)</a> <a href="#ref-for-apphistoryentry⑦">(6)</a> <a href="#ref-for-apphistoryentry⑧">(7)</a>
    <li><a href="#ref-for-apphistoryentry⑨">1.4. Traversing</a> <a href="#ref-for-apphistoryentry①⓪">(2)</a> <a href="#ref-for-apphistoryentry①①">(3)</a>
    <li><a href="#ref-for-apphistoryentry①②">2.2. The AppHistoryDestination class</a> <a href="#ref-for-apphistoryentry①③">(2)</a> <a href="#ref-for-apphistoryentry①④">(3)</a>
    <li><a href="#ref-for-apphistoryentry①⑤">3. App history entries</a> <a href="#ref-for-apphistoryentry①⑥">(2)</a> <a href="#ref-for-apphistoryentry①⑦">(3)</a> <a href="#ref-for-apphistoryentry①⑧">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="apphistoryentry-session-history-entry">
   <b><a href="#apphistoryentry-session-history-entry">#apphistoryentry-session-history-entry</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-apphistoryentry-session-history-entry">1.1. Introspecting the app history entry list</a> <a href="#ref-for-apphistoryentry-session-history-entry①">(2)</a> <a href="#ref-for-apphistoryentry-session-history-entry②">(3)</a>
    <li><a href="#ref-for-apphistoryentry-session-history-entry③">1.4. Traversing</a> <a href="#ref-for-apphistoryentry-session-history-entry④">(2)</a> <a href="#ref-for-apphistoryentry-session-history-entry⑤">(3)</a> <a href="#ref-for-apphistoryentry-session-history-entry⑥">(4)</a>
    <li><a href="#ref-for-apphistoryentry-session-history-entry⑦">3. App history entries</a> <a href="#ref-for-apphistoryentry-session-history-entry⑧">(2)</a> <a href="#ref-for-apphistoryentry-session-history-entry⑨">(3)</a> <a href="#ref-for-apphistoryentry-session-history-entry①⓪">(4)</a> <a href="#ref-for-apphistoryentry-session-history-entry①①">(5)</a> <a href="#ref-for-apphistoryentry-session-history-entry①②">(6)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="apphistoryentry-index">
   <b><a href="#apphistoryentry-index">#apphistoryentry-index</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-apphistoryentry-index">1.1. Introspecting the app history entry list</a> <a href="#ref-for-apphistoryentry-index①">(2)</a>
    <li><a href="#ref-for-apphistoryentry-index②">3. App history entries</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistoryentry-key">
   <b><a href="#dom-apphistoryentry-key">#dom-apphistoryentry-key</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistoryentry-key">2.2. The AppHistoryDestination class</a>
    <li><a href="#ref-for-dom-apphistoryentry-key①">3. App history entries</a> <a href="#ref-for-dom-apphistoryentry-key②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistoryentry-id">
   <b><a href="#dom-apphistoryentry-id">#dom-apphistoryentry-id</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistoryentry-id">2.2. The AppHistoryDestination class</a>
    <li><a href="#ref-for-dom-apphistoryentry-id①">3. App history entries</a> <a href="#ref-for-dom-apphistoryentry-id②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistoryentry-url">
   <b><a href="#dom-apphistoryentry-url">#dom-apphistoryentry-url</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistoryentry-url">3. App history entries</a> <a href="#ref-for-dom-apphistoryentry-url①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistoryentry-index">
   <b><a href="#dom-apphistoryentry-index">#dom-apphistoryentry-index</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistoryentry-index">2.2. The AppHistoryDestination class</a>
    <li><a href="#ref-for-dom-apphistoryentry-index①">3. App history entries</a> <a href="#ref-for-dom-apphistoryentry-index②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistoryentry-samedocument">
   <b><a href="#dom-apphistoryentry-samedocument">#dom-apphistoryentry-samedocument</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistoryentry-samedocument">3. App history entries</a> <a href="#ref-for-dom-apphistoryentry-samedocument①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-apphistoryentry-getstate">
   <b><a href="#dom-apphistoryentry-getstate">#dom-apphistoryentry-getstate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-apphistoryentry-getstate">1.3. Navigating</a>
    <li><a href="#ref-for-dom-apphistoryentry-getstate①">3. App history entries</a> <a href="#ref-for-dom-apphistoryentry-getstate②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="navigate-entrylist">
   <b><a href="#navigate-entrylist">#navigate-entrylist</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-navigate-entrylist">4.1. Form submission patches</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="user-navigation-involvement">
   <b><a href="#user-navigation-involvement">#user-navigation-involvement</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-user-navigation-involvement">2.3. Firing the event</a> <a href="#ref-for-user-navigation-involvement①">(2)</a> <a href="#ref-for-user-navigation-involvement②">(3)</a>
    <li><a href="#ref-for-user-navigation-involvement③">4.4. History traversal updates</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="user-navigation-involvement-browser-ui">
   <b><a href="#user-navigation-involvement-browser-ui">#user-navigation-involvement-browser-ui</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-user-navigation-involvement-browser-ui">2.3. Firing the event</a>
    <li><a href="#ref-for-user-navigation-involvement-browser-ui①">4.2. Browser UI/user-initiated patches</a> <a href="#ref-for-user-navigation-involvement-browser-ui②">(2)</a> <a href="#ref-for-user-navigation-involvement-browser-ui③">(3)</a>
    <li><a href="#ref-for-user-navigation-involvement-browser-ui④">4.3. Navigation algorithm updates</a> <a href="#ref-for-user-navigation-involvement-browser-ui⑤">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="user-navigation-involvement-activation">
   <b><a href="#user-navigation-involvement-activation">#user-navigation-involvement-activation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-user-navigation-involvement-activation">4.2. Browser UI/user-initiated patches</a> <a href="#ref-for-user-navigation-involvement-activation①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="user-navigation-involvement-none">
   <b><a href="#user-navigation-involvement-none">#user-navigation-involvement-none</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-user-navigation-involvement-none">1.4. Traversing</a>
    <li><a href="#ref-for-user-navigation-involvement-none①">2.3. Firing the event</a> <a href="#ref-for-user-navigation-involvement-none②">(2)</a> <a href="#ref-for-user-navigation-involvement-none③">(3)</a>
    <li><a href="#ref-for-user-navigation-involvement-none④">4.2. Browser UI/user-initiated patches</a> <a href="#ref-for-user-navigation-involvement-none⑤">(2)</a> <a href="#ref-for-user-navigation-involvement-none⑥">(3)</a> <a href="#ref-for-user-navigation-involvement-none⑦">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="event-user-navigation-involvement">
   <b><a href="#event-user-navigation-involvement">#event-user-navigation-involvement</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-event-user-navigation-involvement">4.2. Browser UI/user-initiated patches</a> <a href="#ref-for-event-user-navigation-involvement①">(2)</a> <a href="#ref-for-event-user-navigation-involvement②">(3)</a> <a href="#ref-for-event-user-navigation-involvement③">(4)</a> <a href="#ref-for-event-user-navigation-involvement④">(5)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="navigate-userinvolvement">
   <b><a href="#navigate-userinvolvement">#navigate-userinvolvement</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-navigate-userinvolvement">4.2. Browser UI/user-initiated patches</a> <a href="#ref-for-navigate-userinvolvement①">(2)</a> <a href="#ref-for-navigate-userinvolvement②">(3)</a> <a href="#ref-for-navigate-userinvolvement③">(4)</a> <a href="#ref-for-navigate-userinvolvement④">(5)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="traverse-the-history-by-a-delta-userinvolvement">
   <b><a href="#traverse-the-history-by-a-delta-userinvolvement">#traverse-the-history-by-a-delta-userinvolvement</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-traverse-the-history-by-a-delta-userinvolvement">4.2. Browser UI/user-initiated patches</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="navigate-apphistorystate">
   <b><a href="#navigate-apphistorystate">#navigate-apphistorystate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-navigate-apphistorystate">1.3. Navigating</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="convert-a-history-handling-behavior-to-a-navigation-type">
   <b><a href="#convert-a-history-handling-behavior-to-a-navigation-type">#convert-a-history-handling-behavior-to-a-navigation-type</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-convert-a-history-handling-behavior-to-a-navigation-type">4.3. Navigation algorithm updates</a> <a href="#ref-for-convert-a-history-handling-behavior-to-a-navigation-type①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="fire-traversal-navigate-events">
   <b><a href="#fire-traversal-navigate-events">#fire-traversal-navigate-events</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-fire-traversal-navigate-events">4.4. History traversal updates</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="session-history-entry-origin">
   <b><a href="#session-history-entry-origin">#session-history-entry-origin</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-session-history-entry-origin">1.1. Introspecting the app history entry list</a> <a href="#ref-for-session-history-entry-origin①">(2)</a> <a href="#ref-for-session-history-entry-origin②">(3)</a> <a href="#ref-for-session-history-entry-origin③">(4)</a>
    <li><a href="#ref-for-session-history-entry-origin④">2.3. Firing the event</a>
    <li><a href="#ref-for-session-history-entry-origin⑤">5.2. Carrying over the app history key</a> <a href="#ref-for-session-history-entry-origin⑥">(2)</a>
    <li><a href="#ref-for-session-history-entry-origin⑦">5.4. Tracking the origin member</a> <a href="#ref-for-session-history-entry-origin⑧">(2)</a> <a href="#ref-for-session-history-entry-origin⑨">(3)</a> <a href="#ref-for-session-history-entry-origin①⓪">(4)</a> <a href="#ref-for-session-history-entry-origin①①">(5)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="session-history-entry-app-history-key">
   <b><a href="#session-history-entry-app-history-key">#session-history-entry-app-history-key</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-session-history-entry-app-history-key">1.4. Traversing</a> <a href="#ref-for-session-history-entry-app-history-key①">(2)</a> <a href="#ref-for-session-history-entry-app-history-key②">(3)</a> <a href="#ref-for-session-history-entry-app-history-key③">(4)</a> <a href="#ref-for-session-history-entry-app-history-key④">(5)</a>
    <li><a href="#ref-for-session-history-entry-app-history-key⑤">2.3. Firing the event</a> <a href="#ref-for-session-history-entry-app-history-key⑥">(2)</a>
    <li><a href="#ref-for-session-history-entry-app-history-key⑦">3. App history entries</a>
    <li><a href="#ref-for-session-history-entry-app-history-key⑧">5.2. Carrying over the app history key</a> <a href="#ref-for-session-history-entry-app-history-key⑨">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="session-history-entry-app-history-id">
   <b><a href="#session-history-entry-app-history-id">#session-history-entry-app-history-id</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-session-history-entry-app-history-id">2.3. Firing the event</a>
    <li><a href="#ref-for-session-history-entry-app-history-id①">3. App history entries</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="session-history-entry-app-history-state">
   <b><a href="#session-history-entry-app-history-state">#session-history-entry-app-history-state</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-session-history-entry-app-history-state">1.3. Navigating</a> <a href="#ref-for-session-history-entry-app-history-state①">(2)</a>
    <li><a href="#ref-for-session-history-entry-app-history-state②">2.3. Firing the event</a> <a href="#ref-for-session-history-entry-app-history-state③">(2)</a> <a href="#ref-for-session-history-entry-app-history-state④">(3)</a>
    <li><a href="#ref-for-session-history-entry-app-history-state⑤">3. App history entries</a> <a href="#ref-for-session-history-entry-app-history-state⑥">(2)</a>
    <li><a href="#ref-for-session-history-entry-app-history-state⑦">5.3. Carrying over the app history state</a>
   </ul>
  </aside>
<script>/* script-dfn-panel */

document.body.addEventListener("click", function(e) {
    var queryAll = function(sel) { return [].slice.call(document.querySelectorAll(sel)); }
    // Find the dfn element or panel, if any, that was clicked on.
    var el = e.target;
    var target;
    var hitALink = false;
    while(el.parentElement) {
        if(el.tagName == "A") {
            // Clicking on a link in a <dfn> shouldn't summon the panel
            hitALink = true;
        }
        if(el.classList.contains("dfn-paneled")) {
            target = "dfn";
            break;
        }
        if(el.classList.contains("dfn-panel")) {
            target = "dfn-panel";
            break;
        }
        el = el.parentElement;
    }
    if(target != "dfn-panel") {
        // Turn off any currently "on" or "activated" panels.
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function(el){
            el.classList.remove("on");
            el.classList.remove("activated");
        });
    }
    if(target == "dfn" && !hitALink) {
        // open the panel
        var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
        if(dfnPanel) {
            dfnPanel.classList.add("on");
            var rect = el.getBoundingClientRect();
            dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
            dfnPanel.style.top = window.scrollY + rect.top + "px";
            var panelRect = dfnPanel.getBoundingClientRect();
            var panelWidth = panelRect.right - panelRect.left;
            if(panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                // Reposition, because the panel is overflowing
                dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
            }
        } else {
            console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
        }
    } else if(target == "dfn-panel") {
        // Switch it to "activated" state, which pins it.
        el.classList.add("activated");
        el.style.left = null;
        el.style.top = null;
    }

});
</script>
<script>/* script-var-click-highlighting */

    document.addEventListener("click", e=>{
        if(e.target.nodeName == "VAR") {
            highlightSameAlgoVars(e.target);
        }
    });
    {
        const indexCounts = new Map();
        const indexNames = new Map();
        function highlightSameAlgoVars(v) {
            // Find the algorithm container.
            let algoContainer = null;
            let searchEl = v;
            while(algoContainer == null && searchEl != document.body) {
                searchEl = searchEl.parentNode;
                if(searchEl.hasAttribute("data-algorithm")) {
                    algoContainer = searchEl;
                }
            }

            // Not highlighting document-global vars,
            // too likely to be unrelated.
            if(algoContainer == null) return;

            const algoName = algoContainer.getAttribute("data-algorithm");
            const varName = getVarName(v);
            const addClass = !v.classList.contains("selected");
            let highlightClass = null;
            if(addClass) {
                const index = chooseHighlightIndex(algoName, varName);
                indexCounts.get(algoName)[index] += 1;
                indexNames.set(algoName+"///"+varName, index);
                highlightClass = nameFromIndex(index);
            } else {
                const index = previousHighlightIndex(algoName, varName);
                indexCounts.get(algoName)[index] -= 1;
                highlightClass = nameFromIndex(index);
            }

            // Find all same-name vars, and toggle their class appropriately.
            for(const el of algoContainer.querySelectorAll("var")) {
                if(getVarName(el) == varName) {
                    el.classList.toggle("selected", addClass);
                    el.classList.toggle(highlightClass, addClass);
                }
            }
        }
        function getVarName(el) {
            return el.textContent.replace(/(\s|\xa0)+/, " ").trim();
        }
        function chooseHighlightIndex(algoName, varName) {
            let indexes = null;
            if(indexCounts.has(algoName)) {
                indexes = indexCounts.get(algoName);
            } else {
                // 7 classes right now
                indexes = [0,0,0,0,0,0,0];
                indexCounts.set(algoName, indexes);
            }

            // If the element was recently unclicked,
            // *and* that color is still unclaimed,
            // give it back the same color.
            const lastIndex = previousHighlightIndex(algoName, varName);
            if(indexes[lastIndex] === 0) return lastIndex;

            // Find the earliest index with the lowest count.
            const minCount = Math.min.apply(null, indexes);
            let index = null;
            for(var i = 0; i < indexes.length; i++) {
                if(indexes[i] == minCount) {
                    return i;
                }
            }
        }
        function previousHighlightIndex(algoName, varName) {
            return indexNames.get(algoName+"///"+varName);
        }
        function nameFromIndex(index) {
            return "selected" + index;
        }
    }
    </script>